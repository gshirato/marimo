var e=Object.defineProperty,t=(t,n,r)=>(((t,n,r)=>{n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r})(t,"symbol"!=typeof n?n+"":n,r),r);import{c as n,R as r,j as o,dr as i,e as s,f3 as a,dA as c,b as l,T as u,A as d,bw as h,f4 as f,r as p,V as m,f5 as g,f6 as v,f7 as y,f8 as b,f9 as w,fa as C,c4 as x,bq as k,bu as R,bt as T,fb as S,br as M,bs as D,fc as _,fd as E,bp as P,fe as O,ff as N,fg as j,cx as q,fh as L,fi as A,fj as I,fk as B,bn as F,cn as W,bv as H,fl as K,fm as U,fn as V,bT as $,dH as z,fo as J,fp as Q,bB as G,fq as X,fr as Z,fs as Y,ft as ee,dg as te,bW as ne,fu as re,fv as oe,bo as ie,ah as se,Y as ae,fw as ce,a0 as le,L as ue,b9 as de,B as he,H as fe,t as pe,eS as me,aF as ge,dI as ve,dJ as ye,a4 as be,dL as we,dM as Ce,dN as xe,dO as ke,C as Re,fx as Te,fy as Se,dR as Me,fz as De,dP as _e,fA as Ee,dQ as Pe,aV as Oe,az as Ne,dK as je,aI as qe,aG as Le,aH as Ae,fB as Ie,fC as Be,aJ as Fe,bF as We,cI as He,bI as Ke}from"./index-DsqxS_Ng.js";
/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=n("PowerOff",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Ve=n("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),$e=a("animate-spin",{variants:{centered:{true:"m-auto"},size:{small:"size-4",medium:"size-12",large:"size-20",xlarge:"size-20"}},defaultVariants:{size:"medium"}}),ze=r.forwardRef((({className:e,children:t,centered:n,size:r,...a},c)=>o.jsx(i,{ref:c,className:s($e({centered:n,size:r}),e),strokeWidth:1.5,...a})));
/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */ze.displayName="Spinner";const Je=a("flex items-center justify-center m-0 leading-none font-medium border border-foreground/10 shadow-xsSolid hover:cursor-pointer active:shadow-none dark:border-border text-sm",{variants:{color:{gray:"mo-button gray",white:"mo-button white",green:"mo-button green",red:"mo-button red",yellow:"mo-button yellow","hint-green":"mo-button hint-green",disabled:"mo-button disabled"},shape:{rectangle:"rounded",circle:"rounded-full"},size:{small:"",medium:""}},compoundVariants:[{size:"small",shape:"circle",class:"h-[24px] w-[24px] px-[5.5px] py-[5.5px]"},{size:"medium",shape:"circle",class:"px-2 py-2"},{size:"small",shape:"rectangle",class:"px-1 py-1 h-[24px] w-[24px]"},{size:"medium",shape:"rectangle",class:"px-3 py-2"}],defaultVariants:{color:"gray",size:"medium",shape:"rectangle"}}),Qe=a("font-mono w-full flex-1 inline-flex items-center justify-center rounded px-2.5 text-foreground/60 h-[36px] hover:shadow-md hover:cursor-pointer focus:shadow-md focus:outline-none text-[hsl(0, 0%, 43.5%)] bg-transparent hover:bg-background focus:bg-background"),Ge=r.forwardRef((({color:e,shape:t,size:n,className:r,...i},s)=>o.jsx("button",{ref:s,className:c(Je({color:e,shape:t,size:n}),r),...i,children:i.children})));Ge.displayName="Button";r.forwardRef((({className:e,...t},n)=>o.jsx("input",{ref:n,className:c(Qe(),e),...t}))).displayName="Input";const Xe=e=>{const{openConfirm:t,closeModal:n}=l();return o.jsx(u,{content:"Shutdown",children:o.jsx(Ge,{"aria-label":"Shutdown","data-testid":"shutdown-button",shape:"circle",size:"small",color:"red",className:"h-[27px] w-[27px]",onClick:r=>{r.stopPropagation(),t({title:"Shutdown",description:e.description,variant:"destructive",confirmAction:o.jsx(d,{onClick:e=>{f(),setTimeout((()=>{window.close()}),200),n()},"aria-label":"Confirm Shutdown",children:"Shutdown"})})},children:o.jsx(h,{strokeWidth:1})})})};function Ze(e,t){const{delayMs:n,whenVisible:r}=t,o=p.useRef();return p.useEffect((()=>{o.current=e}),[e]),p.useEffect((()=>{if(null===n)return;const e=setInterval((()=>{var e;r&&"visible"!==document.visibilityState||null==(e=o.current)||e.call(o)}),n);return()=>clearInterval(e)}),[n,r]),m(document,"visibilitychange",(()=>{var e;"visible"===document.visibilityState&&r&&(null==(e=o.current)||e.call(o))})),null}function Ye(e){var t=e.Pos;function n(e,t,n){if(t.line===n.line&&t.ch>=n.ch-1){var r=e.getLine(t.line).charCodeAt(t.ch);55296<=r&&r<=55551&&(n.ch+=1)}return{start:t,end:n}}var r=[{keys:"<Left>",type:"keyToKey",toKeys:"h"},{keys:"<Right>",type:"keyToKey",toKeys:"l"},{keys:"<Up>",type:"keyToKey",toKeys:"k"},{keys:"<Down>",type:"keyToKey",toKeys:"j"},{keys:"g<Up>",type:"keyToKey",toKeys:"gk"},{keys:"g<Down>",type:"keyToKey",toKeys:"gj"},{keys:"<Space>",type:"keyToKey",toKeys:"l"},{keys:"<BS>",type:"keyToKey",toKeys:"h"},{keys:"<Del>",type:"keyToKey",toKeys:"x"},{keys:"<C-Space>",type:"keyToKey",toKeys:"W"},{keys:"<C-BS>",type:"keyToKey",toKeys:"B"},{keys:"<S-Space>",type:"keyToKey",toKeys:"w"},{keys:"<S-BS>",type:"keyToKey",toKeys:"b"},{keys:"<C-n>",type:"keyToKey",toKeys:"j"},{keys:"<C-p>",type:"keyToKey",toKeys:"k"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"<C-Esc>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-Esc>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"s",type:"keyToKey",toKeys:"cl",context:"normal"},{keys:"s",type:"keyToKey",toKeys:"c",context:"visual"},{keys:"S",type:"keyToKey",toKeys:"cc",context:"normal"},{keys:"S",type:"keyToKey",toKeys:"VdO",context:"visual"},{keys:"<Home>",type:"keyToKey",toKeys:"0"},{keys:"<End>",type:"keyToKey",toKeys:"$"},{keys:"<PageUp>",type:"keyToKey",toKeys:"<C-b>"},{keys:"<PageDown>",type:"keyToKey",toKeys:"<C-f>"},{keys:"<CR>",type:"keyToKey",toKeys:"j^",context:"normal"},{keys:"<Ins>",type:"keyToKey",toKeys:"i",context:"normal"},{keys:"<Ins>",type:"action",action:"toggleOverwrite",context:"insert"},{keys:"H",type:"motion",motion:"moveToTopLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"M",type:"motion",motion:"moveToMiddleLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"L",type:"motion",motion:"moveToBottomLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"h",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!1}},{keys:"l",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!0}},{keys:"j",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,linewise:!0}},{keys:"k",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,linewise:!0}},{keys:"gj",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!0}},{keys:"gk",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!1}},{keys:"w",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1}},{keys:"W",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1,bigWord:!0}},{keys:"e",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,inclusive:!0}},{keys:"E",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"b",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1}},{keys:"B",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1,bigWord:!0}},{keys:"ge",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,inclusive:!0}},{keys:"gE",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"{",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!1,toJumplist:!0}},{keys:"}",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!0,toJumplist:!0}},{keys:"(",type:"motion",motion:"moveBySentence",motionArgs:{forward:!1}},{keys:")",type:"motion",motion:"moveBySentence",motionArgs:{forward:!0}},{keys:"<C-f>",type:"motion",motion:"moveByPage",motionArgs:{forward:!0}},{keys:"<C-b>",type:"motion",motion:"moveByPage",motionArgs:{forward:!1}},{keys:"<C-d>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!0,explicitRepeat:!0}},{keys:"<C-u>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!1,explicitRepeat:!0}},{keys:"gg",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"G",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!0,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"g$",type:"motion",motion:"moveToEndOfDisplayLine"},{keys:"g^",type:"motion",motion:"moveToStartOfDisplayLine"},{keys:"g0",type:"motion",motion:"moveToStartOfDisplayLine"},{keys:"0",type:"motion",motion:"moveToStartOfLine"},{keys:"^",type:"motion",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"+",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0}},{keys:"-",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,toFirstChar:!0}},{keys:"_",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0,repeatOffset:-1}},{keys:"$",type:"motion",motion:"moveToEol",motionArgs:{inclusive:!0}},{keys:"%",type:"motion",motion:"moveToMatchedSymbol",motionArgs:{inclusive:!0,toJumplist:!0}},{keys:"f<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"F<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!1}},{keys:"t<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"T<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!1}},{keys:";",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!0}},{keys:",",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!1}},{keys:"'<register>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0,linewise:!0}},{keys:"`<register>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0}},{keys:"]`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0}},{keys:"[`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1}},{keys:"]'",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0,linewise:!0}},{keys:"['",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1,linewise:!0}},{keys:"]p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0,matchIndent:!0}},{keys:"[p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0,matchIndent:!0}},{keys:"]<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!0,toJumplist:!0}},{keys:"[<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!1,toJumplist:!0}},{keys:"|",type:"motion",motion:"moveToColumn"},{keys:"o",type:"motion",motion:"moveToOtherHighlightedEnd",context:"visual"},{keys:"O",type:"motion",motion:"moveToOtherHighlightedEnd",motionArgs:{sameLine:!0},context:"visual"},{keys:"d",type:"operator",operator:"delete"},{keys:"y",type:"operator",operator:"yank"},{keys:"c",type:"operator",operator:"change"},{keys:"=",type:"operator",operator:"indentAuto"},{keys:">",type:"operator",operator:"indent",operatorArgs:{indentRight:!0}},{keys:"<",type:"operator",operator:"indent",operatorArgs:{indentRight:!1}},{keys:"g~",type:"operator",operator:"changeCase"},{keys:"gu",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},isEdit:!0},{keys:"gU",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},isEdit:!0},{keys:"n",type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:!0}},{keys:"N",type:"motion",motion:"findNext",motionArgs:{forward:!1,toJumplist:!0}},{keys:"gn",type:"motion",motion:"findAndSelectNextInclusive",motionArgs:{forward:!0}},{keys:"gN",type:"motion",motion:"findAndSelectNextInclusive",motionArgs:{forward:!1}},{keys:"gq",type:"operator",operator:"hardWrap"},{keys:"gw",type:"operator",operator:"hardWrap",operatorArgs:{keepCursor:!0}},{keys:"x",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!0},operatorMotionArgs:{visualLine:!1}},{keys:"X",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!1},operatorMotionArgs:{visualLine:!0}},{keys:"D",type:"operatorMotion",operator:"delete",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"D",type:"operator",operator:"delete",operatorArgs:{linewise:!0},context:"visual"},{keys:"Y",type:"operatorMotion",operator:"yank",motion:"expandToLine",motionArgs:{linewise:!0},context:"normal"},{keys:"Y",type:"operator",operator:"yank",operatorArgs:{linewise:!0},context:"visual"},{keys:"C",type:"operatorMotion",operator:"change",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"C",type:"operator",operator:"change",operatorArgs:{linewise:!0},context:"visual"},{keys:"~",type:"operatorMotion",operator:"changeCase",motion:"moveByCharacters",motionArgs:{forward:!0},operatorArgs:{shouldMoveCursor:!0},context:"normal"},{keys:"~",type:"operator",operator:"changeCase",context:"visual"},{keys:"<C-u>",type:"operatorMotion",operator:"delete",motion:"moveToStartOfLine",context:"insert"},{keys:"<C-w>",type:"operatorMotion",operator:"delete",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1},context:"insert"},{keys:"<C-w>",type:"idle",context:"normal"},{keys:"<C-i>",type:"action",action:"jumpListWalk",actionArgs:{forward:!0}},{keys:"<C-o>",type:"action",action:"jumpListWalk",actionArgs:{forward:!1}},{keys:"<C-e>",type:"action",action:"scroll",actionArgs:{forward:!0,linewise:!0}},{keys:"<C-y>",type:"action",action:"scroll",actionArgs:{forward:!1,linewise:!0}},{keys:"a",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"charAfter"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"eol"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"endOfSelectedArea"},context:"visual"},{keys:"i",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"inplace"},context:"normal"},{keys:"gi",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"lastEdit"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"firstNonBlank"},context:"normal"},{keys:"gI",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"bol"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"startOfSelectedArea"},context:"visual"},{keys:"o",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!0},context:"normal"},{keys:"O",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!1},context:"normal"},{keys:"v",type:"action",action:"toggleVisualMode"},{keys:"V",type:"action",action:"toggleVisualMode",actionArgs:{linewise:!0}},{keys:"<C-v>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"<C-q>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"gv",type:"action",action:"reselectLastSelection"},{keys:"J",type:"action",action:"joinLines",isEdit:!0},{keys:"gJ",type:"action",action:"joinLines",actionArgs:{keepSpaces:!0},isEdit:!0},{keys:"p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0}},{keys:"P",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0}},{keys:"r<character>",type:"action",action:"replace",isEdit:!0},{keys:"@<register>",type:"action",action:"replayMacro"},{keys:"q<register>",type:"action",action:"enterMacroRecordMode"},{keys:"R",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{replace:!0},context:"normal"},{keys:"R",type:"operator",operator:"change",operatorArgs:{linewise:!0,fullLine:!0},context:"visual",exitVisualBlock:!0},{keys:"u",type:"action",action:"undo",context:"normal"},{keys:"u",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},context:"visual",isEdit:!0},{keys:"U",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},context:"visual",isEdit:!0},{keys:"<C-r>",type:"action",action:"redo"},{keys:"m<register>",type:"action",action:"setMark"},{keys:'"<register>',type:"action",action:"setRegister"},{keys:"<C-r><register>",type:"action",action:"insertRegister",context:"insert",isEdit:!0},{keys:"<C-o>",type:"action",action:"oneNormalCommand",context:"insert"},{keys:"zz",type:"action",action:"scrollToCursor",actionArgs:{position:"center"}},{keys:"z.",type:"action",action:"scrollToCursor",actionArgs:{position:"center"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"zt",type:"action",action:"scrollToCursor",actionArgs:{position:"top"}},{keys:"z<CR>",type:"action",action:"scrollToCursor",actionArgs:{position:"top"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"zb",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"}},{keys:"z-",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:".",type:"action",action:"repeatLastEdit"},{keys:"<C-a>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!0,backtrack:!1}},{keys:"<C-x>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!1,backtrack:!1}},{keys:"<C-t>",type:"action",action:"indent",actionArgs:{indentRight:!0},context:"insert"},{keys:"<C-d>",type:"action",action:"indent",actionArgs:{indentRight:!1},context:"insert"},{keys:"a<register>",type:"motion",motion:"textObjectManipulation"},{keys:"i<register>",type:"motion",motion:"textObjectManipulation",motionArgs:{textObjectInner:!0}},{keys:"/",type:"search",searchArgs:{forward:!0,querySrc:"prompt",toJumplist:!0}},{keys:"?",type:"search",searchArgs:{forward:!1,querySrc:"prompt",toJumplist:!0}},{keys:"*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"g*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:"g#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:":",type:"ex"}],o=r.length,i=[{name:"colorscheme",shortName:"colo"},{name:"map"},{name:"imap",shortName:"im"},{name:"nmap",shortName:"nm"},{name:"vmap",shortName:"vm"},{name:"omap",shortName:"om"},{name:"noremap",shortName:"no"},{name:"nnoremap",shortName:"nn"},{name:"vnoremap",shortName:"vn"},{name:"inoremap",shortName:"ino"},{name:"onoremap",shortName:"ono"},{name:"unmap"},{name:"mapclear",shortName:"mapc"},{name:"nmapclear",shortName:"nmapc"},{name:"vmapclear",shortName:"vmapc"},{name:"imapclear",shortName:"imapc"},{name:"omapclear",shortName:"omapc"},{name:"write",shortName:"w"},{name:"undo",shortName:"u"},{name:"redo",shortName:"red"},{name:"set",shortName:"se"},{name:"setlocal",shortName:"setl"},{name:"setglobal",shortName:"setg"},{name:"sort",shortName:"sor"},{name:"substitute",shortName:"s",possiblyAsync:!0},{name:"startinsert",shortName:"start"},{name:"nohlsearch",shortName:"noh"},{name:"yank",shortName:"y"},{name:"delmarks",shortName:"delm"},{name:"registers",shortName:"reg",excludeFromCommandHistory:!0},{name:"vglobal",shortName:"v"},{name:"delete",shortName:"d"},{name:"join",shortName:"j"},{name:"normal",shortName:"norm"},{name:"global",shortName:"g"}],s=K("");function a(e){var t=e.state.vim;return t.onPasteFn||(t.onPasteFn=function(){t.insertMode||(e.setCursor(re(e.getCursor(),0,1)),ee.enterInsertMode(e,{},t))}),t.onPasteFn}var c,l=/[\d]/,u=[e.isWordChar,function(t){return t&&!e.isWordChar(t)&&!/\s/.test(t)}],d=[function(e){return/\S/.test(e)}],h=["<",">"],f=["-",'"',".",":","_","/","+"],p=/^\w$/;try{c=new RegExp("^[\\p{Lu}]$","u")}catch(pt){c=/^[A-Z]$/}function m(e,t){return t>=e.firstLine()&&t<=e.lastLine()}function g(e){return/^[a-z]$/.test(e)}function v(e){return c.test(e)}function y(e){return/^\s*$/.test(e)}function b(e){return-1!=".?!".indexOf(e)}function w(e,t){for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1}var C={};function x(e,t,n,r,o){if(void 0===t&&!o)throw Error("defaultValue is required unless callback is provided");if(n||(n="string"),C[e]={type:n,defaultValue:t,callback:o},r)for(var i=0;i<r.length;i++)C[r[i]]=C[e];t&&k(e,t)}function k(e,t,n,r){var o=C[e],i=(r=r||{}).scope;if(!o)return new Error("Unknown option: "+e);if("boolean"==o.type){if(t&&!0!==t)return new Error("Invalid argument: "+e+"="+t);!1!==t&&(t=!0)}o.callback?("local"!==i&&o.callback(t,void 0),"global"!==i&&n&&o.callback(t,n)):("local"!==i&&(o.value="boolean"==o.type?!!t:t),"global"!==i&&n&&(n.state.vim.options[e]={value:t}))}function R(e,t,n){var r=C[e],o=(n=n||{}).scope;if(!r)return new Error("Unknown option: "+e);if(r.callback){let e=t&&r.callback(void 0,t);return"global"!==o&&void 0!==e?e:"local"!==o?r.callback():void 0}return("global"!==o&&t&&t.state.vim.options[e]||"local"!==o&&r||{}).value}x("filetype",void 0,"string",["ft"],(function(e,t){if(void 0!==t){if(void 0===e){let e=t.getOption("mode");return"null"==e?"":e}{let n=""==e?"null":e;t.setOption("mode",n)}}})),x("textwidth",80,"number",["tw"],(function(e,t){if(void 0!==t){if(void 0===e)return t.getOption("textwidth");var n=Math.round(e);n>1&&t.setOption("textwidth",n)}}));var T,S,M=function(){var e=100,t=-1,n=0,r=0,o=new Array(e);function i(i,s){(t+=s)>n?t=n:t<r&&(t=r);var a=o[(e+t)%e];if(a&&!a.find()){var c,l=s>0?1:-1,u=i.getCursor();do{if((a=o[(e+(t+=l))%e])&&(c=a.find())&&!ae(u,c))break}while(t<n&&t>r)}return a}return{cachedCursor:void 0,add:function(i,s,a){var c=o[t%e];function l(n){var r=++t%e,s=o[r];s&&s.clear(),o[r]=i.setBookmark(n)}if(c){var u=c.find();u&&!ae(u,s)&&l(s)}else l(s);l(a),n=t,(r=t-e+1)<0&&(r=0)},find:function(e,n){var r=t,o=i(e,n);return t=r,o&&o.find()},move:i}},D=function(e){return e?{changes:e.changes,expectCursorActivityForChange:e.expectCursorActivityForChange}:{changes:[],expectCursorActivityForChange:!1}};class _{constructor(){this.latestRegister=void 0,this.isPlaying=!1,this.isRecording=!1,this.replaySearchQueries=[],this.onRecordingDone=void 0,this.lastInsertModeChanges=D()}exitMacroRecordMode(){var e=T.macroModeState;e.onRecordingDone&&e.onRecordingDone(),e.onRecordingDone=void 0,e.isRecording=!1}enterMacroRecordMode(e,t){var n=T.registerController.getRegister(t);if(n){if(n.clear(),this.latestRegister=t,e.openDialog){var r=He("span",{class:"cm-vim-message"},"recording @"+t);this.onRecordingDone=e.openDialog(r,null,{bottom:!0})}this.isRecording=!0}}}function E(e){return e.state.vim||(e.state.vim={inputState:new U,lastEditInputState:void 0,lastEditActionCommand:void 0,lastHPos:-1,lastHSPos:-1,lastMotion:null,marks:{},insertMode:!1,insertModeReturn:!1,insertModeRepeat:void 0,visualMode:!1,visualLine:!1,visualBlock:!1,lastSelection:null,lastPastedText:null,sel:{},options:{},expectLiteralNext:!1}),e.state.vim}function P(){for(var e in T={searchQuery:null,searchIsReversed:!1,lastSubstituteReplacePart:void 0,jumpList:M(),macroModeState:new _,lastCharacterSearch:{increment:0,forward:!0,selectedCharacter:""},registerController:new J({}),searchHistoryController:new Q,exCommandHistoryController:new Q},C){var t=C[e];t.value=t.defaultValue}}var O,N={enterVimMode:function(t){t.setOption("disableInput",!0),t.setOption("showCursorWhenSelecting",!1),e.signal(t,"vim-mode-change",{mode:"normal"}),t.on("cursorActivity",st),E(t),e.on(t.getInputField(),"paste",a(t))},leaveVimMode:function(t){t.setOption("disableInput",!1),t.off("cursorActivity",st),e.off(t.getInputField(),"paste",a(t)),t.state.vim=null,$e&&clearTimeout($e)},buildKeyMap:function(){},getRegisterController:function(){return T.registerController},resetVimGlobalState_:P,getVimGlobalState_:function(){return T},maybeInitVimState_:E,suppressErrorLogging:!1,InsertModeKey:ct,map:function(e,t,n){tt.map(e,t,n)},unmap:function(e,t){return tt.unmap(e,t)},noremap:function(e,t,n){tt.map(e,t,n,!0)},mapclear:function(e){var t=r.length,n=o,i=r.slice(0,t-n);if(r=r.slice(t-n),e)for(var s=i.length-1;s>=0;s--){var a=i[s];if(e!==a.context)if(a.context)this._mapCommand(a);else{var c=["normal","insert","visual"];for(var l in c)if(c[l]!==e){var u=Object.assign({},a);u.context=c[l],this._mapCommand(u)}}}},langmap:H,vimKeyFromEvent:W,setOption:k,getOption:R,defineOption:x,defineEx:function(e,t,n){if(t){if(0!==e.indexOf(t))throw new Error('(Vim.defineEx) "'+t+'" is not a prefix of "'+e+'", command not registered')}else t=e;et[e]=n,tt.commandMap_[t]={name:e,shortName:t,type:"api"}},handleKey:function(e,t,n){var r=this.findKey(e,t,n);if("function"==typeof r)return r()},multiSelectHandleKey:function(e,t,n){var r=E(e),o=e,i=!1,s=(r=N.maybeInitVimState_(o)).visualBlock||r.wasInVisualBlock,a=o.isInMultiSelectMode();r.wasInVisualBlock&&!a?r.wasInVisualBlock=!1:a&&r.visualBlock&&(r.wasInVisualBlock=!0);if("<Esc>"!=t||r.insertMode||r.visualMode||!a||"<Esc>"!=r.status)if(s||!a||o.inVirtualSelectionMode)i=N.handleKey(o,t,n);else{var c=ft(r),l=r.inputState.changeQueueList||[];o.operation((function(){var e;o.curOp&&(o.curOp.isVimOp=!0);var s=0;o.forEachSelection((function(){o.state.vim.inputState.changeQueue=l[s];var e=o.getCursor("head"),r=o.getCursor("anchor"),a=ce(e,r)?0:-1,u=ce(e,r)?-1:0;e=re(e,0,a),r=re(r,0,u),o.state.vim.sel.head=e,o.state.vim.sel.anchor=r,i=N.handleKey(o,t,n),o.virtualSelection&&(l[s]=o.state.vim.inputState.changeQueue,o.state.vim=ft(c)),s++})),(null==(e=o.curOp)?void 0:e.cursorActivity)&&!i&&(o.curOp.cursorActivity=!1),o.state.vim=r,r.inputState.changeQueueList=l,r.inputState.changeQueue=null}),!0)}else V(o);!i||r.visualMode||r.insert||r.visualMode==o.somethingSelected()||at(o,r);return i},findKey:function(e,t,n){var o,i=E(e),s=e;function a(){var e=T.macroModeState;if(e.isRecording){if("q"==t)return e.exitMacroRecordMode(),V(s),!0;"mapping"!=n&&function(e,t){if(e.isPlaying)return;var n=e.latestRegister,r=T.registerController.getRegister(n);r&&r.pushText(t)}(e,t)}}function c(){if("<Esc>"==t){if(i.visualMode)we(s);else{if(!i.insertMode)return;nt(s)}return V(s),!0}}return!1===(o=i.insertMode?function(){if(c())return!0;i.inputState.keyBuffer.push(t);var e=i.inputState.keyBuffer.join(""),n=1==t.length,o=G.matchCommand(e,r,i.inputState,"insert"),a=i.inputState.changeQueue;if("none"==o.type)return V(s),!1;if("partial"==o.type){if(o.expectLiteralNext&&(i.expectLiteralNext=!0),S&&window.clearTimeout(S),S=n&&window.setTimeout((function(){i.insertMode&&i.inputState.keyBuffer.length&&V(s)}),R("insertModeEscKeysTimeout")),n){var l=s.listSelections();a&&a.removed.length==l.length||(a=i.inputState.changeQueue=new $),a.inserted+=t;for(var u=0;u<l.length;u++){var d=le(l[u].anchor,l[u].head),h=ue(l[u].anchor,l[u].head),f=s.getRange(d,s.state.overwrite?re(h,0,1):h);a.removed[u]=(a.removed[u]||"")+f}}return!n}if(i.expectLiteralNext=!1,S&&window.clearTimeout(S),o.command&&a){for(l=s.listSelections(),u=0;u<l.length;u++){var p=l[u].head;s.replaceRange(a.removed[u]||"",re(p,0,-a.inserted.length),p,"+input")}T.macroModeState.lastInsertModeChanges.changes.pop()}return o.command||V(s),o.command}():function(){if(a()||c())return!0;i.inputState.keyBuffer.push(t);var e=i.inputState.keyBuffer.join("");if(/^[1-9]\d*$/.test(e))return!0;var n=/^(\d*)(.*)$/.exec(e);if(!n)return V(s),!1;var o=i.visualMode?"visual":"normal",l=n[2]||n[1];i.inputState.operatorShortcut&&i.inputState.operatorShortcut.slice(-1)==l&&(l=i.inputState.operatorShortcut);var u=G.matchCommand(l,r,i.inputState,o);return"none"==u.type?(V(s),!1):"partial"==u.type?(u.expectLiteralNext&&(i.expectLiteralNext=!0),!0):"clear"==u.type?(V(s),!0):(i.expectLiteralNext=!1,i.inputState.keyBuffer.length=0,(n=/^(\d*)(.*)$/.exec(e))&&n[1]&&"0"!=n[1]&&i.inputState.pushRepeatDigit(n[1]),u.command)}())?i.insertMode||1!==t.length?void 0:function(){return!0}:!0===o?function(){return!0}:function(){return s.operation((function(){s.curOp.isVimOp=!0;try{"keyToKey"==o.type?A(s,o.toKeys,o):G.processCommand(s,i,o)}catch(e){throw s.state.vim=void 0,E(s),N.suppressErrorLogging||console.log(e),e}return!0}))}},handleEx:function(e,t){tt.processCommand(e,t)},defineMotion:function(e,t){X[e]=t},defineAction:function(e,t){ee[e]=t},defineOperator:function(e,t){Y[e]=t},mapCommand:function(e,t,n,r,o){var i={keys:e,type:t};for(var s in i[t]=n,i[t+"Args"]=r,o)i[s]=o[s];rt(i)},_mapCommand:rt,defineRegister:function(e,t){var n=T.registerController.registers;if(!e||1!=e.length)throw Error("Register name must be 1 character");if(n[e])throw Error("Register already defined "+e);n[e]=t,f.push(e)},exitVisualMode:we,exitInsertMode:nt},j=[],q=!1;function L(e){if("<"==e[0]){var t=e.toLowerCase().slice(1,-1),n=t.split("-");if("lt"==(t=n.pop()||""))e="<";else if("space"==t)e=" ";else if("cr"==t)e="\n";else if(F[t]){var r=O.value,o={key:F[t],target:{value:r,selectionEnd:r.length,selectionStart:r.length}};return O.onKeyDown&&O.onKeyDown(o,O.value,s),void(O&&O.onKeyUp&&O.onKeyUp(o,O.value,s))}}if("\n"==e){var i=O;O=null,i.onClose&&i.onClose(i.value)}else O.value=(O.value||"")+e;function s(e){"string"==typeof e?O.value=e:O=null}}function A(e,t,n){var r=q;if(n){if(-1!=j.indexOf(n))return;j.push(n),q=0!=n.noremap}try{for(var o,i=E(e),s=/<(?:[CSMA]-)*\w+>|./gi;o=s.exec(t);){var a=o[0],c=i.insertMode;if(O)L(a);else if(!N.handleKey(e,a,"mapping")&&c&&i.insertMode){if("<"==a[0]){var l=a.toLowerCase().slice(1,-1),u=l.split("-");if("lt"==(l=u.pop()||""))a="<";else if("space"==l)a=" ";else if("cr"==l)a="\n";else{if(F.hasOwnProperty(l)){dt(e,a=F[l]);continue}a=a[0],s.lastIndex=o.index+1}}e.replaceSelection(a)}}}finally{if(j.pop(),q=!!j.length&&r,!j.length&&O){var d=O;O=null,Ue(e,d)}}}var I={Return:"CR",Backspace:"BS",Delete:"Del",Escape:"Esc",Insert:"Ins",ArrowLeft:"Left",ArrowRight:"Right",ArrowUp:"Up",ArrowDown:"Down",Enter:"CR"," ":"Space"},B={Shift:1,Alt:1,Command:1,Control:1,CapsLock:1,AltGraph:1,Dead:1,Unidentified:1},F={};function W(t,n){var r,o=t.key;if(!B[o]){o.length>1&&"n"==o[0]&&(o=o.replace("Numpad","")),o=I[o]||o;var i="";if(t.ctrlKey&&(i+="C-"),t.altKey&&(i+="A-"),t.metaKey&&(i+="M-"),e.isMac&&t.altKey&&!t.metaKey&&!t.ctrlKey&&(i=i.slice(2)),(i||o.length>1)&&t.shiftKey&&(i+="S-"),n&&!n.expectLiteralNext&&1==o.length)if(s.keymap&&o in s.keymap)0==s.remapCtrl&&i||(o=s.keymap[o]);else if(o.charCodeAt(0)>255){var a=(null==(r=t.code)?void 0:r.slice(-1))||"";t.shiftKey||(a=a.toLowerCase()),a&&(o=a)}return(i+=o).length>1&&(i="<"+i+">"),i}}function H(e,t){s.string!==e&&(s=K(e)),s.remapCtrl=t}function K(e){let t={};if(!e)return{keymap:t,string:""};function n(e){return e.split(/\\?(.)/).filter(Boolean)}return e.split(/((?:[^\\,]|\\.)+),/).map((e=>{if(!e)return;const r=e.split(/((?:[^\\;]|\\.)+);/);if(3==r.length){const e=n(r[1]),o=n(r[2]);if(e.length!==o.length)return;for(let n=0;n<e.length;++n)t[e[n]]=o[n]}else if(1==r.length){const r=n(e);if(r.length%2!=0)return;for(let e=0;e<r.length;e+=2)t[r[e]]=r[e+1]}})),{keymap:t,string:e}}"Left|Right|Up|Down|End|Home".split("|").concat(Object.keys(I)).forEach((function(e){F[(I[e]||"").toLowerCase()]=F[e.toLowerCase()]=e})),x("langmap",void 0,"string",["lmap"],(function(e,t){if(void 0===e)return s.string;H(e)}));class U{constructor(){this.prefixRepeat=[],this.motionRepeat=[],this.operator=null,this.operatorArgs=null,this.motion=null,this.motionArgs=null,this.keyBuffer=[],this.registerName=null,this.changeQueue=null}pushRepeatDigit(e){this.operator?this.motionRepeat=this.motionRepeat.concat(e):this.prefixRepeat=this.prefixRepeat.concat(e)}getRepeat(){var e=0;return(this.prefixRepeat.length>0||this.motionRepeat.length>0)&&(e=1,this.prefixRepeat.length>0&&(e*=parseInt(this.prefixRepeat.join(""),10)),this.motionRepeat.length>0&&(e*=parseInt(this.motionRepeat.join(""),10))),e}}function V(t,n){t.state.vim.inputState=new U,t.state.vim.expectLiteralNext=!1,e.signal(t,"vim-command-done",n)}function $(){this.removed=[],this.inserted=""}class z{constructor(e,t,n){this.clear(),this.keyBuffer=[e||""],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!!t,this.blockwise=!!n}setText(e,t,n){this.keyBuffer=[e||""],this.linewise=!!t,this.blockwise=!!n}pushText(e,t){t&&(this.linewise||this.keyBuffer.push("\n"),this.linewise=!0),this.keyBuffer.push(e)}pushInsertModeChanges(e){this.insertModeChanges.push(D(e))}pushSearchQuery(e){this.searchQueries.push(e)}clear(){this.keyBuffer=[],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!1}toString(){return this.keyBuffer.join("")}}class J{constructor(e){this.registers=e,this.unnamedRegister=e['"']=new z,e["."]=new z,e[":"]=new z,e["/"]=new z,e["+"]=new z}pushText(e,t,n,r,o){if("_"!==e){r&&"\n"!==n.charAt(n.length-1)&&(n+="\n");var i=this.isValidRegister(e)?this.getRegister(e):null;if(i){v(e)?i.pushText(n,r):i.setText(n,r,o),"+"===e&&navigator.clipboard.writeText(n),this.unnamedRegister.setText(i.toString(),r)}else{switch(t){case"yank":this.registers[0]=new z(n,r,o);break;case"delete":case"change":-1==n.indexOf("\n")?this.registers["-"]=new z(n,r):(this.shiftNumericRegisters_(),this.registers[1]=new z(n,r))}this.unnamedRegister.setText(n,r,o)}}}getRegister(e){return this.isValidRegister(e)?(e=e.toLowerCase(),this.registers[e]||(this.registers[e]=new z),this.registers[e]):this.unnamedRegister}isValidRegister(e){return e&&(w(e,f)||p.test(e))}shiftNumericRegisters_(){for(var e=9;e>=2;e--)this.registers[e]=this.getRegister(""+(e-1))}}class Q{constructor(){this.historyBuffer=[],this.iterator=0,this.initialPrefix=null}nextMatch(e,t){var n=this.historyBuffer,r=t?-1:1;null===this.initialPrefix&&(this.initialPrefix=e);for(var o=this.iterator+r;t?o>=0:o<n.length;o+=r)for(var i=n[o],s=0;s<=i.length;s++)if(this.initialPrefix==i.substring(0,s))return this.iterator=o,i;return o>=n.length?(this.iterator=n.length,this.initialPrefix):o<0?e:void 0}pushInput(e){var t=this.historyBuffer.indexOf(e);t>-1&&this.historyBuffer.splice(t,1),e.length&&this.historyBuffer.push(e)}reset(){this.initialPrefix=null,this.iterator=this.historyBuffer.length}}var G={matchCommand:function(e,t,n,r){var i,s=function(e,t,n,r){r.operator&&(n="operatorPending");for(var i,s=[],a=[],c=q?t.length-o:0;c<t.length;c++){var l=t[c];"insert"==n&&"insert"!=l.context||l.context&&l.context!=n||r.operator&&"action"==l.type||!(i=oe(e,l.keys))||("partial"==i&&s.push(l),"full"==i&&a.push(l))}return{partial:s.length&&s,full:a.length&&a}}(e,t,r,n);if(!s.full&&!s.partial)return{type:"none"};if(!s.full&&s.partial)return{type:"partial",expectLiteralNext:1==s.partial.length&&"<character>"==s.partial[0].keys.slice(-11)};for(var a=0;a<s.full.length;a++){var c=s.full[a];i||(i=c)}if("<character>"==i.keys.slice(-11)||"<register>"==i.keys.slice(-10)){var l=function(e){var t=/^.*(<[^>]+>)$/.exec(e),n=t?t[1]:e.slice(-1);if(n.length>1)switch(n){case"<CR>":case"<S-CR>":n="\n";break;case"<Space>":case"<S-Space>":n=" ";break;default:n=""}return n}(e);if(!l||l.length>1)return{type:"clear"};n.selectedCharacter=l}return{type:"full",command:i}},processCommand:function(e,t,n){switch(t.inputState.repeatOverride=n.repeatOverride,n.type){case"motion":this.processMotion(e,t,n);break;case"operator":this.processOperator(e,t,n);break;case"operatorMotion":this.processOperatorMotion(e,t,n);break;case"action":this.processAction(e,t,n);break;case"search":this.processSearch(e,t,n);break;case"ex":case"keyToEx":this.processEx(e,t,n)}},processMotion:function(e,t,n){t.inputState.motion=n.motion,t.inputState.motionArgs=ne(n.motionArgs),this.evalInput(e,t)},processOperator:function(e,t,n){var r=t.inputState;if(r.operator){if(r.operator==n.operator)return r.motion="expandToLine",r.motionArgs={linewise:!0,repeat:1},void this.evalInput(e,t);V(e)}r.operator=n.operator,r.operatorArgs=ne(n.operatorArgs),n.keys.length>1&&(r.operatorShortcut=n.keys),n.exitVisualBlock&&(t.visualBlock=!1,ye(e)),t.visualMode&&this.evalInput(e,t)},processOperatorMotion:function(e,t,n){var r=t.visualMode,o=ne(n.operatorMotionArgs);o&&r&&o.visualLine&&(t.visualLine=!0),this.processOperator(e,t,n),r||this.processMotion(e,t,n)},processAction:function(e,t,n){var r=t.inputState,o=r.getRepeat(),i=!!o,s=ne(n.actionArgs)||{repeat:1};r.selectedCharacter&&(s.selectedCharacter=r.selectedCharacter),n.operator&&this.processOperator(e,t,n),n.motion&&this.processMotion(e,t,n),(n.motion||n.operator)&&this.evalInput(e,t),s.repeat=o||1,s.repeatIsExplicit=i,s.registerName=r.registerName,V(e),t.lastMotion=null,n.isEdit&&this.recordLastEdit(t,r,n),ee[n.action](e,s,t)},processSearch:function(t,n,r){if(t.getSearchCursor){var o=r.searchArgs.forward,i=r.searchArgs.wholeWordOnly;Le(t).setReversed(!o);var s=o?"/":"?",a=Le(t).getQuery(),c=t.getScrollInfo();switch(r.searchArgs.querySrc){case"prompt":var l=T.macroModeState;if(l.isPlaying){h(l.replaySearchQueries.shift(),!0,!1)}else Ue(t,{onClose:function(e){t.scrollTo(c.left,c.top),h(e,!0,!0);var n=T.macroModeState;n.isRecording&&function(e,t){if(!e.isPlaying){var n=e.latestRegister,r=T.registerController.getRegister(n);r&&r.pushSearchQuery&&r.pushSearchQuery(t)}}(n,e)},prefix:s,desc:"(JavaScript regexp)",onKeyUp:function(e,n,r){var i,s,a,l=W(e);"<Up>"==l||"<Down>"==l?(i="<Up>"==l,s=e.target?e.target.selectionEnd:0,r(n=T.searchHistoryController.nextMatch(n,i)||""),s&&e.target&&(e.target.selectionEnd=e.target.selectionStart=Math.min(s,e.target.value.length))):l&&"<Left>"!=l&&"<Right>"!=l&&T.searchHistoryController.reset();try{a=Ve(t,n,!0,!0)}catch(u){}a?t.scrollIntoView(Je(t,!o,a),30):(Qe(t),t.scrollTo(c.left,c.top))},onKeyDown:function(n,r,o){var i=W(n);"<Esc>"==i||"<C-c>"==i||"<C-[>"==i||"<BS>"==i&&""==r?(T.searchHistoryController.pushInput(r),T.searchHistoryController.reset(),Ve(t,a),Qe(t),t.scrollTo(c.left,c.top),e.e_stop(n),V(t),o(),t.focus()):"<Up>"==i||"<Down>"==i?e.e_stop(n):"<C-u>"==i&&(e.e_stop(n),o(""))}});break;case"wordUnderCursor":var u=xe(t,{noSymbol:!0}),d=!0;if(u||(u=xe(t,{noSymbol:!1}),d=!1),!u)return Ke(t,"No word under cursor"),void V(t);let n=t.getLine(u.start.line).substring(u.start.ch,u.end.ch);n=d&&i?"\\b"+n+"\\b":n.replace(/([.?*+$\[\]\/\\(){}|\-])/g,"\\$1"),T.jumpList.cachedCursor=t.getCursor(),t.setCursor(u.start),h(n,!0,!1)}}function h(e,o,i){T.searchHistoryController.pushInput(e),T.searchHistoryController.reset();try{Ve(t,e,o,i)}catch(s){return Ke(t,"Invalid regex: "+e),void V(t)}G.processMotion(t,n,{keys:"",type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:r.searchArgs.toJumplist}})}},processEx:function(t,n,r){function o(e){T.exCommandHistoryController.pushInput(e),T.exCommandHistoryController.reset(),tt.processCommand(t,e),t.state.vim&&V(t)}function i(n,r,o){var i,s,a=W(n);("<Esc>"==a||"<C-c>"==a||"<C-[>"==a||"<BS>"==a&&""==r)&&(T.exCommandHistoryController.pushInput(r),T.exCommandHistoryController.reset(),e.e_stop(n),V(t),o(),t.focus()),"<Up>"==a||"<Down>"==a?(e.e_stop(n),i="<Up>"==a,s=n.target?n.target.selectionEnd:0,o(r=T.exCommandHistoryController.nextMatch(r,i)||""),s&&n.target&&(n.target.selectionEnd=n.target.selectionStart=Math.min(s,n.target.value.length))):"<C-u>"==a?(e.e_stop(n),o("")):a&&"<Left>"!=a&&"<Right>"!=a&&T.exCommandHistoryController.reset()}"keyToEx"==r.type?tt.processCommand(t,r.exArgs.input):n.visualMode?Ue(t,{onClose:o,prefix:":",value:"'<,'>",onKeyDown:i,selectValueOnOpen:!1}):Ue(t,{onClose:o,prefix:":",onKeyDown:i})},evalInput:function(e,r){var o,i,s,a=r.inputState,c=a.motion,l=a.motionArgs||{repeat:1},u=a.operator,d=a.operatorArgs||{},h=a.registerName,f=r.sel,p=se(r.visualMode?te(e,f.head):e.getCursor("head")),m=se(r.visualMode?te(e,f.anchor):e.getCursor("anchor")),g=se(p),v=se(m);if(u&&this.recordLastEdit(r,a),(s=void 0!==a.repeatOverride?a.repeatOverride:a.getRepeat())>0&&l.explicitRepeat?l.repeatIsExplicit=!0:(l.noRepeat||!l.explicitRepeat&&0===s)&&(s=1,l.repeatIsExplicit=!1),a.selectedCharacter&&(l.selectedCharacter=d.selectedCharacter=a.selectedCharacter),l.repeat=s,V(e),c){var b=X[c](e,p,l,r,a);if(r.lastMotion=X[c],!b)return;if(l.toJumplist){var w=T.jumpList,C=w.cachedCursor;C?(ke(e,C,b),delete w.cachedCursor):ke(e,p,b)}b instanceof Array?(i=b[0],o=b[1]):o=b,o||(o=se(p)),r.visualMode?(r.visualBlock&&o.ch===1/0||(o=te(e,o,g)),i&&(i=te(e,i)),i=i||v,f.anchor=i,f.head=o,ye(e),Ee(e,r,"<",ce(i,o)?i:o),Ee(e,r,">",ce(i,o)?o:i)):u||(o=te(e,o,g),e.setCursor(o.line,o.ch))}if(u){if(d.lastSel){i=v;var x=d.lastSel,k=Math.abs(x.head.line-x.anchor.line),R=Math.abs(x.head.ch-x.anchor.ch);o=x.visualLine?new t(v.line+k,v.ch):x.visualBlock?new t(v.line+k,v.ch+R):x.head.line==x.anchor.line?new t(v.line,v.ch+R):new t(v.line+k,v.ch),r.visualMode=!0,r.visualLine=x.visualLine,r.visualBlock=x.visualBlock,f=r.sel={anchor:i,head:o},ye(e)}else r.visualMode&&(d.lastSel={anchor:se(f.anchor),head:se(f.head),visualBlock:r.visualBlock,visualLine:r.visualLine});var S,M,D,_,E;if(r.visualMode){if(S=le(f.head,f.anchor),M=ue(f.head,f.anchor),D=r.visualLine||d.linewise,_=r.visualBlock?"block":D?"line":"char",E=be(e,{anchor:(j=n(e,S,M)).start,head:j.end},_),D){var P=E.ranges;if("block"==_)for(var O=0;O<P.length;O++)P[O].head.ch=he(e,P[O].head.line);else"line"==_&&(P[0].head=new t(P[0].head.line+1,0))}}else{if(S=se(i||v),ce(M=se(o||g),S)){var N=S;S=M,M=N}(D=l.linewise||d.linewise)?function(e,t,n){t.ch=0,n.ch=0,n.line++}(0,S,M):l.forward&&function(e,t,n){var r=e.getRange(t,n);if(/\n\s*$/.test(r)){var o=r.split("\n");o.pop();for(var i=o.pop();o.length>0&&i&&y(i);i=o.pop())n.line--,n.ch=0;i?(n.line--,n.ch=he(e,n.line)):n.ch=0}}(e,S,M),_="char";var j,q=!l.inclusive||D;E=be(e,{anchor:(j=n(e,S,M)).start,head:j.end},_,q)}e.setSelections(E.ranges,E.primary),r.lastMotion=null,d.repeat=s,d.registerName=h,d.linewise=D;var L=Y[u](e,d,E.ranges,v,o);r.visualMode&&we(e,null!=L),L&&e.setCursor(L)}},recordLastEdit:function(e,t,n){var r=T.macroModeState;r.isPlaying||(e.lastEditInputState=t,e.lastEditActionCommand=n,r.lastInsertModeChanges.changes=[],r.lastInsertModeChanges.expectCursorActivityForChange=!1,r.lastInsertModeChanges.visualBlock=e.visualBlock?e.sel.head.line-e.sel.anchor.line:0)}},X={moveToTopLine:function(e,n,r){var o=Xe(e).top+r.repeat-1;return new t(o,Ce(e.getLine(o)))},moveToMiddleLine:function(e){var n=Xe(e),r=Math.floor(.5*(n.top+n.bottom));return new t(r,Ce(e.getLine(r)))},moveToBottomLine:function(e,n,r){var o=Xe(e).bottom-r.repeat+1;return new t(o,Ce(e.getLine(o)))},expandToLine:function(e,n,r){return new t(n.line+r.repeat-1,1/0)},findNext:function(e,t,n){var r=Le(e),o=r.getQuery();if(o){var i=!n.forward;return i=r.isReversed()?!i:i,ze(e,o),Je(e,i,o,n.repeat)}},findAndSelectNextInclusive:function(n,r,o,i,s){var a=Le(n),c=a.getQuery();if(c){var l=!o.forward,u=function(e,n,r,o,i){return e.operation((function(){void 0===o&&(o=1);var s=e.getCursor(),a=e.getSearchCursor(r,s),c=a.find(!n);!i.visualMode&&c&&ae(a.from(),s)&&a.find(!n);for(var l=0;l<o;l++)if(!(c=a.find(n))&&!(a=e.getSearchCursor(r,n?new t(e.lastLine()):new t(e.firstLine(),0))).find(n))return;return[a.from(),a.to()]}))}(n,l=a.isReversed()?!l:l,c,o.repeat,i);if(u){if(s.operator)return u;var d=u[0],h=new t(u[1].line,u[1].ch-1);if(i.visualMode){(i.visualLine||i.visualBlock)&&(i.visualLine=!1,i.visualBlock=!1,e.signal(n,"vim-mode-change",{mode:"visual",subMode:""}));var f=i.sel.anchor;if(f)return a.isReversed()?o.forward?[f,d]:[f,h]:o.forward?[f,h]:[f,d]}else i.visualMode=!0,i.visualLine=!1,i.visualBlock=!1,e.signal(n,"vim-mode-change",{mode:"visual",subMode:""});return l?[h,d]:[d,h]}}},goToMark:function(e,t,n,r){var o=Ze(e,r,n.selectedCharacter||"");return o?n.linewise?{line:o.line,ch:Ce(e.getLine(o.line))}:o:null},moveToOtherHighlightedEnd:function(e,n,r,o){if(o.visualBlock&&r.sameLine){var i=o.sel;return[te(e,new t(i.anchor.line,i.head.ch)),te(e,new t(i.head.line,i.anchor.ch))]}return[o.sel.head,o.sel.anchor]},jumpToMark:function(e,n,r,o){for(var i=n,s=0;s<r.repeat;s++){var a=i;for(var c in o.marks)if(g(c)){var l=o.marks[c].find();if(!((r.forward?ce(l,a):ce(a,l))||r.linewise&&l.line==a.line)){var u=ae(a,i),d=r.forward?de(a,l,i):de(i,l,a);(u||d)&&(i=l)}}}return r.linewise&&(i=new t(i.line,Ce(e.getLine(i.line)))),i},moveByCharacters:function(e,n,r){var o=n,i=r.repeat,s=r.forward?o.ch+i:o.ch-i;return new t(o.line,s)},moveByLines:function(e,n,r,o){var i=n,s=i.ch;switch(o.lastMotion){case this.moveByLines:case this.moveByDisplayLines:case this.moveByScroll:case this.moveToColumn:case this.moveToEol:s=o.lastHPos;break;default:o.lastHPos=s}var a=r.repeat+(r.repeatOffset||0),c=r.forward?i.line+a:i.line-a,l=e.firstLine(),u=e.lastLine(),d=e.findPosV(i,r.forward?a:-a,"line",o.lastHSPos);return(r.forward?d.line>c:d.line<c)&&(c=d.line,s=d.ch),c<l&&i.line==l?this.moveToStartOfLine(e,n,r,o):c>u&&i.line==u?De(e,n,r,o,!0):(r.toFirstChar&&(s=Ce(e.getLine(c)),o.lastHPos=s),o.lastHSPos=e.charCoords(new t(c,s),"div").left,new t(c,s))},moveByDisplayLines:function(e,n,r,o){var i=n;switch(o.lastMotion){case this.moveByDisplayLines:case this.moveByScroll:case this.moveByLines:case this.moveToColumn:case this.moveToEol:break;default:o.lastHSPos=e.charCoords(i,"div").left}var s=r.repeat,a=e.findPosV(i,r.forward?s:-s,"line",o.lastHSPos);if(a.hitSide)if(r.forward){var c={top:e.charCoords(a,"div").top+8,left:o.lastHSPos};a=e.coordsChar(c,"div")}else{var l=e.charCoords(new t(e.firstLine(),0),"div");l.left=o.lastHSPos,a=e.coordsChar(l,"div")}return o.lastHPos=a.ch,a},moveByPage:function(e,t,n){var r=t,o=n.repeat;return e.findPosV(r,n.forward?o:-o,"page")},moveByParagraph:function(e,t,n){var r=n.forward?1:-1;return Oe(e,t,n.repeat,r).start},moveBySentence:function(e,n,r){var o=r.forward?1:-1;return function(e,n,r,o){function i(e,t){if(t.pos+t.dir<0||t.pos+t.dir>=t.line.length){if(t.ln+=t.dir,!m(e,t.ln))return t.line=null,t.ln=null,void(t.pos=null);t.line=e.getLine(t.ln),t.pos=t.dir>0?0:t.line.length-1}else t.pos+=t.dir}function s(e,t,n,r){var o=""===(l=e.getLine(t)),s={line:l,ln:t,pos:n,dir:r},a={ln:s.ln,pos:s.pos},c=""===s.line;for(i(e,s);null!==s.line;){if(a.ln=s.ln,a.pos=s.pos,""===s.line&&!c)return{ln:s.ln,pos:s.pos};if(o&&""!==s.line&&!y(s.line[s.pos]))return{ln:s.ln,pos:s.pos};!b(s.line[s.pos])||o||s.pos!==s.line.length-1&&!y(s.line[s.pos+1])||(o=!0),i(e,s)}var l=e.getLine(a.ln);a.pos=0;for(var u=l.length-1;u>=0;--u)if(!y(l[u])){a.pos=u;break}return a}function a(e,t,n,r){var o={line:c=e.getLine(t),ln:t,pos:n,dir:r},s={ln:o.ln,pos:null},a=""===o.line;for(i(e,o);null!==o.line;){if(""===o.line&&!a)return null!==s.pos?s:{ln:o.ln,pos:o.pos};if(b(o.line[o.pos])&&null!==s.pos&&(o.ln!==s.ln||o.pos+1!==s.pos))return s;""===o.line||y(o.line[o.pos])||(a=!1,s={ln:o.ln,pos:o.pos}),i(e,o)}var c=e.getLine(s.ln);s.pos=0;for(var l=0;l<c.length;++l)if(!y(c[l])){s.pos=l;break}return s}var c={ln:n.line,pos:n.ch};for(;r>0;)c=o<0?a(e,c.ln,c.pos,o):s(e,c.ln,c.pos,o),r--;return new t(c.ln,c.pos)}(e,n,r.repeat,o)},moveByScroll:function(e,t,n,r){var o,i=e.getScrollInfo(),s=n.repeat;s||(s=i.clientHeight/(2*e.defaultTextHeight()));var a=e.charCoords(t,"local");if(n.repeat=s,!(o=X.moveByDisplayLines(e,t,n,r)))return null;var c=e.charCoords(o,"local");return e.scrollTo(null,i.top+c.top-a.top),o},moveByWords:function(e,n,r){return function(e,n,r,o,i,s){var a=se(n),c=[];(o&&!i||!o&&i)&&r++;for(var l=!(o&&i),u=0;u<r;u++){var d=Me(e,n,o,s,l);if(!d){var h=he(e,e.lastLine());c.push(o?{line:e.lastLine(),from:h,to:h}:{line:0,from:0,to:0});break}c.push(d),n=new t(d.line,o?d.to-1:d.from)}var f=c.length!=r,p=c[0],m=c.pop();return o&&!i?(f||p.from==a.ch&&p.line==a.line||(m=c.pop()),m&&new t(m.line,m.from)):o&&i?m&&new t(m.line,m.to-1):!o&&i?(f||p.to==a.ch&&p.line==a.line||(m=c.pop()),m&&new t(m.line,m.to)):m&&new t(m.line,m.from)}(e,n,r.repeat,!!r.forward,!!r.wordEnd,!!r.bigWord)},moveTillCharacter:function(e,t,n){var r=_e(e,n.repeat,n.forward,n.selectedCharacter,t),o=n.forward?-1:1;return Re(o,n),r?(r.ch+=o,r):null},moveToCharacter:function(e,t,n){var r=n.repeat;return Re(0,n),_e(e,r,n.forward,n.selectedCharacter,t)||t},moveToSymbol:function(e,n,r){var o=r.repeat;return r.selectedCharacter&&function(e,n,r,o){var i=se(e.getCursor()),s=r?1:-1,a=r?e.lineCount():-1,c=i.ch,l=i.line,u=e.getLine(l),d={lineText:u,nextCh:u.charAt(c),lastCh:null,index:c,symb:o,reverseSymb:(r?{")":"(","}":"{"}:{"(":")","{":"}"})[o],forward:r,depth:0,curMoveThrough:!1},h=Te[o];if(!h)return i;var f=Se[h].init,p=Se[h].isComplete;f&&f(d);for(;l!==a&&n;){if(d.index+=s,d.nextCh=d.lineText.charAt(d.index),!d.nextCh){if(l+=s,d.lineText=e.getLine(l)||"",s>0)d.index=0;else{var m=d.lineText.length;d.index=m>0?m-1:0}d.nextCh=d.lineText.charAt(d.index)}p(d)&&(i.line=l,i.ch=d.index,n--)}if(d.nextCh||d.curMoveThrough)return new t(l,d.index);return i}(e,o,r.forward,r.selectedCharacter)||n},moveToColumn:function(e,n,r,o){var i=r.repeat;return o.lastHPos=i-1,o.lastHSPos=e.charCoords(n,"div").left,function(e,n){var r=e.getCursor().line;return te(e,new t(r,n-1))}(e,i)},moveToEol:function(e,t,n,r){return De(e,t,n,r,!1)},moveToFirstNonWhiteSpaceCharacter:function(e,n){var r=n;return new t(r.line,Ce(e.getLine(r.line)))},moveToMatchedSymbol:function(e,n){for(var r,o=n,i=o.line,s=o.ch,a=e.getLine(i);s<a.length;s++)if((r=a.charAt(s))&&-1!="()[]{}".indexOf(r)){var c=e.getTokenTypeAt(new t(i,s+1));if("string"!==c&&"comment"!==c)break}if(s<a.length){var l="<"===r||">"===r?/[(){}[\]<>]/:/[(){}[\]]/;return e.findMatchingBracket(new t(i,s),{bracketRegex:l}).to}return o},moveToStartOfLine:function(e,n){return new t(n.line,0)},moveToLineOrEdgeOfDocument:function(e,n,r){var o=r.forward?e.lastLine():e.firstLine();return r.repeatIsExplicit&&(o=r.repeat-e.getOption("firstLineNumber")),new t(o,Ce(e.getLine(o)))},moveToStartOfDisplayLine:function(e){return e.execCommand("goLineLeft"),e.getCursor()},moveToEndOfDisplayLine:function(e){e.execCommand("goLineRight");var t=e.getCursor();return"before"==t.sticky&&t.ch--,t},textObjectManipulation:function(n,r,o,i){var s=o.selectedCharacter||"";"b"==s?s="(":"B"==s&&(s="{");var a,c,l=!o.textObjectInner;if({"(":")",")":"(","{":"}","}":"{","[":"]","]":"[","<":">",">":"<"}[s]){if(c=!0,!(a=je(n,r,s,l))){var u=n.getSearchCursor(new RegExp("\\"+s,"g"),r);u.find()&&(a=je(n,u.from(),s,l))}}else if({"'":!0,'"':!0,"`":!0}[s])c=!0,a=function(e,n,r,o){var i,s,a,c,l=se(n),u=e.getLine(l.line),d=u.split(""),h=d.indexOf(r);if(l.ch<h)l.ch=h;else if(h<l.ch&&d[l.ch]==r){var f=/string/.test(e.getTokenTypeAt(re(n,0,1))),p=/string/.test(e.getTokenTypeAt(n));f&&!p||(s=l.ch,--l.ch)}if(d[l.ch]!=r||s)for(a=l.ch;a>-1&&!i;a--)d[a]==r&&(i=a+1);else i=l.ch+1;if(i&&!s)for(a=i,c=d.length;a<c&&!s;a++)d[a]==r&&(s=a);if(!i||!s)return{start:l,end:l};o&&(--i,++s);return{start:new t(l.line,i),end:new t(l.line,s)}}(n,r,s,l);else if("W"===s||"w"===s)for(var d=o.repeat||1;d-- >0;){var h=xe(n,{inclusive:l,innerWord:!l,bigWord:"W"===s,noSymbol:"W"===s,multiline:!0},a&&a.end);h&&(a||(a=h),a.end=h.end)}else if("p"===s)if(a=Oe(n,r,o.repeat,0,l),o.linewise=!0,i.visualMode)i.visualLine||(i.visualLine=!0);else{var f=i.inputState.operatorArgs;f&&(f.linewise=!0),a.end.line--}else if("t"===s)a=function(t,n,r){var o=n;if(!e.findMatchingTag||!e.findEnclosingTag)return{start:o,end:o};var i=e.findMatchingTag(t,n)||e.findEnclosingTag(t,n);if(!i||!i.open||!i.close)return{start:o,end:o};if(r)return{start:i.open.from,end:i.close.to};return{start:i.open.to,end:i.close.from}}(n,r,l);else if("s"===s){var p=n.getLine(r.line);r.ch>0&&b(p[r.ch])&&(r.ch-=1);var m=Ne(n,r,o.repeat,1,l),g=Ne(n,r,o.repeat,-1,l);y(n.getLine(g.line)[g.ch])&&y(n.getLine(m.line)[m.ch-1])&&(g={line:g.line,ch:g.ch+1}),a={start:g,end:m}}return a?n.state.vim.visualMode?function(e,n,r,o){var i,s=e.state.vim.sel,a=o?n:s.head,c=o?n:s.anchor;ce(r,n)&&(i=r,r=n,n=i);ce(a,c)?(a=le(n,a),c=ue(c,r)):(c=le(n,c),-1==(a=re(a=ue(a,r),0,-1)).ch&&a.line!=e.firstLine()&&(a=new t(a.line-1,he(e,a.line-1))));return[c,a]}(n,a.start,a.end,c):[a.start,a.end]:null},repeatLastCharacterSearch:function(e,t,n){var r=T.lastCharacterSearch,o=n.repeat,i=n.forward===r.forward,s=(r.increment?1:0)*(i?-1:1);e.moveH(-s,"char"),n.inclusive=!!i;var a=_e(e,o,i,r.selectedCharacter);return a?(a.ch+=s,a):(e.moveH(s,"char"),t)}};function Z(e,t){for(var n=[],r=0;r<t;r++)n.push(e);return n}var Y={change:function(e,n,r){var o,i,s=e.state.vim,a=r[0].anchor,c=r[0].head;if(s.visualMode)if(n.fullLine)c.ch=Number.MAX_VALUE,c.line--,e.setSelection(a,c),i=e.getSelection(),e.replaceSelection(""),o=a;else{i=e.getSelection();var l=Z("",r.length);e.replaceSelections(l),o=le(r[0].head,r[0].anchor)}else{i=e.getRange(a,c);var u=s.lastEditInputState;if("moveByWords"==(null==u?void 0:u.motion)&&!y(i)){var d=/\s+$/.exec(i);d&&u.motionArgs&&u.motionArgs.forward&&(c=re(c,0,-d[0].length),i=i.slice(0,-d[0].length))}n.linewise&&(a=new t(a.line,Ce(e.getLine(a.line))),c.line>a.line&&(c=new t(c.line-1,Number.MAX_VALUE))),e.replaceRange("",a,c),o=a}T.registerController.pushText(n.registerName,"change",i,n.linewise,r.length>1),ee.enterInsertMode(e,{head:o},e.state.vim)},delete:function(e,n,r){var o,i,s=e.state.vim;if(s.visualBlock){i=e.getSelection();var a=Z("",r.length);e.replaceSelections(a),o=le(r[0].head,r[0].anchor)}else{var c=r[0].anchor,l=r[0].head;n.linewise&&l.line!=e.firstLine()&&c.line==e.lastLine()&&c.line==l.line-1&&(c.line==e.firstLine()?c.ch=0:c=new t(c.line-1,he(e,c.line-1))),i=e.getRange(c,l),e.replaceRange("",c,l),o=c,n.linewise&&(o=X.moveToFirstNonWhiteSpaceCharacter(e,c))}return T.registerController.pushText(n.registerName,"delete",i,n.linewise,s.visualBlock),te(e,o)},indent:function(e,t,n){var r=e.state.vim,o=r.visualMode?t.repeat||0:1;if(e.indentMore)for(var i=0;i<o;i++)t.indentRight?e.indentMore():e.indentLess();else{var s=n[0].anchor.line,a=r.visualBlock?n[n.length-1].anchor.line:n[0].head.line;t.linewise&&a--;for(var c=s;c<=a;c++)for(i=0;i<o;i++)e.indentLine(c,t.indentRight)}return X.moveToFirstNonWhiteSpaceCharacter(e,n[0].anchor)},indentAuto:function(e,t,n){return e.execCommand("indentAuto"),X.moveToFirstNonWhiteSpaceCharacter(e,n[0].anchor)},hardWrap:function(e,n,r,o){if(e.hardWrap){var i=r[0].anchor.line,s=r[0].head.line;n.linewise&&s--;var a=e.hardWrap({from:i,to:s});return a>i&&n.linewise&&a--,n.keepCursor?o:new t(a,0)}},changeCase:function(e,t,n,r,o){for(var i=e.getSelections(),s=[],a=t.toLower,c=0;c<i.length;c++){var l=i[c],u="";if(!0===a)u=l.toLowerCase();else if(!1===a)u=l.toUpperCase();else for(var d=0;d<l.length;d++){var h=l.charAt(d);u+=v(h)?h.toLowerCase():h.toUpperCase()}s.push(u)}return e.replaceSelections(s),t.shouldMoveCursor?o:!e.state.vim.visualMode&&t.linewise&&n[0].anchor.line+1==n[0].head.line?X.moveToFirstNonWhiteSpaceCharacter(e,r):t.linewise?r:le(n[0].anchor,n[0].head)},yank:function(e,t,n,r){var o=e.state.vim,i=e.getSelection(),s=o.visualMode?le(o.sel.anchor,o.sel.head,n[0].head,n[0].anchor):r;return T.registerController.pushText(t.registerName,"yank",i,t.linewise,o.visualBlock),s}};var ee={jumpListWalk:function(e,t,n){if(!n.visualMode){var r=t.repeat||1,o=t.forward,i=T.jumpList.move(e,o?r:-r),s=i?i.find():void 0;s=s||e.getCursor(),e.setCursor(s)}},scroll:function(e,t,n){if(!n.visualMode){var r=t.repeat||1,o=e.defaultTextHeight(),i=e.getScrollInfo().top,s=o*r,a=t.forward?i+s:i-s,c=se(e.getCursor()),l=e.charCoords(c,"local");if(t.forward)a>l.top?(c.line+=(a-l.top)/o,c.line=Math.ceil(c.line),e.setCursor(c),l=e.charCoords(c,"local"),e.scrollTo(null,l.top)):e.scrollTo(null,a);else{var u=a+e.getScrollInfo().clientHeight;u<l.bottom?(c.line-=(l.bottom-u)/o,c.line=Math.floor(c.line),e.setCursor(c),l=e.charCoords(c,"local"),e.scrollTo(null,l.bottom-e.getScrollInfo().clientHeight)):e.scrollTo(null,a)}}},scrollToCursor:function(e,n){var r=e.getCursor().line,o=e.charCoords(new t(r,0),"local"),i=e.getScrollInfo().clientHeight,s=o.top;switch(n.position){case"center":s=o.bottom-i/2;break;case"bottom":var a=new t(r,e.getLine(r).length-1);s=s-i+(e.charCoords(a,"local").bottom-s)}e.scrollTo(null,s)},replayMacro:function(e,t,n){var r=t.selectedCharacter||"",o=t.repeat||1,i=T.macroModeState;for("@"==r?r=i.latestRegister:i.latestRegister=r;o--;)ot(e,n,i,r)},enterMacroRecordMode:function(e,t){var n=T.macroModeState,r=t.selectedCharacter;T.registerController.isValidRegister(r)&&n.enterMacroRecordMode(e,r)},toggleOverwrite:function(t){t.state.overwrite?(t.toggleOverwrite(!1),t.setOption("keyMap","vim-insert"),e.signal(t,"vim-mode-change",{mode:"insert"})):(t.toggleOverwrite(!0),t.setOption("keyMap","vim-replace"),e.signal(t,"vim-mode-change",{mode:"replace"}))},enterInsertMode:function(r,o,i){if(!r.getOption("readOnly")){i.insertMode=!0,i.insertModeRepeat=o&&o.repeat||1;var s=o?o.insertAt:null,a=i.sel,c=o.head||r.getCursor("head"),l=r.listSelections().length;if("eol"==s)c=new t(c.line,he(r,c.line));else if("bol"==s)c=new t(c.line,0);else if("charAfter"==s){c=n(r,c,re(c,0,1)).end}else if("firstNonBlank"==s){c=n(r,c,X.moveToFirstNonWhiteSpaceCharacter(r,c)).end}else if("startOfSelectedArea"==s){if(!i.visualMode)return;i.visualBlock?(c=new t(Math.min(a.head.line,a.anchor.line),Math.min(a.head.ch,a.anchor.ch)),l=Math.abs(a.head.line-a.anchor.line)+1):c=a.head.line<a.anchor.line?a.head:new t(a.anchor.line,0)}else if("endOfSelectedArea"==s){if(!i.visualMode)return;i.visualBlock?(c=new t(Math.min(a.head.line,a.anchor.line),Math.max(a.head.ch,a.anchor.ch)+1),l=Math.abs(a.head.line-a.anchor.line)+1):c=a.head.line>=a.anchor.line?re(a.head,0,1):new t(a.anchor.line,0)}else if("inplace"==s){if(i.visualMode)return}else"lastEdit"==s&&(c=Ye(r)||c);r.setOption("disableInput",!1),o&&o.replace?(r.toggleOverwrite(!0),r.setOption("keyMap","vim-replace"),e.signal(r,"vim-mode-change",{mode:"replace"})):(r.toggleOverwrite(!1),r.setOption("keyMap","vim-insert"),e.signal(r,"vim-mode-change",{mode:"insert"})),T.macroModeState.isPlaying||(r.on("change",it),i.insertEnd&&i.insertEnd.clear(),i.insertEnd=r.setBookmark(c,{insertLeft:!0}),e.on(r.getInputField(),"keydown",lt)),i.visualMode&&we(r),ge(r,c,l)}},toggleVisualMode:function(r,o,i){var s,a=o.repeat,c=r.getCursor();if(i.visualMode)i.visualLine!=!!o.linewise||i.visualBlock!=!!o.blockwise?(i.visualLine=!!o.linewise,i.visualBlock=!!o.blockwise,e.signal(r,"vim-mode-change",{mode:"visual",subMode:i.visualLine?"linewise":i.visualBlock?"blockwise":""}),ye(r)):we(r);else{i.visualMode=!0,i.visualLine=!!o.linewise,i.visualBlock=!!o.blockwise;var l=n(r,c,s=te(r,new t(c.line,c.ch+a-1)));i.sel={anchor:l.start,head:l.end},e.signal(r,"vim-mode-change",{mode:"visual",subMode:i.visualLine?"linewise":i.visualBlock?"blockwise":""}),ye(r),Ee(r,i,"<",le(c,s)),Ee(r,i,">",ue(c,s))}},reselectLastSelection:function(t,n,r){var o=r.lastSelection;if(r.visualMode&&ve(t,r),o){var i=o.anchorMark.find(),s=o.headMark.find();if(!i||!s)return;r.sel={anchor:i,head:s},r.visualMode=!0,r.visualLine=o.visualLine,r.visualBlock=o.visualBlock,ye(t),Ee(t,r,"<",le(i,s)),Ee(t,r,">",ue(i,s)),e.signal(t,"vim-mode-change",{mode:"visual",subMode:r.visualLine?"linewise":r.visualBlock?"blockwise":""})}},joinLines:function(e,n,r){var o,i;if(r.visualMode){if(o=e.getCursor("anchor"),ce(i=e.getCursor("head"),o)){var s=i;i=o,o=s}i.ch=he(e,i.line)-1}else{var a=Math.max(n.repeat,2);o=e.getCursor(),i=te(e,new t(o.line+a-1,1/0))}for(var c=0,l=o.line;l<i.line;l++){c=he(e,o.line);var u="",d=0;if(!n.keepSpaces){var h=e.getLine(o.line+1);-1==(d=h.search(/\S/))?d=h.length:u=" "}e.replaceRange(u,new t(o.line,c),new t(o.line+1,d))}var f=te(e,new t(o.line,c));r.visualMode&&we(e,!1),e.setCursor(f)},newLineAndEnterInsertMode:function(n,r,o){o.insertMode=!0;var i=se(n.getCursor());i.line!==n.firstLine()||r.after?(i.line=r.after?i.line:i.line-1,i.ch=he(n,i.line),n.setCursor(i),(e.commands.newlineAndIndentContinueComment||e.commands.newlineAndIndent)(n)):(n.replaceRange("\n",new t(n.firstLine(),0)),n.setCursor(n.firstLine(),0));this.enterInsertMode(n,{repeat:r.repeat},o)},paste:function(e,t,n){var r=T.registerController.getRegister(t.registerName);if("+"===t.registerName)navigator.clipboard.readText().then((o=>{this.continuePaste(e,t,n,o,r)}));else{var o=r.toString();this.continuePaste(e,t,n,o,r)}},continuePaste:function(e,n,r,o,i){var s=se(e.getCursor());if(o){if(n.matchIndent){var a=e.getOption("tabSize"),c=function(e){var t=e.split("\t").length-1,n=e.split(" ").length-1;return t*a+1*n},l=e.getLine(e.getCursor().line),u=c(l.match(/^\s*/)[0]),d=o.replace(/\n$/,""),h=o!==d,f=c(o.match(/^\s*/)[0]);o=d.replace(/^\s*/gm,(function(t){var n=u+(c(t)-f);if(n<0)return"";if(e.getOption("indentWithTabs")){var r=Math.floor(n/a);return Array(r+1).join("\t")}return Array(n+1).join(" ")}));o+=h?"\n":""}if(n.repeat>1)o=Array(n.repeat+1).join(o);var p,m=i.linewise,g=i.blockwise;if(g){o=o.split("\n"),m&&o.pop();for(var v=0;v<o.length;v++)o[v]=""==o[v]?" ":o[v];s.ch+=n.after?1:0,s.ch=Math.min(he(e,s.line),s.ch)}else m?r.visualMode?o=r.visualLine?o.slice(0,-1):"\n"+o.slice(0,o.length-1)+"\n":n.after?(o="\n"+o.slice(0,o.length-1),s.ch=he(e,s.line)):s.ch=0:s.ch+=n.after?1:0;if(r.visualMode){var y;r.lastPastedText=o;var b=function(e,n){var r=n.lastSelection,o=function(){var t=e.listSelections(),n=t[0],r=t[t.length-1];return[ce(n.anchor,n.head)?n.anchor:n.head,ce(r.anchor,r.head)?r.head:r.anchor]},i=function(){var n=e.getCursor(),o=e.getCursor(),i=r.visualBlock;if(i){var s=i.width,a=i.height;o=new t(n.line+a,n.ch+s);for(var c=[],l=n.line;l<o.line;l++){var u={anchor:new t(l,n.ch),head:new t(l,o.ch)};c.push(u)}e.setSelections(c)}else{var d=r.anchorMark.find(),h=r.headMark.find(),f=h.line-d.line,p=h.ch-d.ch;o={line:o.line+f,ch:f?o.ch:p+o.ch},r.visualLine&&(n=new t(n.line,0),o=new t(o.line,he(e,o.line))),e.setSelection(n,o)}return[n,o]};return n.visualMode?o():i()}(e,r),w=b[0],C=b[1],x=e.getSelection(),k=e.listSelections(),R=new Array(k.length).join("1").split("1");r.lastSelection&&(y=r.lastSelection.headMark.find()),T.registerController.unnamedRegister.setText(x),g?(e.replaceSelections(R),C=new t(w.line+o.length-1,w.ch),e.setCursor(w),me(e,C),e.replaceSelections(o),p=w):r.visualBlock?(e.replaceSelections(R),e.setCursor(w),e.replaceRange(o,w,w),p=w):(e.replaceRange(o,w,C),p=e.posFromIndex(e.indexFromPos(w)+o.length-1)),y&&(r.lastSelection.headMark=e.setBookmark(y)),m&&(p.ch=0)}else if(g){e.setCursor(s);for(v=0;v<o.length;v++){(S=s.line+v)>e.lastLine()&&e.replaceRange("\n",new t(S,0)),he(e,S)<s.ch&&pe(e,S,s.ch)}e.setCursor(s),me(e,new t(s.line+o.length-1,s.ch)),e.replaceSelections(o),p=s}else if(e.replaceRange(o,s),m){var S=n.after?s.line+1:s.line;p=new t(S,Ce(e.getLine(S)))}else p=se(s),/\n/.test(o)||(p.ch+=o.length-(n.after?1:0));r.visualMode&&we(e,!1),e.setCursor(p)}},undo:function(t,n){t.operation((function(){ie(t,e.commands.undo,n.repeat)(),t.setCursor(te(t,t.getCursor("start")))}))},redo:function(t,n){ie(t,e.commands.redo,n.repeat)()},setRegister:function(e,t,n){n.inputState.registerName=t.selectedCharacter},insertRegister:function(e,t,n){var r=t.selectedCharacter,o=T.registerController.getRegister(r),i=o&&o.toString();i&&e.replaceSelection(i)},oneNormalCommand:function(t,n,r){nt(t,!0),r.insertModeReturn=!0,e.on(t,"vim-command-done",(function n(){r.visualMode||(r.insertModeReturn&&(r.insertModeReturn=!1,r.insertMode||ee.enterInsertMode(t,{},r)),e.off(t,"vim-command-done",n))}))},setMark:function(e,t,n){var r=t.selectedCharacter;r&&Ee(e,n,r,e.getCursor())},replace:function(r,o,i){var s,a,c=o.selectedCharacter||"",l=r.getCursor(),u=r.listSelections();if(i.visualMode)l=r.getCursor("start"),a=r.getCursor("end");else{var d=r.getLine(l.line);(s=l.ch+o.repeat)>d.length&&(s=d.length),a=new t(l.line,s)}var h=n(r,l,a);if(l=h.start,a=h.end,"\n"==c)i.visualMode||r.replaceRange("",l,a),(e.commands.newlineAndIndentContinueComment||e.commands.newlineAndIndent)(r);else{var f=r.getRange(l,a);if(f=(f=f.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c)).replace(/[^\n]/g,c),i.visualBlock){var p=new Array(r.getOption("tabSize")+1).join(" "),m=(f=(f=r.getSelection()).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c)).replace(/\t/g,p).replace(/[^\n]/g,c).split("\n");r.replaceSelections(m)}else r.replaceRange(f,l,a);i.visualMode?(l=ce(u[0].anchor,u[0].head)?u[0].anchor:u[0].head,r.setCursor(l),we(r,!1)):r.setCursor(re(a,0,-1))}},incrementNumberToken:function(e,n){for(var r,o,i,s,a=e.getCursor(),c=e.getLine(a.line),l=/(-?)(?:(0x)([\da-f]+)|(0b|0|)(\d+))/gi;null!==(r=l.exec(c))&&(i=(o=r.index)+r[0].length,!(a.ch<i)););if((n.backtrack||!(i<=a.ch))&&r){var u=r[2]||r[4],d=r[3]||r[5],h=n.increase?1:-1,f={"0b":2,0:8,"":10,"0x":16}[u.toLowerCase()];s=(parseInt(r[1]+d,f)+h*n.repeat).toString(f);var p=u?new Array(d.length-s.length+1+r[1].length).join("0"):"";s="-"===s.charAt(0)?"-"+u+p+s.substr(1):u+p+s;var m=new t(a.line,o),g=new t(a.line,i);e.replaceRange(s,m,g),e.setCursor(new t(a.line,o+s.length-1))}},repeatLastEdit:function(e,t,n){var r=n.lastEditInputState;if(r){var o=t.repeat;o&&t.repeatIsExplicit?r.repeatOverride=o:o=r.repeatOverride||o,ut(e,n,o,!1)}},indent:function(e,t){e.indentLine(e.getCursor().line,t.indentRight)},exitInsertMode:function(e,t){nt(e)}};function te(e,n,r){var o=e.state.vim,i=o.insertMode||o.visualMode,s=Math.min(Math.max(e.firstLine(),n.line),e.lastLine()),a=e.getLine(s),c=a.length-1+Number(!!i),l=Math.min(Math.max(0,n.ch),c),u=a.charCodeAt(l);if(56320<=u&&u<=57343){var d=1;r&&r.line==s&&r.ch>l&&(d=-1),(l+=d)>c&&(l-=2)}return new t(s,l)}function ne(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function re(e,n,r){return"object"==typeof n&&(r=n.ch,n=n.line),new t(e.line+n,e.ch+r)}function oe(e,t){const n="<character>"==t.slice(-11),r="<register>"==t.slice(-10);if(n||r){var o=t.length-(n?11:10),i=e.slice(0,o),s=t.slice(0,o);return i==s&&e.length>o?"full":0==s.indexOf(i)&&"partial"}return e==t?"full":0==t.indexOf(e)&&"partial"}function ie(e,t,n){return function(){for(var r=0;r<n;r++)t(e)}}function se(e){return new t(e.line,e.ch)}function ae(e,t){return e.ch==t.ch&&e.line==t.line}function ce(e,t){return e.line<t.line||e.line==t.line&&e.ch<t.ch}function le(e,t){return arguments.length>2&&(t=le.apply(void 0,Array.prototype.slice.call(arguments,1))),ce(e,t)?e:t}function ue(e,t){return arguments.length>2&&(t=ue.apply(void 0,Array.prototype.slice.call(arguments,1))),ce(e,t)?t:e}function de(e,t,n){var r=ce(e,t),o=ce(t,n);return r&&o}function he(e,t){return e.getLine(t).length}function fe(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function pe(e,n,r){var o=he(e,n),i=new Array(r-o+1).join(" ");e.setCursor(new t(n,o)),e.replaceRange(i,e.getCursor())}function me(e,n){var r=[],o=e.listSelections(),i=se(e.clipPos(n)),s=!ae(n,i),a=function(e,t,n){for(var r=0;r<e.length;r++){var o="head"!=n&&ae(e[r].anchor,t),i="anchor"!=n&&ae(e[r].head,t);if(o||i)return r}return-1}(o,e.getCursor("head")),c=ae(o[a].head,o[a].anchor),l=o.length-1,u=l-a>a?l:0,d=o[u].anchor,h=Math.min(d.line,i.line),f=Math.max(d.line,i.line),p=d.ch,m=i.ch,g=o[u].head.ch-p,v=m-p;g>0&&v<=0?(p++,s||m--):g<0&&v>=0?(p--,c||m++):g<0&&-1==v&&(p--,m++);for(var y=h;y<=f;y++){var b={anchor:new t(y,p),head:new t(y,m)};r.push(b)}return e.setSelections(r),n.ch=m,d.ch=p,d}function ge(e,t,n){for(var r=[],o=0;o<n;o++){var i=re(t,o,0);r.push({anchor:i,head:i})}e.setSelections(r,0)}function ve(e,t){var n=t.sel.anchor,r=t.sel.head;t.lastPastedText&&(r=e.posFromIndex(e.indexFromPos(n)+t.lastPastedText.length),t.lastPastedText=null),t.lastSelection={anchorMark:e.setBookmark(n),headMark:e.setBookmark(r),anchor:se(n),head:se(r),visualMode:t.visualMode,visualLine:t.visualLine,visualBlock:t.visualBlock}}function ye(e,t,n){var r=e.state.vim;t=t||r.sel,n||(n=r.visualLine?"line":r.visualBlock?"block":"char");var o=be(e,t,n);e.setSelections(o.ranges,o.primary)}function be(e,n,r,o){var i=se(n.head),s=se(n.anchor);if("char"==r){var a=o||ce(n.head,n.anchor)?0:1,c=ce(n.head,n.anchor)?1:0;return i=re(n.head,0,a),{ranges:[{anchor:s=re(n.anchor,0,c),head:i}],primary:0}}if("line"==r){if(ce(n.head,n.anchor))i.ch=0,s.ch=he(e,s.line);else{s.ch=0;var l=e.lastLine();i.line>l&&(i.line=l),i.ch=he(e,i.line)}return{ranges:[{anchor:s,head:i}],primary:0}}if("block"==r){var u=Math.min(s.line,i.line),d=s.ch,h=Math.max(s.line,i.line),f=i.ch;d<f?f+=1:d+=1;for(var p=h-u+1,m=i.line==u?0:p-1,g=[],v=0;v<p;v++)g.push({anchor:new t(u+v,d),head:new t(u+v,f)});return{ranges:g,primary:m}}throw"never happens"}function we(t,n){var r=t.state.vim;!1!==n&&t.setCursor(te(t,r.sel.head)),ve(t,r),r.visualMode=!1,r.visualLine=!1,r.visualBlock=!1,r.insertMode||e.signal(t,"vim-mode-change",{mode:"normal"})}function Ce(e){if(!e)return 0;var t=e.search(/\S/);return-1==t?e.length:t}function xe(e,{inclusive:n,innerWord:r,bigWord:o,noSymbol:i,multiline:s},a){var c,l=a||function(e){var t=e.getCursor("head");return 1==e.getSelection().length&&(t=le(t,e.getCursor("anchor"))),t}(e),h=e.getLine(l.line),f=h,p=l.line,m=p,g=l.ch,v=i?u[0]:d[0];if(r&&/\s/.test(h.charAt(g)))v=function(e){return/\s/.test(e)};else{for(;!v(h.charAt(g));)if(++g>=h.length){if(!s)return null;g--,c=Me(e,l,!0,o,!0);break}o?v=d[0]:(v=u[0])(h.charAt(g))||(v=u[1])}for(var y=g,b=g;v(h.charAt(b))&&b>=0;)b--;if(b++,c)y=c.to,m=c.line,(f=e.getLine(m))||0!=y||y++;else for(;v(h.charAt(y))&&y<h.length;)y++;if(n){var w=y,C=l.ch<=b&&/\s/.test(h.charAt(l.ch));if(!C)for(;/\s/.test(f.charAt(y))&&y<f.length;)y++;if(w==y||C){for(var x=b;/\s/.test(h.charAt(b-1))&&b>0;)b--;b||C||(b=x)}}return{start:new t(p,b),end:new t(m,y)}}function ke(e,t,n){ae(t,n)||T.jumpList.add(e,t,n)}function Re(e,t){T.lastCharacterSearch.increment=e,T.lastCharacterSearch.forward=t.forward,T.lastCharacterSearch.selectedCharacter=t.selectedCharacter}var Te={"(":"bracket",")":"bracket","{":"bracket","}":"bracket","[":"section","]":"section","*":"comment","/":"comment",m:"method",M:"method","#":"preprocess"},Se={bracket:{isComplete:function(e){if(e.nextCh===e.symb){if(e.depth++,e.depth>=1)return!0}else e.nextCh===e.reverseSymb&&e.depth--;return!1}},section:{init:function(e){e.curMoveThrough=!0,e.symb=(e.forward?"]":"[")===e.symb?"{":"}"},isComplete:function(e){return 0===e.index&&e.nextCh===e.symb}},comment:{isComplete:function(e){var t="*"===e.lastCh&&"/"===e.nextCh;return e.lastCh=e.nextCh,t}},method:{init:function(e){e.symb="m"===e.symb?"{":"}",e.reverseSymb="{"===e.symb?"}":"{"},isComplete:function(e){return e.nextCh===e.symb}},preprocess:{init:function(e){e.index=0},isComplete:function(e){if("#"===e.nextCh){var t=e.lineText.match(/^#(\w+)/)[1];if("endif"===t){if(e.forward&&0===e.depth)return!0;e.depth++}else if("if"===t){if(!e.forward&&0===e.depth)return!0;e.depth--}if("else"===t&&0===e.depth)return!0}return!1}}};function Me(e,t,n,r,o){var i=t.line,s=t.ch,a=e.getLine(i),c=n?1:-1,l=r?d:u;if(o&&""==a){if(i+=c,a=e.getLine(i),!m(e,i))return null;s=n?0:a.length}for(;;){if(o&&""==a)return{from:0,to:0,line:i};for(var h=c>0?a.length:-1,f=h,p=h;s!=h;){for(var g=!1,v=0;v<l.length&&!g;++v)if(l[v](a.charAt(s))){for(f=s;s!=h&&l[v](a.charAt(s));)s+=c;if(g=f!=(p=s),f==t.ch&&i==t.line&&p==f+c)continue;return{from:Math.min(f,p+1),to:Math.max(f,p),line:i}}g||(s+=c)}if(!m(e,i+=c))return null;a=e.getLine(i),s=c>0?0:a.length}}function De(e,n,r,o,i){var s=new t(n.line+r.repeat-1,1/0),a=e.clipPos(s);return a.ch--,i||(o.lastHPos=1/0,o.lastHSPos=e.charCoords(a,"div").left),s}function _e(e,n,r,o,i){if(o){for(var s,a=i||e.getCursor(),c=a.ch,l=0;l<n;l++){if(-1==(s=Pe(c,e.getLine(a.line),o,r,!0)))return;c=s}return null!=s?new t(e.getCursor().line,s):void 0}}function Ee(e,t,n,r){(w(n,h)||p.test(n))&&(t.marks[n]&&t.marks[n].clear(),t.marks[n]=e.setBookmark(r))}function Pe(e,t,n,r,o){var i;return r?-1==(i=t.indexOf(n,e+1))||o||(i-=1):-1==(i=t.lastIndexOf(n,e-1))||o||(i+=1),i}function Oe(e,n,r,o,i){var s,a=n.line,c=e.firstLine(),l=e.lastLine(),u=a;function d(t){return!e.getLine(t)}function h(e,t,n){return n?d(e)!=d(e+t):!d(e)&&d(e+t)}if(o){for(;c<=u&&u<=l&&r>0;)h(u,o)&&r--,u+=o;return{start:new t(u,0),end:n}}var f=e.state.vim;if(f.visualLine&&h(a,1,!0)){var p=f.sel.anchor;h(p.line,-1,!0)&&(i&&p.line==a||(a+=1))}var m=d(a);for(u=a;u<=l&&r;u++)h(u,1,!0)&&(i&&d(u)==m||r--);for(s=new t(u,0),u>l&&!m?m=!0:i=!1,u=a;u>c&&(i&&d(u)!=m&&u!=a||!h(u,-1,!0));u--);return{start:new t(u,0),end:s}}function Ne(e,n,r,o,i){function s(e){e.pos+e.dir<0||e.pos+e.dir>=e.line.length?e.line=null:e.pos+=e.dir}function a(e,t,n,r){var o={line:e.getLine(t),ln:t,pos:n,dir:r};if(""===o.line)return{ln:o.ln,pos:o.pos};var a=o.pos;for(s(o);null!==o.line;){if(a=o.pos,b(o.line[o.pos])){if(i){for(s(o);null!==o.line&&y(o.line[o.pos]);)a=o.pos,s(o);return{ln:o.ln,pos:a+1}}return{ln:o.ln,pos:o.pos+1}}s(o)}return{ln:o.ln,pos:a+1}}function c(e,t,n,r){var o=e.getLine(t),a={line:o,ln:t,pos:n,dir:r};if(""===a.line)return{ln:a.ln,pos:a.pos};var c=a.pos;for(s(a);null!==a.line;){if(y(a.line[a.pos])||b(a.line[a.pos])){if(b(a.line[a.pos]))return i&&y(a.line[a.pos+1])?{ln:a.ln,pos:a.pos+1}:{ln:a.ln,pos:c}}else c=a.pos;s(a)}return a.line=o,i&&y(a.line[a.pos])?{ln:a.ln,pos:a.pos}:{ln:a.ln,pos:c}}for(var l={ln:n.line,pos:n.ch};r>0;)l=o<0?c(e,l.ln,l.pos,o):a(e,l.ln,l.pos,o),r--;return new t(l.ln,l.pos)}function je(e,n,r,o){var i=n,s={"(":/[()]/,")":/[()]/,"[":/[[\]]/,"]":/[[\]]/,"{":/[{}]/,"}":/[{}]/,"<":/[<>]/,">":/[<>]/}[r],a={"(":"(",")":"(","[":"[","]":"[","{":"{","}":"{","<":"<",">":"<"}[r],c=e.getLine(i.line).charAt(i.ch)===a?1:0,l=e.scanForBracket(new t(i.line,i.ch+c),-1,void 0,{bracketRegex:s}),u=e.scanForBracket(new t(i.line,i.ch+c),1,void 0,{bracketRegex:s});if(!l||!u)return null;var d=l.pos,h=u.pos;if(d.line==h.line&&d.ch>h.ch||d.line>h.line){var f=d;d=h,h=f}return o?h.ch+=1:d.ch+=1,{start:d,end:h}}x("pcre",!0,"boolean");class qe{getQuery(){return T.query}setQuery(e){T.query=e}getOverlay(){return this.searchOverlay}setOverlay(e){this.searchOverlay=e}isReversed(){return T.isReversed}setReversed(e){T.isReversed=e}getScrollbarAnnotate(){return this.annotate}setScrollbarAnnotate(e){this.annotate=e}}function Le(e){var t=e.state.vim;return t.searchState_||(t.searchState_=new qe)}function Ae(e,t){var n=Ie(e,t)||[];if(!n.length)return[];var r=[];if(0===n[0]){for(var o=0;o<n.length;o++)"number"==typeof n[o]&&r.push(e.substring(n[o]+1,n[o+1]));return r}}function Ie(e,t){t||(t="/");for(var n=!1,r=[],o=0;o<e.length;o++){var i=e.charAt(o);n||i!=t||r.push(o),n=!n&&"\\"==i}return r}var Be={"\\n":"\n","\\r":"\r","\\t":"\t"};var Fe={"\\/":"/","\\\\":"\\","\\n":"\n","\\r":"\r","\\t":"\t","\\&":"&"};function We(e,t,n){if(T.registerController.getRegister("/").setText(e),e instanceof RegExp)return e;var r,o,i=Ie(e,"/");i.length?(r=e.substring(0,i[0]),o=-1!=e.substring(i[0]).indexOf("i")):r=e;return r?(R("pcre")||(r=function(e){for(var t=!1,n=[],r=-1;r<e.length;r++){var o=e.charAt(r)||"",i=e.charAt(r+1)||"",s=i&&-1!="|(){".indexOf(i);t?("\\"===o&&s||n.push(o),t=!1):"\\"===o?(t=!0,i&&-1!="}".indexOf(i)&&(s=!0),s&&"\\"!==i||n.push(o)):(n.push(o),s&&"\\"!==i&&n.push("\\"))}return n.join("")}(r)),n&&(t=/^[^A-Z]*$/.test(r)),new RegExp(r,t||o?"im":"m")):null}function He(e){"string"==typeof e&&(e=document.createElement(e));for(var t,n=1;n<arguments.length;n++)if(t=arguments[n])if("object"!=typeof t&&(t=document.createTextNode(t)),t.nodeType)e.appendChild(t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&("$"===r[0]?e.style[r.slice(1)]=t[r]:e.setAttribute(r,t[r]));return e}function Ke(e,t){var n=He("div",{$color:"red",$whiteSpace:"pre",class:"cm-vim-message"},t);e.openNotification?e.openNotification(n,{bottom:!0,duration:5e3}):alert(n.innerText)}function Ue(e,t){if(j.length)return t.value||(t.value=""),void(O=t);var n,r,o=(n=t.prefix,r=t.desc,He("div",{$display:"flex"},He("span",{$fontFamily:"monospace",$whiteSpace:"pre",$flex:1},n,He("input",{type:"text",autocorrect:"off",autocapitalize:"off",spellcheck:"false",$width:"100%"})),r&&He("span",{$color:"#888"},r)));if(e.openDialog)e.openDialog(o,t.onClose,{onKeyDown:t.onKeyDown,onKeyUp:t.onKeyUp,bottom:!0,selectValueOnOpen:!1,value:t.value});else{var i="";"string"!=typeof t.prefix&&t.prefix&&(i+=t.prefix.textContent),t.desc&&(i+=" "+t.desc),t.onClose(prompt(i,""))}}function Ve(e,t,n,r){if(t){var o=Le(e),i=We(t,!!n,!!r);if(i)return ze(e,i),function(e,t){if(e instanceof RegExp&&t instanceof RegExp){for(var n=["global","multiline","ignoreCase","source"],r=0;r<n.length;r++){var o=n[r];if(e[o]!==t[o])return!1}return!0}return!1}(i,o.getQuery())||o.setQuery(i),i}}var $e=0;function ze(e,t){clearTimeout($e),Le(e).highlightTimeout=$e,$e=setTimeout((function(){if(e.state.vim){var n=Le(e);n.highlightTimeout=null;var r=n.getOverlay();r&&t==r.query||(r&&e.removeOverlay(r),r=function(e){if("^"==e.source.charAt(0))var t=!0;return{token:function(n){if(!t||n.sol()){var r=n.match(e,!1);if(r)return 0==r[0].length?(n.next(),"searching"):n.sol()||(n.backUp(1),e.exec(n.next()+r[0]))?(n.match(e),"searching"):(n.next(),null);for(;!n.eol()&&(n.next(),!n.match(e,!1)););}else n.skipToEnd()},query:e}}(t),e.addOverlay(r),e.showMatchesOnScrollbar&&(n.getScrollbarAnnotate()&&n.getScrollbarAnnotate().clear(),n.setScrollbarAnnotate(e.showMatchesOnScrollbar(t))),n.setOverlay(r))}}),50)}function Je(e,n,r,o){return e.operation((function(){void 0===o&&(o=1);for(var i=e.getCursor(),s=e.getSearchCursor(r,i),a=0;a<o;a++){var c=s.find(n);if(0==a&&c&&ae(s.from(),i)){var l=n?s.from():s.to();(c=s.find(n))&&!c[0]&&ae(s.from(),l)&&e.getLine(l.line).length==l.ch&&(c=s.find(n))}if(!c&&!(s=e.getSearchCursor(r,n?new t(e.lastLine()):new t(e.firstLine(),0))).find(n))return}return s.from()}))}function Qe(e){var t=Le(e);t.highlightTimeout&&(clearTimeout(t.highlightTimeout),t.highlightTimeout=null),e.removeOverlay(Le(e).getOverlay()),t.setOverlay(null),t.getScrollbarAnnotate()&&(t.getScrollbarAnnotate().clear(),t.setScrollbarAnnotate(null))}function Ge(e,t,n){return"number"!=typeof e&&(e=e.line),t instanceof Array?w(e,t):"number"==typeof n?e>=t&&e<=n:e==t}function Xe(e){var t=e.getScrollInfo(),n=e.coordsChar({left:0,top:6+t.top},"local"),r=t.clientHeight-10+t.top,o=e.coordsChar({left:0,top:r},"local");return{top:n.line,bottom:o.line}}function Ze(e,n,r){if("'"==r||"`"==r)return T.jumpList.find(e,-1)||new t(0,0);if("."==r)return Ye(e);var o=n.marks[r];return o&&o.find()}function Ye(e){if(e.getLastEditEnd)return e.getLastEditEnd();for(var t=e.doc.history.done,n=t.length;n--;)if(t[n].changes)return se(t[n].changes[0].to)}var et={colorscheme:function(e,t){!t.args||t.args.length<1?Ke(e,e.getOption("theme")):e.setOption("theme",t.args[0])},map:function(e,t,n,r){var o=t.args;!o||o.length<2?e&&Ke(e,"Invalid mapping: "+t.input):tt.map(o[0],o[1],n,r)},imap:function(e,t){this.map(e,t,"insert")},nmap:function(e,t){this.map(e,t,"normal")},vmap:function(e,t){this.map(e,t,"visual")},omap:function(e,t){this.map(e,t,"operatorPending")},noremap:function(e,t){this.map(e,t,void 0,!0)},inoremap:function(e,t){this.map(e,t,"insert",!0)},nnoremap:function(e,t){this.map(e,t,"normal",!0)},vnoremap:function(e,t){this.map(e,t,"visual",!0)},onoremap:function(e,t){this.map(e,t,"operatorPending",!0)},unmap:function(e,t,n){var r=t.args;(!r||r.length<1||!tt.unmap(r[0],n))&&e&&Ke(e,"No such mapping: "+t.input)},mapclear:function(e,t){N.mapclear()},imapclear:function(e,t){N.mapclear("insert")},nmapclear:function(e,t){N.mapclear("normal")},vmapclear:function(e,t){N.mapclear("visual")},omapclear:function(e,t){N.mapclear("operatorPending")},move:function(e,t){G.processCommand(e,e.state.vim,{keys:"",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0},repeatOverride:t.line+1})},set:function(e,t){var n=t.args,r=t.setCfg||{};if(!n||n.length<1)e&&Ke(e,"Invalid mapping: "+t.input);else{var o=n[0].split("="),i=o.shift()||"",s=o.length>0?o.join("="):void 0,a=!1,c=!1;if("?"==i.charAt(i.length-1)){if(s)throw Error("Trailing characters: "+t.argString);i=i.substring(0,i.length-1),a=!0}else"!"==i.charAt(i.length-1)&&(i=i.substring(0,i.length-1),c=!0);void 0===s&&"no"==i.substring(0,2)&&(i=i.substring(2),s=!1);var l=C[i]&&"boolean"==C[i].type;if(l&&(c?s=!R(i,e,r):null==s&&(s=!0)),!l&&void 0===s||a){var u=R(i,e,r);u instanceof Error?Ke(e,u.message):Ke(e,!0===u||!1===u?" "+(u?"":"no")+i:"  "+i+"="+u)}else{var d=k(i,s,e,r);d instanceof Error&&Ke(e,d.message)}}},setlocal:function(e,t){t.setCfg={scope:"local"},this.set(e,t)},setglobal:function(e,t){t.setCfg={scope:"global"},this.set(e,t)},registers:function(e,t){var n=t.args,r=T.registerController.registers,o="----------Registers----------\n\n";if(n)for(var i=n.join(""),s=0;s<i.length;s++){a=i.charAt(s);if(T.registerController.isValidRegister(a))o+='"'+a+"    "+(r[a]||new z).toString()+"\n"}else for(var a in r){var c=r[a].toString();c.length&&(o+='"'+a+"    "+c+"\n")}Ke(e,o)},sort:function(n,r){var o,i,s,a,c;var l=function(){if(r.argString){var t=new e.StringStream(r.argString);if(t.eat("!")&&(o=!0),t.eol())return;if(!t.eatSpace())return"Invalid arguments";var n=t.match(/([dinuox]+)?\s*(\/.+\/)?\s*/);if(!n||!t.eol())return"Invalid arguments";if(n[1]){i=-1!=n[1].indexOf("i"),s=-1!=n[1].indexOf("u");var l=-1!=n[1].indexOf("d")||-1!=n[1].indexOf("n"),u=-1!=n[1].indexOf("x"),d=-1!=n[1].indexOf("o");if(Number(l)+Number(u)+Number(d)>1)return"Invalid arguments";a=(l?"decimal":u&&"hex")||d&&"octal"}n[2]&&(c=new RegExp(n[2].substr(1,n[2].length-2),i?"i":""))}}();if(l)Ke(n,l+": "+r.argString);else{var u=r.line||n.firstLine(),d=r.lineEnd||r.line||n.lastLine();if(u!=d){var h=new t(u,0),f=new t(d,he(n,d)),p=n.getRange(h,f).split("\n"),m="decimal"==a?/(-?)([\d]+)/:"hex"==a?/(-?)(?:0x)?([0-9a-f]+)/i:"octal"==a?/([0-7]+)/:null,g="decimal"==a?10:"hex"==a?16:"octal"==a?8:void 0,v=[],y=[];if(a||c)for(var b=0;b<p.length;b++){var w=c?p[b].match(c):null;w&&""!=w[0]?v.push(w):m&&m.exec(p[b])?v.push(p[b]):y.push(p[b])}else y=p;if(v.sort(c?function(e,t){var n;return o&&(n=e,e=t,t=n),i&&(e[0]=e[0].toLowerCase(),t[0]=t[0].toLowerCase()),e[0]<t[0]?-1:1}:k),c)for(b=0;b<v.length;b++)v[b]=v[b].input;else a||y.sort(k);if(p=o?v.concat(y):y.concat(v),s){var C,x=p;p=[];for(b=0;b<x.length;b++)x[b]!=C&&p.push(x[b]),C=x[b]}n.replaceRange(p.join("\n"),h,f)}}function k(e,t){var n;o&&(n=e,e=t,t=n);i&&(e=e.toLowerCase(),t=t.toLowerCase());var r=m&&m.exec(e),s=m&&m.exec(t);return r&&s?parseInt((r[1]+r[2]).toLowerCase(),g)-parseInt((s[1]+s[2]).toLowerCase(),g):e<t?-1:1}},vglobal:function(e,t){this.global(e,t)},normal:function(e,t){var n=t.argString;if(n&&"!"==n[0]&&(n=n.slice(1),q=!0),n=n.trimStart()){var r=t.line;if("number"==typeof r)for(var o=isNaN(t.lineEnd)?r:t.lineEnd,i=r;i<=o;i++)e.setCursor(i,0),A(e,t.argString.trimStart()),e.state.vim.insertMode&&nt(e,!0);else A(e,t.argString.trimStart()),e.state.vim.insertMode&&nt(e,!0)}else Ke(e,"Argument is required.")},global:function(e,t){var n=t.argString;if(n){var r="v"===t.commandName[0];"!"===n[0]&&"g"===t.commandName[0]&&(r=!0,n=n.slice(1));var o=void 0!==t.line?t.line:e.firstLine(),i=t.lineEnd||t.line||e.lastLine(),s=function(e){return Ae(e,"/")}(n),a=n,c="";if(s&&s.length&&(a=s[0],c=s.slice(1,s.length).join("/")),a)try{Ve(e,a,!0,!0)}catch(m){return void Ke(e,"Invalid regex: "+a)}for(var l=Le(e).getQuery(),u=[],d=o;d<=i;d++){var h=e.getLine(d);l.test(h)!==r&&u.push(c?e.getLineHandle(d):h)}if(c){var f=0,p=function(){if(f<u.length){var t=u[f++],n=e.getLineNumber(t);if(null==n)return void p();var r=n+1+c;tt.processCommand(e,r,{callback:p})}else e.releaseLineHandles&&e.releaseLineHandles()};p()}else Ke(e,u.join("\n"))}else Ke(e,"Regular Expression missing from global")},substitute:function(n,r){if(!n.getSearchCursor)throw new Error("Search feature not available. Requires searchcursor.js or any other getSearchCursor implementation.");var o,i,s,a=r.argString,c=a?Ae(a,a[0]):[],u="",d="",h=!1,f=!1;if(c&&c.length)u=c[0],R("pcre")&&""!==u&&(u=new RegExp(u).source),void 0!==(d=c[1])&&(d=R("pcre")?function(t){for(var n=new e.StringStream(t),r=[];!n.eol();){for(;n.peek()&&"\\"!=n.peek();)r.push(n.next());var o=!1;for(var i in Fe)if(n.match(i,!0)){o=!0,r.push(Fe[i]);break}o||r.push(n.next())}return r.join("")}(d.replace(/([^\\])&/g,"$1$$&")):function(e){for(var t,n=!1,r=[],o=-1;o<e.length;o++){var i=e.charAt(o)||"",s=e.charAt(o+1)||"";Be[i+s]?(r.push(Be[i+s]),o++):n?(r.push(i),n=!1):"\\"===i?(n=!0,t=s,l.test(t)||"$"===s?r.push("$"):"/"!==s&&"\\"!==s&&r.push("\\")):("$"===i&&r.push("$"),r.push(i),"/"===s&&r.push("\\"))}return r.join("")}(d),T.lastSubstituteReplacePart=d),o=c[2]?c[2].split(" "):[];else if(a&&a.length)return void Ke(n,"Substitutions should be of the form :s/pattern/replace/");if(o&&(i=o[0],s=parseInt(o[1]),i&&(-1!=i.indexOf("c")&&(h=!0),-1!=i.indexOf("g")&&(f=!0),u=R("pcre")?u+"/"+i:u.replace(/\//g,"\\/")+"/"+i)),u)try{Ve(n,u,!0,!0)}catch(b){return void Ke(n,"Invalid regex: "+u)}if(void 0!==(d=d||T.lastSubstituteReplacePart)){var p=Le(n).getQuery(),m=void 0!==r.line?r.line:n.getCursor().line,g=r.lineEnd||m;m==n.firstLine()&&g==n.lastLine()&&(g=1/0),s&&(g=(m=g)+s-1);var v=te(n,new t(m,0)),y=n.getSearchCursor(p,v);!function(t,n,r,o,i,s,a,c,l){t.state.vim.exMode=!0;var u,d,h,f=!1;function p(){t.operation((function(){for(;!f;)m(),v();y()}))}function m(){var e=t.getRange(s.from(),s.to()).replace(a,c),n=s.to().line;s.replace(e),d=s.to().line,i+=d-n,h=d<n}function g(){var e=u&&se(s.to()),t=s.findNext();return t&&!t[0]&&e&&ae(s.from(),e)&&(t=s.findNext()),t}function v(){for(;g()&&Ge(s.from(),o,i);)if(r||s.from().line!=d||h)return t.scrollIntoView(s.from(),30),t.setSelection(s.from(),s.to()),u=s.from(),void(f=!1);f=!0}function y(e){if(e&&e(),t.focus(),u){t.setCursor(u);var n=t.state.vim;n.exMode=!1,n.lastHPos=n.lastHSPos=u.ch}l&&l()}function b(n,r,o){switch(e.e_stop(n),W(n)){case"y":m(),v();break;case"n":v();break;case"a":var i=l;l=void 0,t.operation(p),l=i;break;case"l":m();case"q":case"<Esc>":case"<C-c>":case"<C-[>":y(o)}return f&&y(o),!0}if(v(),f)return void Ke(t,"No matches for "+a.source);if(!n)return p(),void(l&&l());Ue(t,{prefix:He("span","replace with ",He("strong",c)," (y/n/a/q/l)"),onKeyDown:b})}(n,h,f,m,g,y,p,d,r.callback)}else Ke(n,"No previous substitute regular expression")},startinsert:function(e,t){A(e,"!"==t.argString?"A":"i",{})},redo:e.commands.redo,undo:e.commands.undo,write:function(t){e.commands.save?e.commands.save(t):t.save&&t.save()},nohlsearch:function(e){Qe(e)},yank:function(e){var t=se(e.getCursor()).line,n=e.getLine(t);T.registerController.pushText("0","yank",n,!0,!0)},delete:function(e,n){var r=n.selectionLine,o=isNaN(n.selectionLineEnd)?r:n.selectionLineEnd;Y.delete(e,{linewise:!0},[{anchor:new t(r,0),head:new t(o+1,0)}])},join:function(e,n){var r=n.selectionLine,o=isNaN(n.selectionLineEnd)?r:n.selectionLineEnd;e.setCursor(new t(r,0)),ee.joinLines(e,{repeat:o-r},e.state.vim)},delmarks:function(t,n){if(n.argString&&fe(n.argString))for(var r=t.state.vim,o=new e.StringStream(fe(n.argString));!o.eol();){o.eatSpace();var i=o.pos;if(!o.match(/[a-zA-Z]/,!1))return void Ke(t,"Invalid argument: "+n.argString.substring(i));var s=o.next();if(o.match("-",!0)){if(!o.match(/[a-zA-Z]/,!1))return void Ke(t,"Invalid argument: "+n.argString.substring(i));var a=s,c=o.next();if(!a||!c||g(a)!=g(c))return void Ke(t,"Invalid argument: "+a+"-");var l=a.charCodeAt(0),u=c.charCodeAt(0);if(l>=u)return void Ke(t,"Invalid argument: "+n.argString.substring(i));for(var d=0;d<=u-l;d++){var h=String.fromCharCode(l+d);delete r.marks[h]}}else s&&delete r.marks[s]}else Ke(t,"Argument required")}},tt=new class{constructor(){this.commandMap_,this.buildCommandMap_()}processCommand(e,t,n){var r=this;e.operation((function(){e.curOp.isVimOp=!0,r._processCommand(e,t,n)}))}_processCommand(t,n,r){var o=t.state.vim,i=T.registerController.getRegister(":"),s=i.toString(),a=new e.StringStream(n);i.setText(n);var c,l,u=r||{};u.input=n;try{this.parseInput_(t,a,u)}catch(d){throw Ke(t,d+""),d}if(o.visualMode&&we(t),u.commandName){if(c=this.matchCommand_(u.commandName)){if(l=c.name,c.excludeFromCommandHistory&&i.setText(s),this.parseCommandArgs_(a,u,c),"exToKey"==c.type)return void A(t,c.toKeys,c);if("exToEx"==c.type)return void this.processCommand(t,c.toInput)}}else void 0!==u.line&&(l="move");if(l)try{et[l](t,u),c&&c.possiblyAsync||!u.callback||u.callback()}catch(d){throw Ke(t,d+""),d}else Ke(t,'Not an editor command ":'+n+'"')}parseInput_(e,t,n){var r,o;t.eatWhile(":"),t.eat("%")?(n.line=e.firstLine(),n.lineEnd=e.lastLine()):(n.line=this.parseLineSpec_(e,t),void 0!==n.line&&t.eat(",")&&(n.lineEnd=this.parseLineSpec_(e,t))),null==n.line?e.state.vim.visualMode?(n.selectionLine=null==(r=Ze(e,e.state.vim,"<"))?void 0:r.line,n.selectionLineEnd=null==(o=Ze(e,e.state.vim,">"))?void 0:o.line):n.selectionLine=e.getCursor().line:(n.selectionLine=n.line,n.selectionLineEnd=n.lineEnd);var i=t.match(/^(\w+|!!|@@|[!#&*<=>@~])/);return n.commandName=i?i[1]:t.match(/.*/)[0],n}parseLineSpec_(e,t){var n=t.match(/^(\d+)/);if(n)return parseInt(n[1],10)-1;switch(t.next()){case".":return this.parseLineSpecOffset_(t,e.getCursor().line);case"$":return this.parseLineSpecOffset_(t,e.lastLine());case"'":var r=t.next(),o=Ze(e,e.state.vim,r);if(!o)throw new Error("Mark not set");return this.parseLineSpecOffset_(t,o.line);case"-":case"+":return t.backUp(1),this.parseLineSpecOffset_(t,e.getCursor().line);default:return void t.backUp(1)}}parseLineSpecOffset_(e,t){var n=e.match(/^([+-])?(\d+)/);if(n){var r=parseInt(n[2],10);"-"==n[1]?t-=r:t+=r}return t}parseCommandArgs_(e,t,n){if(!e.eol()){t.argString=e.match(/.*/)[0];var r=n.argDelimiter||/\s+/,o=fe(t.argString).split(r);o.length&&o[0]&&(t.args=o)}}matchCommand_(e){for(var t=e.length;t>0;t--){var n=e.substring(0,t);if(this.commandMap_[n]){var r=this.commandMap_[n];if(0===r.name.indexOf(e))return r}}return null}buildCommandMap_(){this.commandMap_={};for(var e=0;e<i.length;e++){var t=i[e],n=t.shortName||t.name;this.commandMap_[n]=t}}map(e,t,n,o){if(":"!=e&&":"==e.charAt(0)){if(n)throw Error("Mode not supported for ex mappings");var i=e.substring(1);":"!=t&&":"==t.charAt(0)?this.commandMap_[i]={name:i,type:"exToEx",toInput:t.substring(1),user:!0}:this.commandMap_[i]={name:i,type:"exToKey",toKeys:t,user:!0}}else{var s={keys:e,type:"keyToKey",toKeys:t,noremap:!!o};n&&(s.context=n),r.unshift(s)}}unmap(e,t){if(":"!=e&&":"==e.charAt(0)){if(t)throw Error("Mode not supported for ex mappings");var n=e.substring(1);if(this.commandMap_[n]&&this.commandMap_[n].user)return delete this.commandMap_[n],!0}else for(var o=e,i=0;i<r.length;i++)if(o==r[i].keys&&r[i].context===t)return r.splice(i,1),!0}};function nt(t,n){var r=t.state.vim,o=T.macroModeState,i=T.registerController.getRegister("."),s=o.isPlaying,a=o.lastInsertModeChanges;s||(t.off("change",it),r.insertEnd&&r.insertEnd.clear(),r.insertEnd=void 0,e.off(t.getInputField(),"keydown",lt)),!s&&r.insertModeRepeat>1&&(ut(t,r,r.insertModeRepeat-1,!0),r.lastEditInputState.repeatOverride=r.insertModeRepeat),delete r.insertModeRepeat,r.insertMode=!1,n||t.setCursor(t.getCursor().line,t.getCursor().ch-1),t.setOption("keyMap","vim"),t.setOption("disableInput",!0),t.toggleOverwrite(!1),i.setText(a.changes.join("")),e.signal(t,"vim-mode-change",{mode:"normal"}),o.isRecording&&function(e){if(e.isPlaying)return;var t=e.latestRegister,n=T.registerController.getRegister(t);n&&n.pushInsertModeChanges&&n.pushInsertModeChanges(e.lastInsertModeChanges)}(o)}function rt(e){r.unshift(e)}function ot(e,t,n,r){var o=T.registerController.getRegister(r);if(":"==r)return o.keyBuffer[0]&&tt.processCommand(e,o.keyBuffer[0]),void(n.isPlaying=!1);var i=o.keyBuffer,s=0;n.isPlaying=!0,n.replaySearchQueries=o.searchQueries.slice(0);for(var a=0;a<i.length;a++)for(var c,l,u=i[a],d=/<(?:[CSMA]-)*\w+>|./gi;c=d.exec(u);)if(l=c[0],N.handleKey(e,l,"macro"),t.insertMode){var h=o.insertModeChanges[s++].changes;T.macroModeState.lastInsertModeChanges.changes=h,ht(e,h,1),nt(e)}n.isPlaying=!1}function it(e,t){var n=T.macroModeState,r=n.lastInsertModeChanges;if(!n.isPlaying)for(var o=e.state.vim;t;){if(r.expectCursorActivityForChange=!0,r.ignoreCount>1)r.ignoreCount--;else if("+input"==t.origin||"paste"==t.origin||void 0===t.origin){var i=e.listSelections().length;i>1&&(r.ignoreCount=i);var s=t.text.join("\n");if(r.maybeReset&&(r.changes=[],r.maybeReset=!1),s)if(e.state.overwrite&&!/\n/.test(s))r.changes.push([s]);else{if(s.length>1){var a=o&&o.insertEnd&&o.insertEnd.find(),c=e.getCursor();if(a&&a.line==c.line){var l=a.ch-c.ch;l>0&&l<s.length&&(r.changes.push([s,l]),s="")}}s&&r.changes.push(s)}}t=t.next}}function st(e){var t,n=e.state.vim;if(n.insertMode){var r=T.macroModeState;if(r.isPlaying)return;var o=r.lastInsertModeChanges;o.expectCursorActivityForChange?o.expectCursorActivityForChange=!1:(o.maybeReset=!0,n.insertEnd&&n.insertEnd.clear(),n.insertEnd=e.setBookmark(e.getCursor(),{insertLeft:!0}))}else(null==(t=e.curOp)?void 0:t.isVimOp)||at(e,n)}function at(t,n){var r=t.getCursor("anchor"),o=t.getCursor("head");if(n.visualMode&&!t.somethingSelected()?we(t,!1):n.visualMode||n.insertMode||!t.somethingSelected()||(n.visualMode=!0,n.visualLine=!1,e.signal(t,"vim-mode-change",{mode:"visual"})),n.visualMode){var i=ce(o,r)?0:-1,s=ce(o,r)?-1:0;o=re(o,0,i),r=re(r,0,s),n.sel={anchor:r,head:o},Ee(t,n,"<",le(o,r)),Ee(t,n,">",ue(o,r))}else n.insertMode||(n.lastHPos=t.getCursor().ch)}function ct(e,t){this.keyName=e,this.key=t.key,this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.shiftKey=t.shiftKey}function lt(t){var n=T.macroModeState.lastInsertModeChanges,r=e.keyName?e.keyName(t):t.key;r&&(-1==r.indexOf("Delete")&&-1==r.indexOf("Backspace")||(n.maybeReset&&(n.changes=[],n.maybeReset=!1),n.changes.push(new ct(r,t))))}function ut(e,t,n,r){var o=T.macroModeState;o.isPlaying=!0;var i=t.lastEditActionCommand,s=t.inputState;function a(){i?G.processAction(e,t,i):G.evalInput(e,t)}function c(n){if(o.lastInsertModeChanges.changes.length>0){n=t.lastEditActionCommand?n:1;var r=o.lastInsertModeChanges;ht(e,r.changes,n)}}if(t.inputState=t.lastEditInputState,i&&i.interlaceInsertRepeat)for(var l=0;l<n;l++)a(),c(1);else r||a(),c(n);t.inputState=s,t.insertMode&&!r&&nt(e),o.isPlaying=!1}function dt(t,n){e.lookupKey(n,"vim-insert",(function(n){return"string"==typeof n?e.commands[n](t):n(t),!0}))}function ht(e,t,n){var r=e.getCursor("head"),o=T.macroModeState.lastInsertModeChanges.visualBlock;o&&(ge(e,r,o+1),n=e.listSelections().length,e.setCursor(r));for(var i=0;i<n;i++){o&&e.setCursor(re(r,i,0));for(var s=0;s<t.length;s++){var a=t[s];if(a instanceof ct)dt(e,a.keyName);else if("string"==typeof a)e.replaceSelection(a);else{var c=e.getCursor(),l=re(c,0,a[0].length-(a[1]||0));e.replaceRange(a[0],c,a[1]?c:l),e.setCursor(l)}}}o&&e.setCursor(re(r,0,1))}function ft(e){var t=new e.constructor;return Object.keys(e).forEach((function(n){if("insertEnd"!=n){var r=e[n];Array.isArray(r)?r=r.slice():r&&"object"==typeof r&&r.constructor!=Object&&(r=ft(r)),t[n]=r}})),e.sel&&(t.sel={head:e.sel.head&&se(e.sel.head),anchor:e.sel.anchor&&se(e.sel.anchor)}),t}return x("insertModeEscKeysTimeout",200,"number"),P(),N}function et(e,t){var n=t.ch,r=t.line+1;r<1&&(r=1,n=0),r>e.lines&&(r=e.lines,n=Number.MAX_VALUE);var o=e.line(r);return Math.min(o.from+Math.max(0,n),o.to)}function tt(e,t){let n=e.lineAt(t);return{line:n.number-1,ch:t-n.from}}class nt{constructor(e,t){this.line=e,this.ch=t}}function rt(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else{var r=e._handlers||(e._handlers={});r[t]=(r[t]||[]).concat(n)}}function ot(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else{var r=e._handlers,o=r&&r[t];if(o){var i=o.indexOf(n);i>-1&&(r[t]=o.slice(0,i).concat(o.slice(i+1)))}}}function it(e,t,...n){var r,o=null===(r=e._handlers)||void 0===r?void 0:r[t];if(o)for(var i=0;i<o.length;++i)o[i](...n)}function st(e,...t){if(e)for(var n=0;n<e.length;++n)e[n](...t)}let at;try{at=new RegExp("[\\w\\p{Alphabetic}\\p{Number}_]","u")}catch(Cd){at=/[\w]/}function ct(e,t){var n=e.cm6;if(!n.state.readOnly){var r="input.type.compose";if(e.curOp&&(e.curOp.lastChange||(r="input.type.compose.start")),t.annotations)try{t.annotations.some((function(e){"input"==e.value&&(e.value=r)}))}catch(o){console.error(o)}else t.userEvent=r;return n.dispatch(t)}}function lt(e,t){var n;e.curOp&&(e.curOp.$changeStart=void 0),(t?_:E)(e.cm6);let r=null===(n=e.curOp)||void 0===n?void 0:n.$changeStart;null!=r&&e.cm6.dispatch({selection:{anchor:r}})}class ut{constructor(e){this.state={},this.marks=Object.create(null),this.$mid=0,this.options={},this._handlers={},this.$lastChangeEndOffset=0,this.virtualSelection=null,this.cm6=e,this.onChange=this.onChange.bind(this),this.onSelectionChange=this.onSelectionChange.bind(this)}openDialog(e,t,n){return function(e,t,n,r){r||(r={});ht(e,void 0);var o=dt(e,t,r.bottom),i=!1;function s(t){if("string"==typeof t)a.value=t;else{if(i)return;i=!0,pt(e,o),e.state.dialog||e.focus(),r.onClose&&r.onClose(o)}}ft(e,o);var a=o.getElementsByTagName("input")[0];a&&(r.value&&(a.value=r.value,!1!==r.selectValueOnOpen&&a.select()),r.onInput&&ut.on(a,"input",(function(e){r.onInput(e,a.value,s)})),r.onKeyUp&&ut.on(a,"keyup",(function(e){r.onKeyUp(e,a.value,s)})),ut.on(a,"keydown",(function(e){r&&r.onKeyDown&&r.onKeyDown(e,a.value,s)||(13==e.keyCode&&n(a.value),(27==e.keyCode||!1!==r.closeOnEnter&&13==e.keyCode)&&(a.blur(),ut.e_stop(e),s()))})),!1!==r.closeOnBlur&&ut.on(a,"blur",(function(){setTimeout((function(){document.activeElement!==a&&s()}))})),a.focus());return s}(this,e,t,n)}openNotification(e,t){return function(e,t,n){ht(e,a);var r,o=dt(e,t,n&&n.bottom),i=!1,s=n&&void 0!==n.duration?n.duration:5e3;function a(){i||(i=!0,clearTimeout(r),o.remove(),pt(e,o))}o.onclick=function(e){e.preventDefault(),a()},ft(e,o),s&&(r=setTimeout(a,s));return a}(this,e,t)}on(e,t){rt(this,e,t)}off(e,t){ot(this,e,t)}signal(e,t,n){it(this,e,t,n)}indexFromPos(e){return et(this.cm6.state.doc,e)}posFromIndex(e){return tt(this.cm6.state.doc,e)}foldCode(e){let t=this.cm6,n=t.state.selection.ranges,r=et(this.cm6.state.doc,e),o=P.create([P.range(r,r)],0).ranges;t.state.selection.ranges=o,O(t),t.state.selection.ranges=n}firstLine(){return 0}lastLine(){return this.cm6.state.doc.lines-1}lineCount(){return this.cm6.state.doc.lines}setCursor(e,t){"object"==typeof e&&(t=e.ch,e=e.line);var n=et(this.cm6.state.doc,{line:e,ch:t||0});this.cm6.dispatch({selection:{anchor:n}},{scrollIntoView:!this.curOp}),this.curOp&&!this.curOp.isVimOp&&this.onBeforeEndOperation()}getCursor(e){var t=this.cm6.state.selection.main,n="head"!=e&&e?"anchor"==e?t.anchor:"start"==e?t.from:"end"==e?t.to:null:t.head;if(null==n)throw new Error("Invalid cursor type");return this.posFromIndex(n)}listSelections(){var e=this.cm6.state.doc;return this.cm6.state.selection.ranges.map((t=>({anchor:tt(e,t.anchor),head:tt(e,t.head)})))}setSelections(e,t){var n=this.cm6.state.doc,r=e.map((e=>{var t=et(n,e.head),r=et(n,e.anchor);return t==r?P.cursor(t,1):P.range(r,t)}));this.cm6.dispatch({selection:P.create(r,t)})}setSelection(e,t,n){this.setSelections([{anchor:e,head:t}],0),n&&"*mouse"==n.origin&&this.onBeforeEndOperation()}getLine(e){var t=this.cm6.state.doc;return e<0||e>=t.lines?"":this.cm6.state.doc.line(e+1).text}getLineHandle(e){return this.$lineHandleChanges||(this.$lineHandleChanges=[]),{row:e,index:this.indexFromPos(new nt(e,0))}}getLineNumber(e){var t=this.$lineHandleChanges;if(!t)return null;for(var n=e.index,r=0;r<t.length;r++)if(null==(n=t[r].changes.mapPos(n,1,N.TrackAfter)))return null;var o=this.posFromIndex(n);return 0==o.ch?o.line:null}releaseLineHandles(){this.$lineHandleChanges=void 0}getRange(e,t){var n=this.cm6.state.doc;return this.cm6.state.sliceDoc(et(n,e),et(n,t))}replaceRange(e,t,n,r){n||(n=t);var o=this.cm6.state.doc;ct(this,{changes:{from:et(o,t),to:et(o,n),insert:e}})}replaceSelection(e){ct(this,this.cm6.state.replaceSelection(e))}replaceSelections(e){ct(this,{changes:this.cm6.state.selection.ranges.map(((t,n)=>({from:t.from,to:t.to,insert:e[n]||""})))})}getSelection(){return this.getSelections().join("\n")}getSelections(){var e=this.cm6;return e.state.selection.ranges.map((t=>e.state.sliceDoc(t.from,t.to)))}somethingSelected(){return this.cm6.state.selection.ranges.some((e=>!e.empty))}getInputField(){return this.cm6.contentDOM}clipPos(e){var t=this.cm6.state.doc,n=e.ch,r=e.line+1;r<1&&(r=1,n=0),r>t.lines&&(r=t.lines,n=Number.MAX_VALUE);var o=t.line(r);return n=Math.min(Math.max(0,n),o.to-o.from),new nt(r-1,n)}getValue(){return this.cm6.state.doc.toString()}setValue(e){var t=this.cm6;return t.dispatch({changes:{from:0,to:t.state.doc.length,insert:e},selection:P.range(0,0)})}focus(){return this.cm6.focus()}blur(){return this.cm6.contentDOM.blur()}defaultTextHeight(){return this.cm6.defaultLineHeight}findMatchingBracket(e,t){var n=this.cm6.state,r=et(n.doc,e),o=j(n,r+1,-1);return o&&o.end||(o=j(n,r,1))&&o.end?{to:tt(n.doc,o.end.from)}:{to:void 0}}scanForBracket(e,t,n,r){return function(e,t,n,r,o){for(var i=o&&o.maxScanLineLength||1e4,s=o&&o.maxScanLines||1e3,a=[],c=function(e){return e&&e.bracketRegex||/[(){}[\]]/}(o),l=n>0?Math.min(t.line+s,e.lastLine()+1):Math.max(e.firstLine()-1,t.line-s),u=t.line;u!=l;u+=n){var d=e.getLine(u);if(d){var h=n>0?0:d.length-1,f=n>0?d.length:-1;if(!(d.length>i))for(u==t.line&&(h=t.ch-(n<0?1:0));h!=f;h+=n){var p=d.charAt(h);if(c.test(p)){var m=mt[p];if(m&&">"==m.charAt(1)==n>0)a.push(p);else{if(!a.length)return{pos:new nt(u,h),ch:p};a.pop()}}}}}return u-n!=(n>0?e.lastLine():e.firstLine())&&null}(this,e,t,0,r)}indentLine(e,t){t?this.indentMore():this.indentLess()}indentMore(){q(this.cm6)}indentLess(){L(this.cm6)}execCommand(e){if("indentAuto"==e)ut.commands.indentAuto(this);else if("goLineLeft"==e)A(this.cm6);else if("goLineRight"==e){I(this.cm6);let e=this.cm6.state,t=e.selection.main.head;t<e.doc.length&&"\n"!==e.sliceDoc(t,t+1)&&B(this.cm6)}else console.log(e+" is not implemented")}setBookmark(e,t){var n=(null==t?void 0:t.insertLeft)?1:-1,r=this.indexFromPos(e);return new vt(this,r,n)}addOverlay({query:e}){let t=new F({regexp:!0,search:e.source,caseSensitive:!/i/.test(e.flags)});if(t.valid){t.forVim=!0,this.cm6Query=t;let e=S.of(t);return this.cm6.dispatch({effects:e}),t}}removeOverlay(e){if(!this.cm6Query)return;this.cm6Query.forVim=!1;let t=S.of(this.cm6Query);this.cm6.dispatch({effects:t})}getSearchCursor(e,t){var n=this,r=null,o=null;null==t.ch&&(t.ch=Number.MAX_VALUE);var i=et(n.cm6.state.doc,t),s=e.source.replace(/(\\.|{(?:\d+(?:,\d*)?|,\d+)})|[{}]/g,(function(e,t){return t||"\\"+e}));function a(t,n=0,r=t.length){return new V(t,s,{ignoreCase:e.ignoreCase},n,r)}return{findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(e){var t=n.cm6.state.doc;if(e){let e=r?r.from==r.to?r.to-1:r.from:i;r=function(e,t){var r=n.cm6.state.doc;for(let n=1;;n++){let o=Math.max(e,t-1e4*n),i=a(r,o,t),s=null;for(;!i.next().done;)s=i.value;if(s&&(o==e||s.from>o+10))return s;if(o==e)return null}}(0,e)}else{let e=r?r.from==r.to?r.to+1:r.to:i;r=function(e){var t=n.cm6.state.doc;if(e>t.length)return null;let r=a(t,e).next();return r.done?null:r.value}(e)}return o=r&&{from:tt(t,r.from),to:tt(t,r.to),match:r.match},r&&r.match},from:function(){return null==o?void 0:o.from},to:function(){return null==o?void 0:o.to},replace:function(e){r&&(ct(n,{changes:{from:r.from,to:r.to,insert:e}}),r.to=r.from+e.length,o&&(o.to=tt(n.cm6.state.doc,r.to)))}}}findPosV(e,t,n,r){let{cm6:o}=this;const i=o.state.doc;let s="page"==n?o.dom.clientHeight:0;const a=et(i,e);let c=P.cursor(a,1,void 0,r),l=Math.round(Math.abs(t));for(let d=0;d<l;d++)"page"==n?c=o.moveVertically(c,t>0,s):"line"==n&&(c=o.moveVertically(c,t>0));let u=tt(i,c.head);return(t<0&&0==c.head&&0!=r&&0==e.line&&0!=e.ch||t>0&&c.head==i.length&&u.ch!=r&&e.line==u.line)&&(u.hitSide=!0),u}charCoords(e,t){var n=this.cm6.contentDOM.getBoundingClientRect(),r=et(this.cm6.state.doc,e),o=this.cm6.coordsAtPos(r),i=-n.top;return{left:((null==o?void 0:o.left)||0)-n.left,top:((null==o?void 0:o.top)||0)+i,bottom:((null==o?void 0:o.bottom)||0)+i}}coordsChar(e,t){var n=this.cm6.contentDOM.getBoundingClientRect(),r=this.cm6.posAtCoords({x:e.left+n.left,y:e.top+n.top})||0;return tt(this.cm6.state.doc,r)}getScrollInfo(){var e=this.cm6.scrollDOM;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight,width:e.scrollWidth,clientHeight:e.clientHeight,clientWidth:e.clientWidth}}scrollTo(e,t){null!=e&&(this.cm6.scrollDOM.scrollLeft=e),null!=t&&(this.cm6.scrollDOM.scrollTop=t)}scrollIntoView(e,t){if(e){var n=this.indexFromPos(e);this.cm6.dispatch({effects:k.scrollIntoView(n)})}else this.cm6.dispatch({scrollIntoView:!0,userEvent:"scroll"})}getWrapperElement(){return this.cm6.dom}getMode(){return{name:this.getOption("mode")}}setSize(e,t){this.cm6.dom.style.width=e+4+"px",this.cm6.dom.style.height=t+"px",this.refresh()}refresh(){this.cm6.measure()}destroy(){this.removeOverlay()}getLastEditEnd(){return this.posFromIndex(this.$lastChangeEndOffset)}onChange(e){this.$lineHandleChanges&&this.$lineHandleChanges.push(e);for(let n in this.marks){this.marks[n].update(e.changes)}this.virtualSelection&&(this.virtualSelection.ranges=this.virtualSelection.ranges.map((t=>t.map(e.changes))));var t=this.curOp=this.curOp||{};e.changes.iterChanges(((e,n,r,o,i)=>{(null==t.$changeStart||t.$changeStart>r)&&(t.$changeStart=r),this.$lastChangeEndOffset=o;var s={text:i.toJSON()};t.lastChange?t.lastChange.next=t.lastChange=s:t.lastChange=t.change=s}),!0),t.changeHandlers||(t.changeHandlers=this._handlers.change&&this._handlers.change.slice())}onSelectionChange(){var e=this.curOp=this.curOp||{};e.cursorActivityHandlers||(e.cursorActivityHandlers=this._handlers.cursorActivity&&this._handlers.cursorActivity.slice()),this.curOp.cursorActivity=!0}operation(e,t){this.curOp||(this.curOp={$d:0}),this.curOp.$d++;try{var n=e()}finally{this.curOp&&(this.curOp.$d--,this.curOp.$d||this.onBeforeEndOperation())}return n}onBeforeEndOperation(){var e=this.curOp,t=!1;e&&(e.change&&st(e.changeHandlers,this,e.change),e&&e.cursorActivity&&(st(e.cursorActivityHandlers,this,null),e.isVimOp&&(t=!0)),this.curOp=null),t&&this.scrollIntoView()}moveH(e,t){if("char"==t){var n=this.getCursor();this.setCursor(n.line,n.ch+e)}}setOption(e,t){switch(e){case"keyMap":this.state.keyMap=t;break;case"textwidth":this.state.textwidth=t}}getOption(e){switch(e){case"firstLineNumber":return 1;case"tabSize":return this.cm6.state.tabSize||4;case"readOnly":return this.cm6.state.readOnly;case"indentWithTabs":return"\t"==this.cm6.state.facet(W);case"indentUnit":return this.cm6.state.facet(W).length||2;case"textwidth":return this.state.textwidth;case"keyMap":return this.state.keyMap||"vim"}}toggleOverwrite(e){this.state.overwrite=e}getTokenTypeAt(e){var t,n=this.indexFromPos(e),r=C(this.cm6.state,n),o=null==r?void 0:r.resolve(n),i=(null===(t=null==o?void 0:o.type)||void 0===t?void 0:t.name)||"";return/comment/i.test(i)?"comment":/string/i.test(i)?"string":""}overWriteSelection(e){var t=this.cm6.state.doc,n=this.cm6.state.selection,r=n.ranges.map((e=>{if(e.empty){var n=e.to<t.length?t.sliceString(e.from,e.to+1):"";if(n&&!/\n/.test(n))return P.range(e.from,e.to+1)}return e}));this.cm6.dispatch({selection:P.create(r,n.mainIndex)}),this.replaceSelection(e)}isInMultiSelectMode(){return this.cm6.state.selection.ranges.length>1}virtualSelectionMode(){return!!this.virtualSelection}forEachSelection(e){var t=this.cm6.state.selection;this.virtualSelection=P.create(t.ranges,t.mainIndex);for(var n=0;n<this.virtualSelection.ranges.length;n++){var r=this.virtualSelection.ranges[n];r&&(this.cm6.dispatch({selection:P.create([r])}),e(),this.virtualSelection.ranges[n]=this.cm6.state.selection.ranges[0])}this.cm6.dispatch({selection:this.virtualSelection}),this.virtualSelection=null}hardWrap(e){return function(e,t){var n,r=t.column||e.getOption("textwidth")||80,o=0!=t.allowMerge,i=Math.min(t.from,t.to),s=Math.max(t.from,t.to);for(;i<=s;){var a=e.getLine(i);if(a.length>r){if(u=p(a,r,5)){var c=null===(n=/^\s*/.exec(a))||void 0===n?void 0:n[0];e.replaceRange("\n"+c,new nt(i,u.start),new nt(i,u.end))}s++}else if(o&&/\S/.test(a)&&i!=s){var l=e.getLine(i+1);if(l&&/\S/.test(l)){var u,d=a.replace(/\s+$/,""),h=l.replace(/^\s+/,""),f=d+" "+h;(u=p(f,r,5))&&u.start>d.length||f.length<r?(e.replaceRange(" ",new nt(i,d.length),new nt(i+1,l.length-h.length)),i--,s--):d.length<a.length&&e.replaceRange("",new nt(i,d.length),new nt(i,a.length))}}i++}return i;function p(e,t,n){if(!(e.length<t)){var r=e.slice(0,t),o=e.slice(t),i=/^(?:(\s+)|(\S+)(\s+))/.exec(o),s=/(?:(\s+)|(\s+)(\S+))$/.exec(r),a=0,c=0;return s&&!s[2]&&(a=t-s[1].length,c=t),i&&!i[2]&&(a||(a=t),c=t+i[1].length),a?{start:a,end:c}:s&&s[2]&&s.index>n?{start:s.index,end:s.index+s[2].length}:i&&i[2]?{start:a=t+i[2].length,end:a+i[3].length}:void 0}}}(this,e)}}function dt(e,t,n){var r=document.createElement("div");return r.appendChild(t),r}function ht(e,t){e.state.currentNotificationClose&&e.state.currentNotificationClose(),e.state.currentNotificationClose=t}function ft(e,t){var n=e.state.dialog;e.state.dialog=t,t&&n!==t&&(n&&n.contains(document.activeElement)&&e.focus(),n&&n.parentElement?n.parentElement.replaceChild(t,n):n&&n.remove(),ut.signal(e,"dialog"))}function pt(e,t){e.state.dialog==t&&(e.state.dialog=null,ut.signal(e,"dialog"))}ut.isMac="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),ut.Pos=nt,ut.StringStream=v,ut.commands={cursorCharLeft:function(e){y(e.cm6)},redo:function(e){lt(e,!1)},undo:function(e){lt(e,!0)},newlineAndIndent:function(e){b({state:e.cm6.state,dispatch:t=>ct(e,t)})},indentAuto:function(e){w(e.cm6)},newlineAndIndentContinueComment:void 0,save:void 0},ut.isWordChar=function(e){return at.test(e)},ut.keys={},ut.addClass=function(e,t){},ut.rmClass=function(e,t){},ut.e_preventDefault=function(e){e.preventDefault()},ut.e_stop=function(e){var t,n;null===(t=null==e?void 0:e.stopPropagation)||void 0===t||t.call(e),null===(n=null==e?void 0:e.preventDefault)||void 0===n||n.call(e)},ut.lookupKey=function(e,t,n){var r=ut.keys[e];r&&n(r)},ut.on=rt,ut.off=ot,ut.signal=it,ut.findMatchingTag=function(e,t){},ut.findEnclosingTag=function(e,t){var n,r,o=e.cm6.state,i=e.indexFromPos(t);if(i<o.doc.length){"<"==o.sliceDoc(i,i+1)&&i++}var s=C(o,i),a=(null==s?void 0:s.resolve(i))||null;for(;a;){if("OpenTag"==(null===(n=a.firstChild)||void 0===n?void 0:n.type.name)&&"CloseTag"==(null===(r=a.lastChild)||void 0===r?void 0:r.type.name))return{open:gt(o.doc,a.firstChild),close:gt(o.doc,a.lastChild)};a=a.parent}},ut.keyName=void 0;var mt={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function gt(e,t){return{from:tt(e,t.from),to:tt(e,t.to)}}class vt{constructor(e,t,n){this.cm=e,this.id=e.$mid++,this.offset=t,this.assoc=n,e.marks[this.id]=this}clear(){delete this.cm.marks[this.id]}find(){return null==this.offset?null:this.cm.posFromIndex(this.offset)}update(e){null!=this.offset&&(this.offset=e.mapPos(this.offset,this.assoc,N.TrackDel))}}let yt=K||function(){let e={cursorBlinkRate:1200};return function(){return e}}();class bt{constructor(e,t,n,r,o,i,s,a,c,l){this.left=e,this.top=t,this.height=n,this.fontFamily=r,this.fontSize=o,this.fontWeight=i,this.color=s,this.className=a,this.letter=c,this.partial=l}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",e.style.height=this.height+"px",e.style.lineHeight=this.height+"px",e.style.fontFamily=this.fontFamily,e.style.fontSize=this.fontSize,e.style.fontWeight=this.fontWeight,e.style.color=this.partial?"transparent":this.color,e.className=this.className,e.textContent=this.letter}eq(e){return this.left==e.left&&this.top==e.top&&this.height==e.height&&this.fontFamily==e.fontFamily&&this.fontSize==e.fontSize&&this.fontWeight==e.fontWeight&&this.color==e.color&&this.className==e.className&&this.letter==e.letter}}class wt{constructor(e,t){this.view=e,this.rangePieces=[],this.cursors=[],this.cm=t,this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.cursorLayer=e.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer cm-vimCursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),e.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){let e=yt(this.cm.cm6.state).cursorBlinkRate;this.cursorLayer.style.animationDuration=e+"ms"}update(e){(e.selectionSet||e.geometryChanged||e.viewportChanged)&&(this.view.requestMeasure(this.measureReq),this.cursorLayer.style.animationName="cm-blink"==this.cursorLayer.style.animationName?"cm-blink2":"cm-blink"),function(e){return yt(e.startState)!=yt(e.state)}(e)&&this.setBlinkRate()}scheduleRedraw(){this.view.requestMeasure(this.measureReq)}readPos(){let{state:e}=this.view,t=[];for(let n of e.selection.ranges){let r=n==e.selection.main,o=kt(this.cm,this.view,n,r);o&&t.push(o)}return{cursors:t}}drawSel({cursors:e}){if(e.length!=this.cursors.length||e.some(((e,t)=>!e.eq(this.cursors[t])))){let t=this.cursorLayer.children;if(t.length!==e.length){this.cursorLayer.textContent="";for(const t of e)this.cursorLayer.appendChild(t.draw())}else e.forEach(((e,n)=>e.adjust(t[n])));this.cursors=e}}destroy(){this.cursorLayer.remove()}}const Ct={".cm-vimMode .cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-fat-cursor":{position:"absolute",background:"#ff9696",border:"none",whiteSpace:"pre"},"&:not(.cm-focused) .cm-fat-cursor":{background:"none",outline:"solid 1px #ff9696",color:"transparent !important"}},xt=x.highest(k.theme(Ct));function kt(e,t,n,r){var o,i;let s=n.head,a=!1,c=1,l=e.state.vim;if(l&&(!l.insertMode||e.state.overwrite)){if(a=!0,l.visualBlock&&!r)return null;n.anchor<n.head&&s--,e.state.overwrite?c=.2:l.status&&(c=.5)}if(a){let e=s<t.state.doc.length&&t.state.sliceDoc(s,s+1);e&&/[\uDC00-\uDFFF]/.test(e)&&s>1&&(s--,e=t.state.sliceDoc(s,s+1));let n=t.coordsAtPos(s,1);if(!n)return null;let a=function(e){let t=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==U.LTR?t.left:t.right-e.scrollDOM.clientWidth)-e.scrollDOM.scrollLeft,top:t.top-e.scrollDOM.scrollTop}}(t),l=t.domAtPos(s),d=l?l.node:t.contentDOM;for(;l&&l.node instanceof HTMLElement;)d=l.node,l={node:l.node.childNodes[l.offset],offset:0};if(!(d instanceof HTMLElement)){if(!d.parentNode)return null;d=d.parentNode}let h=getComputedStyle(d),f=n.left,p=null===(i=(o=t).coordsForChar)||void 0===i?void 0:i.call(o,s);if(p&&(f=p.left),e&&"\n"!=e&&"\r"!=e)if("\t"==e){e="";var u=t.coordsAtPos(s+1,-1);u&&(f=u.left-(u.left-n.left)/parseInt(h.tabSize))}else/[\uD800-\uDBFF]/.test(e)&&s<t.state.doc.length-1&&(e+=t.state.sliceDoc(s+1,s+2));else e="";let m=n.bottom-n.top;return new bt(f-a.left,n.top-a.top+m*(1-c),m*c,h.fontFamily,h.fontSize,h.fontWeight,h.color,r?"cm-fat-cursor cm-cursor-primary":"cm-fat-cursor cm-cursor-secondary",e,1!=c)}return null}var Rt="undefined"!=typeof navigator&&/linux/i.test(navigator.platform)&&/ Gecko\/\d+/.exec(navigator.userAgent);const Tt=Ye(ut),St=k.baseTheme({".cm-vimMode .cm-cursorLayer:not(.cm-vimCursorLayer)":{display:"none"},".cm-vim-panel":{padding:"0px 10px",fontFamily:"monospace",minHeight:"1.3em"},".cm-vim-panel input":{border:"none",outline:"none",backgroundColor:"inherit"},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"}}),Mt=R.fromClass(class{constructor(e){this.status="",this.query=null,this.decorations=T.none,this.waitForCopy=!1,this.lastKeydown="",this.useNextTextInput=!1,this.compositionText="",this.view=e;const t=this.cm=new ut(e);Tt.enterVimMode(this.cm),this.view.cm=this.cm,this.cm.state.vimPlugin=this,this.blockCursor=new wt(e,t),this.updateClass(),this.cm.on("vim-command-done",(()=>{t.state.vim&&(t.state.vim.status=""),this.blockCursor.scheduleRedraw(),this.updateStatus()})),this.cm.on("vim-mode-change",(e=>{t.state.vim&&(t.state.vim.mode=e.mode,e.subMode&&(t.state.vim.mode+=" block"),t.state.vim.status="",this.blockCursor.scheduleRedraw(),this.updateClass(),this.updateStatus())})),this.cm.on("dialog",(()=>{this.cm.state.statusbar?this.updateStatus():e.dispatch({effects:_t.of(!!this.cm.state.dialog)})})),this.dom=document.createElement("span"),this.dom.style.cssText="position: absolute; right: 10px; top: 1px",this.statusButton=document.createElement("span"),this.statusButton.onclick=e=>{Tt.handleKey(this.cm,"<Esc>","user"),this.cm.focus()},this.statusButton.style.cssText="cursor: pointer"}update(e){var t;if((e.viewportChanged||e.docChanged)&&this.query&&this.highlight(this.query),e.docChanged&&this.cm.onChange(e),e.selectionSet&&this.cm.onSelectionChange(),e.viewportChanged,this.cm.curOp&&!this.cm.curOp.isVimOp&&this.cm.onBeforeEndOperation(),e.transactions)for(let n of e.transactions)for(let e of n.effects)if(e.is(S)){if(null===(t=e.value)||void 0===t?void 0:t.forVim){let t=e.value.create();this.highlight(t)}else this.highlight(null)}this.blockCursor.update(e)}updateClass(){const e=this.cm.state;!e.vim||e.vim.insertMode&&!e.overwrite?this.view.scrollDOM.classList.remove("cm-vimMode"):this.view.scrollDOM.classList.add("cm-vimMode")}updateStatus(){let e=this.cm.state.statusbar,t=this.cm.state.vim;if(!e||!t)return;let n=this.cm.state.dialog;if(n)n.parentElement!=e&&(e.textContent="",e.appendChild(n));else{e.textContent="";var r=(t.mode||"normal").toUpperCase();t.insertModeReturn&&(r+="(C-O)"),this.statusButton.textContent=`--${r}--`,e.appendChild(this.statusButton)}this.dom.textContent=t.status,e.appendChild(this.dom)}destroy(){Tt.leaveVimMode(this.cm),this.updateClass(),this.blockCursor.destroy(),delete this.view.cm}highlight(e){if(this.query=e,!e)return this.decorations=T.none;let{view:t}=this,n=new H;for(let r=0,o=t.visibleRanges,i=o.length;r<i;r++){let{from:s,to:a}=o[r];for(;r<i-1&&a>o[r+1].from-500;)a=o[++r].to;e.highlight(t.state,s,a,((e,t)=>{n.add(e,t,Dt)}))}return this.decorations=n.finish()}handleKey(e,t){const n=this.cm;let r=n.state.vim;if(!r)return;const o=Tt.vimKeyFromEvent(e,r);if(ut.signal(this.cm,"inputEvent",{type:"handleKey",key:o}),!o)return;if("<Esc>"==o&&!r.insertMode&&!r.visualMode&&this.query){const e=r.searchState_;e&&(n.removeOverlay(e.getOverlay()),e.setOverlay(null))}if("<C-c>"===o&&!ut.isMac&&n.somethingSelected())return this.waitForCopy=!0,!0;r.status=(r.status||"")+o;let i=Tt.multiSelectHandleKey(n,o,"user");return r=Tt.maybeInitVimState_(n),!i&&r.insertMode&&n.state.overwrite&&(e.key&&1==e.key.length&&!/\n/.test(e.key)?(i=!0,n.overWriteSelection(e.key)):"Backspace"==e.key&&(i=!0,ut.commands.cursorCharLeft(n))),i&&(ut.signal(this.cm,"vim-keypress",o),e.preventDefault(),e.stopPropagation(),this.blockCursor.scheduleRedraw()),this.updateStatus(),!!i}},{eventHandlers:{copy:function(e,t){this.waitForCopy&&(this.waitForCopy=!1,Promise.resolve().then((()=>{var e=this.cm,t=e.state.vim;t&&(t.insertMode?e.setSelection(e.getCursor(),e.getCursor()):e.operation((()=>{e.curOp&&(e.curOp.isVimOp=!0),Tt.handleKey(e,"<Esc>","user")})))})))},compositionstart:function(e,t){this.useNextTextInput=!0,ut.signal(this.cm,"inputEvent",e)},compositionupdate:function(e,t){ut.signal(this.cm,"inputEvent",e)},compositionend:function(e,t){ut.signal(this.cm,"inputEvent",e)},keypress:function(e,t){ut.signal(this.cm,"inputEvent",e),"Dead"==this.lastKeydown&&this.handleKey(e,t)},keydown:function(e,t){ut.signal(this.cm,"inputEvent",e),this.lastKeydown=e.key,"Unidentified"==this.lastKeydown||"Process"==this.lastKeydown||"Dead"==this.lastKeydown?this.useNextTextInput=!0:(this.useNextTextInput=!1,this.handleKey(e,t))}},provide:()=>[k.inputHandler.of(((e,t,n,r)=>{var o,i,s=jt(e);if(!s)return!1;var a=null===(o=s.state)||void 0===o?void 0:o.vim,c=s.state.vimPlugin;if(a&&!a.insertMode&&!(null===(i=s.curOp)||void 0===i?void 0:i.isVimOp)){if("\0\0"===r)return!0;if(ut.signal(s,"inputEvent",{type:"text",text:r,from:t,to:n}),1==r.length&&c.useNextTextInput){if(a.expectLiteralNext&&e.composing)return c.compositionText=r,!1;if(c.compositionText){var l=c.compositionText;c.compositionText="";var u=e.state.selection.main.head;if(l===e.state.sliceDoc(u-l.length,u)){var d=s.getCursor();s.replaceRange("",s.posFromIndex(u-l.length),d)}}return c.handleKey({key:r,preventDefault:()=>{},stopPropagation:()=>{}}),function(e){var t=e.scrollDOM.parentElement;if(!t)return;if(Rt)return e.contentDOM.textContent="\0\0",void e.contentDOM.dispatchEvent(new CustomEvent("compositionend"));var n=e.scrollDOM.nextSibling,r=window.getSelection(),o=r&&{anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset};e.scrollDOM.remove(),t.insertBefore(e.scrollDOM,n);try{o&&r&&(r.setPosition(o.anchorNode,o.anchorOffset),o.focusNode&&r.extend(o.focusNode,o.focusOffset))}catch(i){console.error(i)}e.focus(),e.contentDOM.dispatchEvent(new CustomEvent("compositionend"))}(e),!0}}return!1}))],decorations:e=>e.decorations});const Dt=T.mark({class:"cm-searchMatch"}),_t=M.define(),Et=D.define({create:()=>!1,update(e,t){for(let n of t.effects)n.is(_t)&&(e=n.value);return e},provide:e=>g.from(e,(e=>e?Pt:null))});function Pt(e){let t=document.createElement("div");t.className="cm-vim-panel";let n=e.cm;return n.state.dialog&&t.appendChild(n.state.dialog),{top:!1,dom:t}}function Ot(e){let t=document.createElement("div");t.className="cm-vim-panel";let n=e.cm;return n.state.statusbar=t,n.state.vimPlugin.updateStatus(),{dom:t}}function Nt(e={}){return[St,Mt,xt,e.status?g.of(Ot):Et]}function jt(e){return e.cm||null}function qt(e){const t=e.state.selection.main;return 0===t.from&&0===t.to}function Lt(e,t=!1){const n=e.state.selection.main,r=e.state.doc.length;return!(!t||n.from!==r-1||n.to!==r-1)||n.from===r&&n.to===r}function At(e){var t;const n=null==(t=jt(e))?void 0:t.state.vim;return!!n&&(!(n.mode||n.insertMode||n.visualMode)||"normal"===n.mode)}function It(e){return[$.of([{key:"j",run:t=>!(!Lt(t,!0)||!At(t))&&(e.focusDown(),!0)}]),$.of([{key:"k",run:t=>!(!qt(t)||!At(t))&&(e.focusUp(),!0)}])]}const Bt=["default","vim"];function Ft(e,t){switch(e.preset){case"default":return[$.of(J),$.of([{key:"Escape",preventDefault:!0,run:e=>(e.contentDOM.blur(),!0)}])];case"vim":return Tt.defineEx("dcell","dcell",(()=>{t.deleteCell()})),[It(t),x.highest(Wt("d",(e=>""===e.state.doc.toString()),(e=>""===e.state.doc.toString()&&(t.deleteCell(),!0)))),Nt({status:!1}),$.of(J)];default:return z(e.preset),[]}}function Wt(e,t,n){let r="",o=0;return $.of([{any:(i,s)=>{const a=s.key,c=s.timeStamp;if(a!==e||!t(i))return r="",o=0,!1;if(r===e&&c-o<500){if(n(i))return r="",o=0,!0}return r=a,o=c,!1}}])}const Ht="marimo:copilot:signedIn",Kt=Q(Ht,null,void 0,{getOnInit:!0});function Ut(){const e="true"===localStorage.getItem(Ht),t=G();return e&&t.completion.copilot}var Vt,$t={},zt={},Jt={exports:{}},Qt="object"==typeof Reflect?Reflect:null,Gt=Qt&&"function"==typeof Qt.apply?Qt.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};Vt=Qt&&"function"==typeof Qt.ownKeys?Qt.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var Xt=Number.isNaN||function(e){return e!=e};function Zt(){Zt.init.call(this)}Jt.exports=Zt,Jt.exports.once=function(e,t){return new Promise((function(n,r){function o(n){e.removeListener(t,i),r(n)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",o),n([].slice.call(arguments))}ln(e,t,i,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&ln(e,"error",t,n)}(e,o,{once:!0})}))},Zt.EventEmitter=Zt,Zt.prototype._events=void 0,Zt.prototype._eventsCount=0,Zt.prototype._maxListeners=void 0;var Yt=10;function en(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function tn(e){return void 0===e._maxListeners?Zt.defaultMaxListeners:e._maxListeners}function nn(e,t,n,r){var o,i,s,a;if(en(n),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),s=i[t]),void 0===s)s=i[t]=n,++e._eventsCount;else if("function"==typeof s?s=i[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(o=tn(e))>0&&s.length>o&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=s.length,a=c,console&&console.warn&&console.warn(a)}return e}function rn(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function on(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=rn.bind(r);return o.listener=n,r.wrapFn=o,o}function sn(e,t,n){var r=e._events;if(void 0===r)return[];var o=r[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):cn(o,o.length)}function an(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function cn(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function ln(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(i){r.once&&e.removeEventListener(t,o),n(i)}))}}Object.defineProperty(Zt,"defaultMaxListeners",{enumerable:!0,get:function(){return Yt},set:function(e){if("number"!=typeof e||e<0||Xt(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Yt=e}}),Zt.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Zt.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||Xt(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},Zt.prototype.getMaxListeners=function(){return tn(this)},Zt.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var s=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw s.context=i,s}var a=o[e];if(void 0===a)return!1;if("function"==typeof a)Gt(a,this,t);else{var c=a.length,l=cn(a,c);for(n=0;n<c;++n)Gt(l[n],this,t)}return!0},Zt.prototype.addListener=function(e,t){return nn(this,e,t,!1)},Zt.prototype.on=Zt.prototype.addListener,Zt.prototype.prependListener=function(e,t){return nn(this,e,t,!0)},Zt.prototype.once=function(e,t){return en(t),this.on(e,on(this,e,t)),this},Zt.prototype.prependOnceListener=function(e,t){return en(t),this.prependListener(e,on(this,e,t)),this},Zt.prototype.removeListener=function(e,t){var n,r,o,i,s;if(en(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){s=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},Zt.prototype.off=Zt.prototype.removeListener,Zt.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},Zt.prototype.listeners=function(e){return sn(this,e,!0)},Zt.prototype.rawListeners=function(e){return sn(this,e,!1)},Zt.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):an.call(e,t)},Zt.prototype.listenerCount=an,Zt.prototype.eventNames=function(){return this._eventsCount>0?Vt(this._events):[]};var un=Jt.exports;!function(e){var t=Y&&Y.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(t){i(t)}}function a(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},n=Y&&Y.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.defaultNextRequest=void 0;var r=un;e.defaultNextRequest=function(){var e=-1;return function(){return++e}};var o=function(){function o(t,n){void 0===n&&(n=e.defaultNextRequest()),this.batch=[],this.batchStarted=!1,this.lastId=-1,this.transports=t,this.requests={},this.connectPromise=this.connect(),this.requestChannel=new r.EventEmitter,this.nextID=n}return o.prototype.connect=function(){var e=this;return Promise.all(this.transports.map((function(r){return t(e,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return r.subscribe("error",this.handleError.bind(this)),r.subscribe("notification",this.handleNotification.bind(this)),[4,r.connect()];case 1:return e.sent(),[2]}}))}))})))},o.prototype.getPrimaryTransport=function(){return this.transports[0]},o.prototype.request=function(e,r,o){return void 0===r&&(r=!1),t(this,void 0,void 0,(function(){var t,i,s,a=this;return n(this,(function(n){return t=this.nextID().toString(),i=r?null:t,s={request:this.makeRequest(e.method,e.params||[],i),internalID:t},this.batchStarted?[2,new Promise((function(e,t){a.batch.push({resolve:e,reject:t,request:s})}))]:[2,this.getPrimaryTransport().sendData(s,o)]}))}))},o.prototype.close=function(){this.requestChannel.removeAllListeners(),this.transports.forEach((function(e){e.unsubscribe(),e.close()}))},o.prototype.startBatch=function(){this.batchStarted=!0},o.prototype.stopBatch=function(){if(!1===this.batchStarted)throw new Error("cannot end that which has never started");0!==this.batch.length?(this.getPrimaryTransport().sendData(this.batch),this.batch=[],this.batchStarted=!1):this.batchStarted=!1},o.prototype.makeRequest=function(e,t,n){return n?{jsonrpc:"2.0",id:n,method:e,params:t}:{jsonrpc:"2.0",method:e,params:t}},o.prototype.handleError=function(e){this.requestChannel.emit("error",e)},o.prototype.handleNotification=function(e){this.requestChannel.emit("notification",e)},o}();e.default=o}(zt);var dn={},hn={},fn={},pn={};!function(e){var t=Y&&Y.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.convertJSONToRPCError=e.JSONRPCError=e.ERR_UNKNOWN=e.ERR_MISSIING_ID=e.ERR_TIMEOUT=void 0,e.ERR_TIMEOUT=7777,e.ERR_MISSIING_ID=7878,e.ERR_UNKNOWN=7979;var n=function(e){function n(t,n,r){var o=this.constructor,i=e.call(this,t)||this;return i.message=t,i.code=n,i.data=r,Object.setPrototypeOf(i,o.prototype),i}return t(n,e),n}(Error);e.JSONRPCError=n,e.convertJSONToRPCError=function(t){if(t.error){var r=t.error,o=r.message,i=r.code,s=r.data;return new n(o,i,s)}return new n("Unknown error",e.ERR_UNKNOWN,t)}}(pn),Object.defineProperty(fn,"__esModule",{value:!0}),fn.TransportRequestManager=void 0;var mn=un,gn=pn,vn=function(){function e(){this.pendingRequest={},this.pendingBatchRequest={},this.transportEventChannel=new mn.EventEmitter}return e.prototype.addRequest=function(e,t){return this.transportEventChannel.emit("pending",e),e instanceof Array?(this.addBatchReq(e,t),Promise.resolve()):this.addReq(e.internalID,t)},e.prototype.settlePendingRequest=function(e,t){var n=this;e.forEach((function(e){var r=n.pendingRequest[e.internalID];delete n.pendingBatchRequest[e.internalID],void 0!==r&&(t?r.reject(t):(r.resolve(),null!==e.request.id&&void 0!==e.request.id||delete n.pendingRequest[e.internalID]))}))},e.prototype.isPendingRequest=function(e){return this.pendingRequest.hasOwnProperty(e)},e.prototype.resolveResponse=function(e,t){void 0===t&&(t=!0);var n=e;try{if(n=JSON.parse(e),!1===this.checkJSONRPC(n))return;return n instanceof Array?this.resolveBatch(n,t):this.resolveRes(n,t)}catch(o){var r=new gn.JSONRPCError("Bad response format",gn.ERR_UNKNOWN,e);return t&&this.transportEventChannel.emit("error",r),r}},e.prototype.addBatchReq=function(e,t){var n=this;return e.forEach((function(e){var t=e.resolve,r=e.reject,o=e.request.internalID;n.pendingBatchRequest[o]=!0,n.pendingRequest[o]={resolve:t,reject:r}})),Promise.resolve()},e.prototype.addReq=function(e,t){var n=this;return new Promise((function(r,o){null!==t&&t&&n.setRequestTimeout(e,t,o),n.pendingRequest[e]={resolve:r,reject:o}}))},e.prototype.checkJSONRPC=function(e){var t=[e];return e instanceof Array&&(t=e),t.every((function(e){return void 0!==e.result||void 0!==e.error||void 0!==e.method}))},e.prototype.processResult=function(e,t){if(e.error){var n=gn.convertJSONToRPCError(e);t.reject(n)}else t.resolve(e.result)},e.prototype.resolveBatch=function(e,t){var n=this,r=e.map((function(e){return n.resolveRes(e,t)})).filter((function(e){return e}));if(r.length>0)return r[0]},e.prototype.resolveRes=function(e,t){var n,r=e.id,o=e.error,i=this.pendingRequest[r];return i?(delete this.pendingRequest[r],this.processResult(e,i),void this.transportEventChannel.emit("response",e)):void 0!==r||void 0!==o?(o&&(n=gn.convertJSONToRPCError(e)),t&&o&&n&&this.transportEventChannel.emit("error",n),n):void this.transportEventChannel.emit("notification",e)},e.prototype.setRequestTimeout=function(e,t,n){var r=this;setTimeout((function(){delete r.pendingRequest[e],n(new gn.JSONRPCError("Request timeout request took longer than "+t+" ms to resolve",gn.ERR_TIMEOUT))}),t)},e}();fn.TransportRequestManager=vn,Object.defineProperty(hn,"__esModule",{value:!0});var yn=hn.Transport=void 0,bn=fn,wn=function(){function e(){this.transportRequestManager=new bn.TransportRequestManager,this.transportRequestManager.transportEventChannel.on("error",(function(){}))}return e.prototype.subscribe=function(e,t){this.transportRequestManager.transportEventChannel.addListener(e,t)},e.prototype.unsubscribe=function(e,t){if(!e)return this.transportRequestManager.transportEventChannel.removeAllListeners();e&&t&&this.transportRequestManager.transportEventChannel.removeListener(e,t)},e.prototype.parseData=function(e){return e instanceof Array?e.map((function(e){return e.request.request})):e.request},e}();yn=hn.Transport=wn;var Cn,xn={};Cn=xn,Object.defineProperty(Cn,"__esModule",{value:!0}),Cn.getNotifications=Cn.getBatchRequests=Cn.isNotification=void 0,Cn.isNotification=function(e){return void 0===e.request.id||null===e.request.id},Cn.getBatchRequests=function(e){return e instanceof Array?e.filter((function(e){var t=e.request.request.id;return null!=t})).map((function(e){return e.request})):[]},Cn.getNotifications=function(e){return e instanceof Array?e.filter((function(e){return Cn.isNotification(e.request)})).map((function(e){return e.request})):Cn.isNotification(e)?[e]:[]};var kn=Y&&Y.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(dn,"__esModule",{value:!0});var Rn=xn,Tn=pn,Sn=function(e){function t(t,n,r){var o=e.call(this)||this;return o.connection=t,o.reqUri=n,o.resUri=r,o}return kn(t,e),t.prototype.connect=function(){var e=this;return this.connection.on(this.resUri,(function(t){e.transportRequestManager.resolveResponse(t)})),Promise.resolve()},t.prototype.sendData=function(e,t){void 0===t&&(t=null);var n=this.transportRequestManager.addRequest(e,t),r=Rn.getNotifications(e),o=this.parseData(e);try{return this.connection.emit(this.reqUri,o),this.transportRequestManager.settlePendingRequest(r),n}catch(s){var i=new Tn.JSONRPCError(s.message,Tn.ERR_UNKNOWN,s);return this.transportRequestManager.settlePendingRequest(r,i),Promise.reject(i)}},t.prototype.close=function(){this.connection.removeAllListeners()},t}(hn.Transport);dn.default=Sn;var Mn={},Dn="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||"undefined"!=typeof global&&global||{},_n="URLSearchParams"in Dn,En="Symbol"in Dn&&"iterator"in Symbol,Pn="FileReader"in Dn&&"Blob"in Dn&&function(){try{return new Blob,!0}catch(e){return!1}}(),On="FormData"in Dn,Nn="ArrayBuffer"in Dn;if(Nn)var jn=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],qn=ArrayBuffer.isView||function(e){return e&&jn.indexOf(Object.prototype.toString.call(e))>-1};function Ln(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function An(e){return"string"!=typeof e&&(e=String(e)),e}function In(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return En&&(t[Symbol.iterator]=function(){return t}),t}function Bn(e){this.map={},e instanceof Bn?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){if(2!=e.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function Fn(e){if(!e._noBody)return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function Wn(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function Hn(e){var t=new FileReader,n=Wn(t);return t.readAsArrayBuffer(e),n}function Kn(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function Un(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:Pn&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:On&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:_n&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():Nn&&Pn&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=Kn(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):Nn&&(ArrayBuffer.prototype.isPrototypeOf(e)||qn(e))?this._bodyArrayBuffer=Kn(e):this._bodyText=e=Object.prototype.toString.call(e):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):_n&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},Pn&&(this.blob=function(){var e=Fn(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=Fn(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(Pn)return this.blob().then(Hn);throw new Error("could not read as ArrayBuffer")},this.text=function(){var e,t,n,r,o,i=Fn(this);if(i)return i;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=Wn(t),r=/charset=([A-Za-z0-9_-]+)/.exec(e.type),o=r?r[1]:"utf-8",t.readAsText(e,o),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},On&&(this.formData=function(){return this.text().then(zn)}),this.json=function(){return this.text().then(JSON.parse)},this}Bn.prototype.append=function(e,t){e=Ln(e),t=An(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},Bn.prototype.delete=function(e){delete this.map[Ln(e)]},Bn.prototype.get=function(e){return e=Ln(e),this.has(e)?this.map[e]:null},Bn.prototype.has=function(e){return this.map.hasOwnProperty(Ln(e))},Bn.prototype.set=function(e,t){this.map[Ln(e)]=An(t)},Bn.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},Bn.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),In(e)},Bn.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),In(e)},Bn.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),In(e)},En&&(Bn.prototype[Symbol.iterator]=Bn.prototype.entries);var Vn=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function $n(e,t){if(!(this instanceof $n))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,r,o=(t=t||{}).body;if(e instanceof $n){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new Bn(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new Bn(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),Vn.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal||function(){if("AbortController"in Dn)return(new AbortController).signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(o),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var i=/([?&])_=[^&]*/;if(i.test(this.url))this.url=this.url.replace(i,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function zn(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}})),t}function Jn(e,t){if(!(this instanceof Jn))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new Bn(t.headers),this.url=t.url||"",this._initBody(e)}$n.prototype.clone=function(){return new $n(this,{body:this._bodyInit})},Un.call($n.prototype),Un.call(Jn.prototype),Jn.prototype.clone=function(){return new Jn(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Bn(this.headers),url:this.url})},Jn.error=function(){var e=new Jn(null,{status:200,statusText:""});return e.status=0,e.type="error",e};var Qn=[301,302,303,307,308];Jn.redirect=function(e,t){if(-1===Qn.indexOf(t))throw new RangeError("Invalid status code");return new Jn(null,{status:t,headers:{location:e}})};var Gn=Dn.DOMException;try{new Gn}catch(xd){(Gn=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),Gn.prototype.constructor=Gn}function Xn(e,t){return new Promise((function(n,r){var o=new $n(e,t);if(o.signal&&o.signal.aborted)return r(new Gn("Aborted","AbortError"));var i=new XMLHttpRequest;function s(){i.abort()}if(i.onload=function(){var e,t,r={status:i.status,statusText:i.statusText,headers:(e=i.getAllResponseHeaders()||"",t=new Bn,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();try{t.append(r,o)}catch(i){console.warn("Response "+i.message)}}})),t)};r.url="responseURL"in i?i.responseURL:r.headers.get("X-Request-URL");var o="response"in i?i.response:i.responseText;setTimeout((function(){n(new Jn(o,r))}),0)},i.onerror=function(){setTimeout((function(){r(new TypeError("Network request failed"))}),0)},i.ontimeout=function(){setTimeout((function(){r(new TypeError("Network request failed"))}),0)},i.onabort=function(){setTimeout((function(){r(new Gn("Aborted","AbortError"))}),0)},i.open(o.method,function(e){try{return""===e&&Dn.location.href?Dn.location.href:e}catch(t){return e}}(o.url),!0),"include"===o.credentials?i.withCredentials=!0:"omit"===o.credentials&&(i.withCredentials=!1),"responseType"in i&&(Pn?i.responseType="blob":Nn&&(i.responseType="arraybuffer")),t&&"object"==typeof t.headers&&!(t.headers instanceof Bn||Dn.Headers&&t.headers instanceof Dn.Headers)){var a=[];Object.getOwnPropertyNames(t.headers).forEach((function(e){a.push(Ln(e)),i.setRequestHeader(e,An(t.headers[e]))})),o.headers.forEach((function(e,t){-1===a.indexOf(t)&&i.setRequestHeader(t,e)}))}else o.headers.forEach((function(e,t){i.setRequestHeader(t,e)}));o.signal&&(o.signal.addEventListener("abort",s),i.onreadystatechange=function(){4===i.readyState&&o.signal.removeEventListener("abort",s)}),i.send(void 0===o._bodyInit?null:o._bodyInit)}))}Xn.polyfill=!0,Dn.fetch||(Dn.fetch=Xn,Dn.Headers=Bn,Dn.Request=$n,Dn.Response=Jn);var Zn=self.fetch.bind(self),Yn=Y&&Y.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),er=Y&&Y.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(t){i(t)}}function a(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},tr=Y&&Y.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},nr=Y&&Y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.HTTPTransport=void 0;var rr=nr(Zn),or=xn,ir=pn,sr=function(e){function t(n,r){var o=e.call(this)||this;return o.onlyNotifications=function(e){return e instanceof Array?e.every((function(e){return null===e.request.request.id||void 0===e.request.request.id})):null===e.request.id||void 0===e.request.id},o.uri=n,o.credentials=r&&r.credentials,o.headers=t.setupHeaders(r&&r.headers),o.injectedFetcher=null==r?void 0:r.fetcher,o}return Yn(t,e),t.prototype.connect=function(){return Promise.resolve()},t.prototype.sendData=function(e,t){return void 0===t&&(t=null),er(this,void 0,void 0,(function(){var n,r,o,i,s,a,c,l;return tr(this,(function(u){switch(u.label){case 0:n=this.transportRequestManager.addRequest(e,t),r=or.getNotifications(e),o=or.getBatchRequests(e),i=this.injectedFetcher||rr.default,u.label=1;case 1:return u.trys.push([1,4,,5]),[4,i(this.uri,{method:"POST",headers:this.headers,body:JSON.stringify(this.parseData(e)),credentials:this.credentials})];case 2:return s=u.sent(),this.transportRequestManager.settlePendingRequest(r),this.onlyNotifications(e)?[2,Promise.resolve()]:[4,s.text()];case 3:return a=u.sent(),(l=this.transportRequestManager.resolveResponse(a))?(this.transportRequestManager.settlePendingRequest(o,l),[2,Promise.reject(l)]):[3,5];case 4:return c=u.sent(),l=new ir.JSONRPCError(c.message,ir.ERR_UNKNOWN,c),this.transportRequestManager.settlePendingRequest(r,l),this.transportRequestManager.settlePendingRequest(or.getBatchRequests(e),l),[2,Promise.reject(l)];case 5:return[2,n]}}))}))},t.prototype.close=function(){},t.setupHeaders=function(e){var t=new Headers(e);return t.set("Content-Type","application/json"),t},t}(hn.Transport);Mn.HTTPTransport=sr,Mn.default=sr;var ar={},cr=null;"undefined"!=typeof WebSocket?cr=WebSocket:"undefined"!=typeof MozWebSocket?cr=MozWebSocket:"undefined"!=typeof global?cr=global.WebSocket||global.MozWebSocket:"undefined"!=typeof window?cr=window.WebSocket||window.MozWebSocket:"undefined"!=typeof self&&(cr=self.WebSocket||self.MozWebSocket);const lr=cr,ur=ee(Object.freeze(Object.defineProperty({__proto__:null,default:lr},Symbol.toStringTag,{value:"Module"})));var dr=Y&&Y.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),hr=Y&&Y.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(t){i(t)}}function a(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},fr=Y&&Y.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},pr=Y&&Y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ar,"__esModule",{value:!0});var mr=pr(ur),gr=xn,vr=pn,yr=function(e){function t(t){var n=e.call(this)||this;return n.uri=t,n.connection=new mr.default(t),n}return dr(t,e),t.prototype.connect=function(){var e=this;return new Promise((function(t,n){var r=function(){e.connection.removeEventListener("open",r),t()};e.connection.addEventListener("open",r),e.connection.addEventListener("message",(function(t){var n=t.data;e.transportRequestManager.resolveResponse(n)}))}))},t.prototype.sendData=function(e,t){return void 0===t&&(t=5e3),hr(this,void 0,void 0,(function(){var n,r,o;return fr(this,(function(i){n=this.transportRequestManager.addRequest(e,t),r=gr.getNotifications(e);try{this.connection.send(JSON.stringify(this.parseData(e))),this.transportRequestManager.settlePendingRequest(r)}catch(xd){o=new vr.JSONRPCError(xd.message,vr.ERR_UNKNOWN,xd),this.transportRequestManager.settlePendingRequest(r,o),this.transportRequestManager.settlePendingRequest(gr.getBatchRequests(e),o),n=Promise.reject(o)}return[2,n]}))}))},t.prototype.close=function(){this.connection.close()},t}(hn.Transport);ar.default=yr;var br={},wr=Y&&Y.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Cr=Y&&Y.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(t){i(t)}}function a(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},xr=Y&&Y.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(br,"__esModule",{value:!0});var kr=xn,Rr=function(e){function t(t){var n=e.call(this)||this;return n.messageHandler=function(e){n.transportRequestManager.resolveResponse(JSON.stringify(e.data))},n.uri=t,n.postMessageID="post-message-transport-"+Math.random(),n}return wr(t,e),t.prototype.createWindow=function(e){return new Promise((function(t,n){var r,o,i;o=e,i=window.screen.height,r=window.open(o,"inspector:popup","left=0,top=0,width=400,height="+i+",resizable,scrollbars=yes,status=1"),setTimeout((function(){t(r)}),3e3)}))},t.prototype.connect=function(){var e=this,t=/^(http|https):\/\/.*$/;return new Promise((function(n,r){return Cr(e,void 0,void 0,(function(){var e;return xr(this,(function(o){switch(o.label){case 0:return t.test(this.uri)||r(new Error("Bad URI")),e=this,[4,this.createWindow(this.uri)];case 1:return e.frame=o.sent(),window.addEventListener("message",this.messageHandler),n(),[2]}}))}))}))},t.prototype.sendData=function(e,t){return Cr(this,void 0,void 0,(function(){var t,n;return xr(this,(function(r){return t=this.transportRequestManager.addRequest(e,null),n=kr.getNotifications(e),this.frame&&(this.frame.postMessage(e.request,this.uri),this.transportRequestManager.settlePendingRequest(n)),[2,t]}))}))},t.prototype.close=function(){this.frame&&(window.removeEventListener("message",this.messageHandler),this.frame.close())},t}(hn.Transport);br.default=Rr;var Tr={},Sr=Y&&Y.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Mr=Y&&Y.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(t){i(t)}}function a(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},Dr=Y&&Y.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(Tr,"__esModule",{value:!0});var _r=xn,Er=function(e){function t(t){var n=e.call(this)||this;return n.messageHandler=function(e){n.transportRequestManager.resolveResponse(JSON.stringify(e.data))},n.uri=t,n.postMessageID="post-message-transport-"+Math.random(),n}return Sr(t,e),t.prototype.createWindow=function(e){var t=this;return new Promise((function(n,r){var o,i=document.createElement("iframe");i.setAttribute("id",t.postMessageID),i.setAttribute("width","0px"),i.setAttribute("height","0px"),i.setAttribute("style","visiblity:hidden;border:none;outline:none;"),i.addEventListener("load",(function(){n(o)})),i.setAttribute("src",e),window.document.body.appendChild(i),o=i.contentWindow}))},t.prototype.connect=function(){var e=this,t=/^(http|https):\/\/.*$/;return new Promise((function(n,r){return Mr(e,void 0,void 0,(function(){var e;return Dr(this,(function(o){switch(o.label){case 0:return t.test(this.uri)||r(new Error("Bad URI")),e=this,[4,this.createWindow(this.uri)];case 1:return e.frame=o.sent(),window.addEventListener("message",this.messageHandler),n(),[2]}}))}))}))},t.prototype.sendData=function(e,t){return Mr(this,void 0,void 0,(function(){var t,n;return Dr(this,(function(r){return t=this.transportRequestManager.addRequest(e,null),n=_r.getNotifications(e),this.frame&&(this.frame.postMessage(e.request,"*"),this.transportRequestManager.settlePendingRequest(n)),[2,t]}))}))},t.prototype.close=function(){var e=document.getElementById(this.postMessageID);null==e||e.remove(),window.removeEventListener("message",this.messageHandler)},t}(hn.Transport);Tr.default=Er;var Pr={},Or=Y&&Y.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(t){i(t)}}function a(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},Nr=Y&&Y.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(Pr,"__esModule",{value:!0});var jr=function(){function e(e){this.requestManager=e}return e.prototype.startBatch=function(){return this.requestManager.startBatch()},e.prototype.stopBatch=function(){return this.requestManager.stopBatch()},e.prototype.request=function(e,t){return Or(this,void 0,void 0,(function(){return Nr(this,(function(n){switch(n.label){case 0:return this.requestManager.connectPromise?[4,this.requestManager.connectPromise]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2,this.requestManager.request(e,!1,t)]}}))}))},e.prototype.notify=function(e){return Or(this,void 0,void 0,(function(){return Nr(this,(function(t){switch(t.label){case 0:return this.requestManager.connectPromise?[4,this.requestManager.connectPromise]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2,this.requestManager.request(e,!0,null)]}}))}))},e.prototype.onNotification=function(e){this.requestManager.requestChannel.addListener("notification",e)},e.prototype.onError=function(e){this.requestManager.requestChannel.addListener("error",e)},e.prototype.close=function(){this.requestManager.close()},e}();Pr.default=jr,function(e){var t=Y&&Y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.PostMessageIframeTransport=e.PostMessageWindowTransport=e.JSONRPCError=e.WebSocketTransport=e.EventEmitterTransport=e.HTTPTransport=e.RequestManager=e.Client=void 0;var n=t(zt);e.RequestManager=n.default;var r=t(dn);e.EventEmitterTransport=r.default;var o=t(Mn);e.HTTPTransport=o.default;var i=t(ar);e.WebSocketTransport=i.default;var s=t(br);e.PostMessageWindowTransport=s.default;var a=t(Tr);e.PostMessageIframeTransport=a.default;var c=pn;Object.defineProperty(e,"JSONRPCError",{enumerable:!0,get:function(){return c.JSONRPCError}});var l=t(Pr);e.Client=l.default,e.default=l.default}($t);var qr={},Lr={},Ar={},Ir={},Br={},Fr={};function Wr(e){return"string"==typeof e||e instanceof String}function Hr(e){return Array.isArray(e)}Object.defineProperty(Fr,"__esModule",{value:!0}),Fr.stringArray=Fr.array=Fr.func=Fr.error=Fr.number=Fr.string=Fr.boolean=void 0,Fr.boolean=function(e){return!0===e||!1===e},Fr.string=Wr,Fr.number=function(e){return"number"==typeof e||e instanceof Number},Fr.error=function(e){return e instanceof Error},Fr.func=function(e){return"function"==typeof e},Fr.array=Hr,Fr.stringArray=function(e){return Hr(e)&&e.every((e=>Wr(e)))},Object.defineProperty(Br,"__esModule",{value:!0}),Br.Message=Br.NotificationType9=Br.NotificationType8=Br.NotificationType7=Br.NotificationType6=Br.NotificationType5=Br.NotificationType4=Br.NotificationType3=Br.NotificationType2=Br.NotificationType1=Br.NotificationType0=Br.NotificationType=Br.RequestType9=Br.RequestType8=Br.RequestType7=Br.RequestType6=Br.RequestType5=Br.RequestType4=Br.RequestType3=Br.RequestType2=Br.RequestType1=Br.RequestType=Br.RequestType0=Br.AbstractMessageSignature=Br.ParameterStructures=Br.ResponseError=Br.ErrorCodes=void 0;const Kr=Fr;var Ur,Vr,$r,zr;(Vr=Ur||(Br.ErrorCodes=Ur={})).ParseError=-32700,Vr.InvalidRequest=-32600,Vr.MethodNotFound=-32601,Vr.InvalidParams=-32602,Vr.InternalError=-32603,Vr.jsonrpcReservedErrorRangeStart=-32099,Vr.serverErrorStart=-32099,Vr.MessageWriteError=-32099,Vr.MessageReadError=-32098,Vr.PendingResponseRejected=-32097,Vr.ConnectionInactive=-32096,Vr.ServerNotInitialized=-32002,Vr.UnknownErrorCode=-32001,Vr.jsonrpcReservedErrorRangeEnd=-32e3,Vr.serverErrorEnd=-32e3;class Jr extends Error{constructor(e,t,n){super(t),this.code=Kr.number(e)?e:Ur.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,Jr.prototype)}toJson(){const e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data),e}}Br.ResponseError=Jr;class Qr{constructor(e){this.kind=e}static is(e){return e===Qr.auto||e===Qr.byName||e===Qr.byPosition}toString(){return this.kind}}Br.ParameterStructures=Qr,Qr.auto=new Qr("auto"),Qr.byPosition=new Qr("byPosition"),Qr.byName=new Qr("byName");class Gr{constructor(e,t){this.method=e,this.numberOfParams=t}get parameterStructures(){return Qr.auto}}Br.AbstractMessageSignature=Gr;Br.RequestType0=class extends Gr{constructor(e){super(e,0)}};Br.RequestType=class extends Gr{constructor(e,t=Qr.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};Br.RequestType1=class extends Gr{constructor(e,t=Qr.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};Br.RequestType2=class extends Gr{constructor(e){super(e,2)}};Br.RequestType3=class extends Gr{constructor(e){super(e,3)}};Br.RequestType4=class extends Gr{constructor(e){super(e,4)}};Br.RequestType5=class extends Gr{constructor(e){super(e,5)}};Br.RequestType6=class extends Gr{constructor(e){super(e,6)}};Br.RequestType7=class extends Gr{constructor(e){super(e,7)}};Br.RequestType8=class extends Gr{constructor(e){super(e,8)}};Br.RequestType9=class extends Gr{constructor(e){super(e,9)}};Br.NotificationType=class extends Gr{constructor(e,t=Qr.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};Br.NotificationType0=class extends Gr{constructor(e){super(e,0)}};Br.NotificationType1=class extends Gr{constructor(e,t=Qr.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};Br.NotificationType2=class extends Gr{constructor(e){super(e,2)}};Br.NotificationType3=class extends Gr{constructor(e){super(e,3)}};Br.NotificationType4=class extends Gr{constructor(e){super(e,4)}};Br.NotificationType5=class extends Gr{constructor(e){super(e,5)}};Br.NotificationType6=class extends Gr{constructor(e){super(e,6)}};Br.NotificationType7=class extends Gr{constructor(e){super(e,7)}};Br.NotificationType8=class extends Gr{constructor(e){super(e,8)}};Br.NotificationType9=class extends Gr{constructor(e){super(e,9)}},(zr=$r||(Br.Message=$r={})).isRequest=function(e){const t=e;return t&&Kr.string(t.method)&&(Kr.string(t.id)||Kr.number(t.id))},zr.isNotification=function(e){const t=e;return t&&Kr.string(t.method)&&void 0===e.id},zr.isResponse=function(e){const t=e;return t&&(void 0!==t.result||!!t.error)&&(Kr.string(t.id)||Kr.number(t.id)||null===t.id)};var Xr,Zr,Yr,eo={};Object.defineProperty(eo,"__esModule",{value:!0}),eo.LRUCache=eo.LinkedMap=eo.Touch=void 0,(Yr=Zr||(eo.Touch=Zr={})).None=0,Yr.First=1,Yr.AsOld=Yr.First,Yr.Last=2,Yr.AsNew=Yr.Last;class to{constructor(){this[Xr]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return null==(e=this._head)?void 0:e.value}get last(){var e;return null==(e=this._tail)?void 0:e.value}has(e){return this._map.has(e)}get(e,t=Zr.None){const n=this._map.get(e);if(n)return t!==Zr.None&&this.touch(n,t),n.value}set(e,t,n=Zr.None){let r=this._map.get(e);if(r)r.value=t,n!==Zr.None&&this.touch(r,n);else{switch(r={key:e,value:t,next:void 0,previous:void 0},n){case Zr.None:this.addItemLast(r);break;case Zr.First:this.addItemFirst(r);break;case Zr.Last:default:this.addItemLast(r)}this._map.set(e,r),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const n=this._state;let r=this._head;for(;r;){if(t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");r=r.next}}keys(){const e=this._state;let t=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){const e={value:t.key,done:!1};return t=t.next,e}return{value:void 0,done:!0}}};return n}values(){const e=this._state;let t=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){const e={value:t.value,done:!1};return t=t.next,e}return{value:void 0,done:!0}}};return n}entries(){const e=this._state;let t=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){const e={value:[t.key,t.value],done:!1};return t=t.next,e}return{value:void 0,done:!0}}};return n}[(Xr=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(0===e)return void this.clear();let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e,this._state++}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(t===Zr.First||t===Zr.Last)if(t===Zr.First){if(e===this._head)return;const t=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(t.previous=n,n.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===Zr.Last){if(e===this._tail)return;const t=e.next,n=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=n,n.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}toJSON(){const e=[];return this.forEach(((t,n)=>{e.push([n,t])})),e}fromJSON(e){this.clear();for(const[t,n]of e)this.set(t,n)}}eo.LinkedMap=to;eo.LRUCache=class extends to{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=Zr.AsNew){return super.get(e,t)}peek(e){return super.get(e,Zr.None)}set(e,t){return super.set(e,t,Zr.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};var no,ro={};Object.defineProperty(ro,"__esModule",{value:!0}),ro.Disposable=void 0,(no||(ro.Disposable=no={})).create=function(e){return{dispose:e}};var oo={},io={};let so;function ao(){if(void 0===so)throw new Error("No runtime abstraction layer installed");return so}Object.defineProperty(io,"__esModule",{value:!0}),(ao||(ao={})).install=function(e){if(void 0===e)throw new Error("No runtime abstraction layer provided");so=e},io.default=ao,Object.defineProperty(oo,"__esModule",{value:!0}),oo.Emitter=oo.Event=void 0;const co=io;var lo;!function(e){const t={dispose(){}};e.None=function(){return t}}(lo||(oo.Event=lo={}));class uo{add(e,t=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks)return;let n=!1;for(let r=0,o=this._callbacks.length;r<o;r++)if(this._callbacks[r]===e){if(this._contexts[r]===t)return this._callbacks.splice(r,1),void this._contexts.splice(r,1);n=!0}if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];const t=[],n=this._callbacks.slice(0),r=this._contexts.slice(0);for(let i=0,s=n.length;i<s;i++)try{t.push(n[i].apply(r[i],e))}catch(o){(0,co.default)().console.error(o)}return t}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class ho{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,n)=>{this._callbacks||(this._callbacks=new uo),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t);const r={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,t),r.dispose=ho._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(n)&&n.push(r),r}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}oo.Emitter=ho,ho._noop=function(){};var fo={};Object.defineProperty(fo,"__esModule",{value:!0}),fo.CancellationTokenSource=fo.CancellationToken=void 0;const po=io,mo=Fr,go=oo;var vo,yo;(yo=vo||(fo.CancellationToken=vo={})).None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:go.Event.None}),yo.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:go.Event.None}),yo.is=function(e){const t=e;return t&&(t===yo.None||t===yo.Cancelled||mo.boolean(t.isCancellationRequested)&&!!t.onCancellationRequested)};const bo=Object.freeze((function(e,t){const n=(0,po.default)().timer.setTimeout(e.bind(t),0);return{dispose(){n.dispose()}}}));class wo{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?bo:(this._emitter||(this._emitter=new go.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}fo.CancellationTokenSource=class{get token(){return this._token||(this._token=new wo),this._token}cancel(){this._token?this._token.cancel():this._token=vo.Cancelled}dispose(){this._token?this._token instanceof wo&&this._token.dispose():this._token=vo.None}};var Co={};Object.defineProperty(Co,"__esModule",{value:!0}),Co.SharedArrayReceiverStrategy=Co.SharedArraySenderStrategy=void 0;const xo=fo;var ko,Ro;(Ro=ko||(ko={})).Continue=0,Ro.Cancelled=1;Co.SharedArraySenderStrategy=class{constructor(){this.buffers=new Map}enableCancellation(e){if(null===e.id)return;const t=new SharedArrayBuffer(4);new Int32Array(t,0,1)[0]=ko.Continue,this.buffers.set(e.id,t),e.$cancellationData=t}async sendCancellation(e,t){const n=this.buffers.get(t);if(void 0===n)return;const r=new Int32Array(n,0,1);Atomics.store(r,0,ko.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};class To{constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===ko.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}}class So{constructor(e){this.token=new To(e)}cancel(){}dispose(){}}Co.SharedArrayReceiverStrategy=class{constructor(){this.kind="request"}createCancellationTokenSource(e){const t=e.$cancellationData;return void 0===t?new xo.CancellationTokenSource:new So(t)}};var Mo={},Do={};Object.defineProperty(Do,"__esModule",{value:!0}),Do.Semaphore=void 0;const _o=io;Do.Semaphore=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise(((t,n)=>{this._waiting.push({thunk:e,resolve:t,reject:n}),this.runNext()}))}get active(){return this._active}runNext(){0!==this._waiting.length&&this._active!==this._capacity&&(0,_o.default)().timer.setImmediate((()=>this.doRunNext()))}doRunNext(){if(0===this._waiting.length||this._active===this._capacity)return;const e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{const t=e.thunk();t instanceof Promise?t.then((t=>{this._active--,e.resolve(t),this.runNext()}),(t=>{this._active--,e.reject(t),this.runNext()})):(this._active--,e.resolve(t),this.runNext())}catch(xd){this._active--,e.reject(xd),this.runNext()}}},Object.defineProperty(Mo,"__esModule",{value:!0}),Mo.ReadableStreamMessageReader=Mo.AbstractMessageReader=Mo.MessageReader=void 0;const Eo=io,Po=Fr,Oo=oo,No=Do;var jo,qo;(jo||(Mo.MessageReader=jo={})).is=function(e){let t=e;return t&&Po.func(t.listen)&&Po.func(t.dispose)&&Po.func(t.onError)&&Po.func(t.onClose)&&Po.func(t.onPartialMessage)};class Lo{constructor(){this.errorEmitter=new Oo.Emitter,this.closeEmitter=new Oo.Emitter,this.partialMessageEmitter=new Oo.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${Po.string(e.message)?e.message:"unknown"}`)}}Mo.AbstractMessageReader=Lo,(qo||(qo={})).fromOptions=function(e){let t,n;const r=new Map;let o;const i=new Map;if(void 0===e||"string"==typeof e)t=e??"utf-8";else{if(t=e.charset??"utf-8",void 0!==e.contentDecoder&&(n=e.contentDecoder,r.set(n.name,n)),void 0!==e.contentDecoders)for(const t of e.contentDecoders)r.set(t.name,t);if(void 0!==e.contentTypeDecoder&&(o=e.contentTypeDecoder,i.set(o.name,o)),void 0!==e.contentTypeDecoders)for(const t of e.contentTypeDecoders)i.set(t.name,t)}return void 0===o&&(o=(0,Eo.default)().applicationJson.decoder,i.set(o.name,o)),{charset:t,contentDecoder:n,contentDecoders:r,contentTypeDecoder:o,contentTypeDecoders:i}};Mo.ReadableStreamMessageReader=class extends Lo{constructor(e,t){super(),this.readable=e,this.options=qo.fromOptions(t),this.buffer=(0,Eo.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new No.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;const t=this.readable.onData((e=>{this.onData(e)}));return this.readable.onError((e=>this.fireError(e))),this.readable.onClose((()=>this.fireClose())),t}onData(e){try{for(this.buffer.append(e);;){if(-1===this.nextMessageLength){const e=this.buffer.tryReadHeaders(!0);if(!e)return;const t=e.get("content-length");if(!t)return void this.fireError(new Error(`Header must provide a Content-Length property.\n${JSON.stringify(Object.fromEntries(e))}`));const n=parseInt(t);if(isNaN(n))return void this.fireError(new Error(`Content-Length value must be a number. Got ${t}`));this.nextMessageLength=n}const e=this.buffer.tryReadBody(this.nextMessageLength);if(void 0===e)return void this.setPartialMessageTimer();this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock((async()=>{const t=void 0!==this.options.contentDecoder?await this.options.contentDecoder.decode(e):e,n=await this.options.contentTypeDecoder.decode(t,this.options);this.callback(n)})).catch((e=>{this.fireError(e)}))}}catch(t){this.fireError(t)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=(0,Eo.default)().timer.setTimeout(((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())}),this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};var Ao={};Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.WriteableStreamMessageWriter=Ao.AbstractMessageWriter=Ao.MessageWriter=void 0;const Io=io,Bo=Fr,Fo=Do,Wo=oo;var Ho,Ko;(Ho||(Ao.MessageWriter=Ho={})).is=function(e){let t=e;return t&&Bo.func(t.dispose)&&Bo.func(t.onClose)&&Bo.func(t.onError)&&Bo.func(t.write)};class Uo{constructor(){this.errorEmitter=new Wo.Emitter,this.closeEmitter=new Wo.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,n){this.errorEmitter.fire([this.asError(e),t,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${Bo.string(e.message)?e.message:"unknown"}`)}}Ao.AbstractMessageWriter=Uo,(Ko||(Ko={})).fromOptions=function(e){return void 0===e||"string"==typeof e?{charset:e??"utf-8",contentTypeEncoder:(0,Io.default)().applicationJson.encoder}:{charset:e.charset??"utf-8",contentEncoder:e.contentEncoder,contentTypeEncoder:e.contentTypeEncoder??(0,Io.default)().applicationJson.encoder}};Ao.WriteableStreamMessageWriter=class extends Uo{constructor(e,t){super(),this.writable=e,this.options=Ko.fromOptions(t),this.errorCount=0,this.writeSemaphore=new Fo.Semaphore(1),this.writable.onError((e=>this.fireError(e))),this.writable.onClose((()=>this.fireClose()))}async write(e){return this.writeSemaphore.lock((async()=>this.options.contentTypeEncoder.encode(e,this.options).then((e=>void 0!==this.options.contentEncoder?this.options.contentEncoder.encode(e):e)).then((t=>{const n=[];return n.push("Content-Length: ",t.byteLength.toString(),"\r\n"),n.push("\r\n"),this.doWrite(e,n,t)}),(e=>{throw this.fireError(e),e}))))}async doWrite(e,t,n){try{return await this.writable.write(t.join(""),"ascii"),this.writable.write(n)}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){this.writable.end()}};var Vo={};Object.defineProperty(Vo,"__esModule",{value:!0}),Vo.AbstractMessageBuffer=void 0;Vo.AbstractMessageBuffer=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){const t="string"==typeof e?this.fromString(e,this._encoding):e;this._chunks.push(t),this._totalLength+=t.byteLength}tryReadHeaders(e=!1){if(0===this._chunks.length)return;let t=0,n=0,r=0,o=0;e:for(;n<this._chunks.length;){const e=this._chunks[n];for(r=0;r<e.length;){switch(e[r]){case 13:switch(t){case 0:t=1;break;case 2:t=3;break;default:t=0}break;case 10:switch(t){case 1:t=2;break;case 3:t=4,r++;break e;default:t=0}break;default:t=0}r++}o+=e.byteLength,n++}if(4!==t)return;const i=this._read(o+r),s=new Map,a=this.toString(i,"ascii").split("\r\n");if(a.length<2)return s;for(let c=0;c<a.length-2;c++){const t=a[c],n=t.indexOf(":");if(-1===n)throw new Error(`Message header must separate key and value using ':'\n${t}`);const r=t.substr(0,n),o=t.substr(n+1).trim();s.set(e?r.toLowerCase():r,o)}return s}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(0===e)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){const t=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(t)}if(this._chunks[0].byteLength>e){const t=this._chunks[0],n=this.asNative(t,e);return this._chunks[0]=t.slice(e),this._totalLength-=e,n}const t=this.allocNative(e);let n=0;for(;e>0;){const r=this._chunks[0];if(r.byteLength>e){const o=r.slice(0,e);t.set(o,n),n+=e,this._chunks[0]=r.slice(e),this._totalLength-=e,e-=e}else t.set(r,n),n+=r.byteLength,this._chunks.shift(),this._totalLength-=r.byteLength,e-=r.byteLength}return t}};var $o={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createMessageConnection=e.ConnectionOptions=e.MessageStrategy=e.CancellationStrategy=e.CancellationSenderStrategy=e.CancellationReceiverStrategy=e.RequestCancellationReceiverStrategy=e.IdCancellationReceiverStrategy=e.ConnectionStrategy=e.ConnectionError=e.ConnectionErrors=e.LogTraceNotification=e.SetTraceNotification=e.TraceFormat=e.TraceValues=e.Trace=e.NullLogger=e.ProgressType=e.ProgressToken=void 0;const t=io,n=Fr,r=Br,o=eo,i=oo,s=fo;var a,c,l,u,d,h,f,p,m,g,v,y,b,w,C,x,k,R,T,S,M,D,_,E,P,O,N;(a||(a={})).type=new r.NotificationType("$/cancelRequest"),(c||(e.ProgressToken=c={})).is=function(e){return"string"==typeof e||"number"==typeof e},(l||(l={})).type=new r.NotificationType("$/progress");e.ProgressType=class{constructor(){}},(u||(u={})).is=function(e){return n.func(e)},e.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}}),(h=d||(e.Trace=d={}))[h.Off=0]="Off",h[h.Messages=1]="Messages",h[h.Compact=2]="Compact",h[h.Verbose=3]="Verbose",(p=f||(e.TraceValues=f={})).Off="off",p.Messages="messages",p.Compact="compact",p.Verbose="verbose",function(e){e.fromString=function(t){if(!n.string(t))return e.Off;switch(t=t.toLowerCase()){case"off":default:return e.Off;case"messages":return e.Messages;case"compact":return e.Compact;case"verbose":return e.Verbose}},e.toString=function(t){switch(t){case e.Off:return"off";case e.Messages:return"messages";case e.Compact:return"compact";case e.Verbose:return"verbose";default:return"off"}}}(d||(e.Trace=d={})),(g=m||(e.TraceFormat=m={})).Text="text",g.JSON="json",function(e){e.fromString=function(t){return n.string(t)&&"json"===(t=t.toLowerCase())?e.JSON:e.Text}}(m||(e.TraceFormat=m={})),(v||(e.SetTraceNotification=v={})).type=new r.NotificationType("$/setTrace"),(y||(e.LogTraceNotification=y={})).type=new r.NotificationType("$/logTrace"),(w=b||(e.ConnectionErrors=b={}))[w.Closed=1]="Closed",w[w.Disposed=2]="Disposed",w[w.AlreadyListening=3]="AlreadyListening";class j extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,j.prototype)}}e.ConnectionError=j,(C||(e.ConnectionStrategy=C={})).is=function(e){const t=e;return t&&n.func(t.cancelUndispatched)},(x||(e.IdCancellationReceiverStrategy=x={})).is=function(e){const t=e;return t&&(void 0===t.kind||"id"===t.kind)&&n.func(t.createCancellationTokenSource)&&(void 0===t.dispose||n.func(t.dispose))},(k||(e.RequestCancellationReceiverStrategy=k={})).is=function(e){const t=e;return t&&"request"===t.kind&&n.func(t.createCancellationTokenSource)&&(void 0===t.dispose||n.func(t.dispose))},(T=R||(e.CancellationReceiverStrategy=R={})).Message=Object.freeze({createCancellationTokenSource:e=>new s.CancellationTokenSource}),T.is=function(e){return x.is(e)||k.is(e)},(M=S||(e.CancellationSenderStrategy=S={})).Message=Object.freeze({sendCancellation:(e,t)=>e.sendNotification(a.type,{id:t}),cleanup(e){}}),M.is=function(e){const t=e;return t&&n.func(t.sendCancellation)&&n.func(t.cleanup)},(_=D||(e.CancellationStrategy=D={})).Message=Object.freeze({receiver:R.Message,sender:S.Message}),_.is=function(e){const t=e;return t&&R.is(t.receiver)&&S.is(t.sender)},(E||(e.MessageStrategy=E={})).is=function(e){const t=e;return t&&n.func(t.handleMessage)},(P||(e.ConnectionOptions=P={})).is=function(e){const t=e;return t&&(D.is(t.cancellationStrategy)||C.is(t.connectionStrategy)||E.is(t.messageStrategy))},(N=O||(O={}))[N.New=1]="New",N[N.Listening=2]="Listening",N[N.Closed=3]="Closed",N[N.Disposed=4]="Disposed",e.createMessageConnection=function(h,f,p,g){const w=void 0!==p?p:e.NullLogger;let C=0,k=0,R=0;const T="2.0";let S;const M=new Map;let _;const P=new Map,N=new Map;let q,L,A=new o.LinkedMap,I=new Map,B=new Set,F=new Map,W=d.Off,H=m.Text,K=O.New;const U=new i.Emitter,V=new i.Emitter,$=new i.Emitter,z=new i.Emitter,J=new i.Emitter,Q=g&&g.cancellationStrategy?g.cancellationStrategy:D.Message;function G(e){if(null===e)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+e.toString()}function X(e,t){var n;r.Message.isRequest(t)?e.set(G(t.id),t):r.Message.isResponse(t)?e.set(null===(n=t.id)?"res-unknown-"+(++R).toString():"res-"+n.toString(),t):e.set("not-"+(++k).toString(),t)}function Z(e){}function Y(){return K===O.Listening}function ee(){return K===O.Closed}function te(){return K===O.Disposed}function ne(){K!==O.New&&K!==O.Listening||(K=O.Closed,V.fire(void 0))}function re(){q||0===A.size||(q=(0,t.default)().timer.setImmediate((()=>{q=void 0,function(){if(0===A.size)return;const e=A.shift();try{const t=null==g?void 0:g.messageStrategy;E.is(t)?t.handleMessage(e,oe):oe(e)}finally{re()}}()})))}function oe(e){r.Message.isRequest(e)?function(e){if(te())return;function t(t,n,o){const i={jsonrpc:T,id:e.id};t instanceof r.ResponseError?i.error=t.toJson():i.result=void 0===t?null:t,ae(i,n,o),f.write(i).catch((()=>w.error("Sending response failed.")))}function o(t,n,r){const o={jsonrpc:T,id:e.id,error:t.toJson()};ae(o,n,r),f.write(o).catch((()=>w.error("Sending response failed.")))}function i(t,n,r){void 0===t&&(t=null);const o={jsonrpc:T,id:e.id,result:t};ae(o,n,r),f.write(o).catch((()=>w.error("Sending response failed.")))}!function(e){if(W===d.Off||!L)return;if(H===m.Text){let t;W!==d.Verbose&&W!==d.Compact||!e.params||(t=`Params: ${se(e.params)}\n\n`),L.log(`Received request '${e.method} - (${e.id})'.`,t)}else le("receive-request",e)}(e);const s=M.get(e.method);let a,c;s&&(a=s.type,c=s.handler);const l=Date.now();if(c||S){const s=e.id??String(Date.now()),d=x.is(Q.receiver)?Q.receiver.createCancellationTokenSource(s):Q.receiver.createCancellationTokenSource(e);null!==e.id&&B.has(e.id)&&d.cancel(),null!==e.id&&F.set(s,d);try{let u;if(c)if(void 0===e.params){if(void 0!==a&&0!==a.numberOfParams)return void o(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${e.method} defines ${a.numberOfParams} params but received none.`),e.method,l);u=c(d.token)}else if(Array.isArray(e.params)){if(void 0!==a&&a.parameterStructures===r.ParameterStructures.byName)return void o(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by name but received parameters by position`),e.method,l);u=c(...e.params,d.token)}else{if(void 0!==a&&a.parameterStructures===r.ParameterStructures.byPosition)return void o(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by position but received parameters by name`),e.method,l);u=c(e.params,d.token)}else S&&(u=S(e.method,e.params,d.token));const h=u;u?h.then?h.then((n=>{F.delete(s),t(n,e.method,l)}),(t=>{F.delete(s),t instanceof r.ResponseError?o(t,e.method,l):t&&n.string(t.message)?o(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,l):o(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,l)})):(F.delete(s),t(u,e.method,l)):(F.delete(s),i(u,e.method,l))}catch(u){F.delete(s),u instanceof r.ResponseError?t(u,e.method,l):u&&n.string(u.message)?o(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${u.message}`),e.method,l):o(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,l)}}else o(new r.ResponseError(r.ErrorCodes.MethodNotFound,`Unhandled method ${e.method}`),e.method,l)}(e):r.Message.isNotification(e)?function(e){if(te())return;let t,n;if(e.method===a.type.method){const t=e.params.id;return B.delete(t),void ce(e)}{const r=P.get(e.method);r&&(n=r.handler,t=r.type)}if(n||_)try{if(ce(e),n)if(void 0===e.params)void 0!==t&&0!==t.numberOfParams&&t.parameterStructures!==r.ParameterStructures.byName&&w.error(`Notification ${e.method} defines ${t.numberOfParams} params but received none.`),n();else if(Array.isArray(e.params)){const o=e.params;e.method===l.type.method&&2===o.length&&c.is(o[0])?n({token:o[0],value:o[1]}):(void 0!==t&&(t.parameterStructures===r.ParameterStructures.byName&&w.error(`Notification ${e.method} defines parameters by name but received parameters by position`),t.numberOfParams!==e.params.length&&w.error(`Notification ${e.method} defines ${t.numberOfParams} params but received ${o.length} arguments`)),n(...o))}else void 0!==t&&t.parameterStructures===r.ParameterStructures.byPosition&&w.error(`Notification ${e.method} defines parameters by position but received parameters by name`),n(e.params);else _&&_(e.method,e.params)}catch(o){o.message?w.error(`Notification handler '${e.method}' failed with message: ${o.message}`):w.error(`Notification handler '${e.method}' failed unexpectedly.`)}else $.fire(e)}(e):r.Message.isResponse(e)?function(e){if(te())return;if(null===e.id)e.error?w.error(`Received response message without id: Error is: \n${JSON.stringify(e.error,void 0,4)}`):w.error("Received response message without id. No further error information provided.");else{const n=e.id,o=I.get(n);if(function(e,t){if(W===d.Off||!L)return;if(H===m.Text){let n;if(W!==d.Verbose&&W!==d.Compact||(e.error&&e.error.data?n=`Error data: ${se(e.error.data)}\n\n`:e.result?n=`Result: ${se(e.result)}\n\n`:void 0===e.error&&(n="No result returned.\n\n")),t){const r=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:"";L.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${r}`,n)}else L.log(`Received response ${e.id} without active response promise.`,n)}else le("receive-response",e)}(e,o),void 0!==o){I.delete(n);try{if(e.error){const t=e.error;o.reject(new r.ResponseError(t.code,t.message,t.data))}else{if(void 0===e.result)throw new Error("Should never happen.");o.resolve(e.result)}}catch(t){t.message?w.error(`Response handler '${o.method}' failed with message: ${t.message}`):w.error(`Response handler '${o.method}' failed unexpectedly.`)}}}}(e):function(e){if(!e)return void w.error("Received empty message.");w.error(`Received message which is neither a response nor a notification message:\n${JSON.stringify(e,null,4)}`);const t=e;if(n.string(t.id)||n.number(t.id)){const e=t.id,n=I.get(e);n&&n.reject(new Error("The received response has neither a result nor an error property."))}}(e)}h.onClose(ne),h.onError((function(e){U.fire([e,void 0,void 0])})),f.onClose(ne),f.onError((function(e){U.fire(e)}));const ie=e=>{try{if(r.Message.isNotification(e)&&e.method===a.type.method){const t=e.params.id,n=G(t),o=A.get(n);if(r.Message.isRequest(o)){const r=null==g?void 0:g.connectionStrategy,i=r&&r.cancelUndispatched?r.cancelUndispatched(o,Z):void 0;if(i&&(void 0!==i.error||void 0!==i.result))return A.delete(n),F.delete(t),i.id=o.id,ae(i,e.method,Date.now()),void f.write(i).catch((()=>w.error("Sending response for canceled message failed.")))}const i=F.get(t);if(void 0!==i)return i.cancel(),void ce(e);B.add(t)}X(A,e)}finally{re()}};function se(e){if(null!=e)switch(W){case d.Verbose:return JSON.stringify(e,null,4);case d.Compact:return JSON.stringify(e);default:return}}function ae(e,t,n){if(W!==d.Off&&L)if(H===m.Text){let r;W!==d.Verbose&&W!==d.Compact||(e.error&&e.error.data?r=`Error data: ${se(e.error.data)}\n\n`:e.result?r=`Result: ${se(e.result)}\n\n`:void 0===e.error&&(r="No result returned.\n\n")),L.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-n}ms`,r)}else le("send-response",e)}function ce(e){if(W!==d.Off&&L&&e.method!==y.type.method)if(H===m.Text){let t;W!==d.Verbose&&W!==d.Compact||(t=e.params?`Params: ${se(e.params)}\n\n`:"No parameters provided.\n\n"),L.log(`Received notification '${e.method}'.`,t)}else le("receive-notification",e)}function le(e,t){if(!L||W===d.Off)return;const n={isLSPMessage:!0,type:e,message:t,timestamp:Date.now()};L.log(n)}function ue(){if(ee())throw new j(b.Closed,"Connection is closed.");if(te())throw new j(b.Disposed,"Connection is disposed.")}function de(e){return void 0===e?null:e}function he(e){return null===e?void 0:e}function fe(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}function pe(e,t){switch(e){case r.ParameterStructures.auto:return fe(t)?he(t):[de(t)];case r.ParameterStructures.byName:if(!fe(t))throw new Error("Received parameters by name but param is not an object literal.");return he(t);case r.ParameterStructures.byPosition:return[de(t)];default:throw new Error(`Unknown parameter structure ${e.toString()}`)}}function me(e,t){let n;const r=e.numberOfParams;switch(r){case 0:n=void 0;break;case 1:n=pe(e.parameterStructures,t[0]);break;default:n=[];for(let e=0;e<t.length&&e<r;e++)n.push(de(t[e]));if(t.length<r)for(let e=t.length;e<r;e++)n.push(null)}return n}const ge={sendNotification:(e,...t)=>{let o,i;if(ue(),n.string(e)){o=e;const n=t[0];let s=0,a=r.ParameterStructures.auto;r.ParameterStructures.is(n)&&(s=1,a=n);let c=t.length;const l=c-s;switch(l){case 0:i=void 0;break;case 1:i=pe(a,t[s]);break;default:if(a===r.ParameterStructures.byName)throw new Error(`Received ${l} parameters for 'by Name' notification parameter structure.`);i=t.slice(s,c).map((e=>de(e)))}}else{const n=t;o=e.method,i=me(e,n)}const s={jsonrpc:T,method:o,params:i};return function(e){if(W!==d.Off&&L)if(H===m.Text){let t;W!==d.Verbose&&W!==d.Compact||(t=e.params?`Params: ${se(e.params)}\n\n`:"No parameters provided.\n\n"),L.log(`Sending notification '${e.method}'.`,t)}else le("send-notification",e)}(s),f.write(s).catch((e=>{throw w.error("Sending notification failed."),e}))},onNotification:(e,t)=>{let r;return ue(),n.func(e)?_=e:t&&(n.string(e)?(r=e,P.set(e,{type:void 0,handler:t})):(r=e.method,P.set(e.method,{type:e,handler:t}))),{dispose:()=>{void 0!==r?P.delete(r):_=void 0}}},onProgress:(e,t,n)=>{if(N.has(t))throw new Error(`Progress handler for token ${t} already registered`);return N.set(t,n),{dispose:()=>{N.delete(t)}}},sendProgress:(e,t,n)=>ge.sendNotification(l.type,{token:t,value:n}),onUnhandledProgress:z.event,sendRequest:(e,...t)=>{let o,i,a;if(ue(),function(){if(!Y())throw new Error("Call listen() first.")}(),n.string(e)){o=e;const n=t[0],c=t[t.length-1];let l=0,u=r.ParameterStructures.auto;r.ParameterStructures.is(n)&&(l=1,u=n);let d=t.length;s.CancellationToken.is(c)&&(d-=1,a=c);const h=d-l;switch(h){case 0:i=void 0;break;case 1:i=pe(u,t[l]);break;default:if(u===r.ParameterStructures.byName)throw new Error(`Received ${h} parameters for 'by Name' request parameter structure.`);i=t.slice(l,d).map((e=>de(e)))}}else{const n=t;o=e.method,i=me(e,n);const r=e.numberOfParams;a=s.CancellationToken.is(n[r])?n[r]:void 0}const c=C++;let l;a&&(l=a.onCancellationRequested((()=>{const e=Q.sender.sendCancellation(ge,c);return void 0===e?(w.log(`Received no promise from cancellation strategy when cancelling id ${c}`),Promise.resolve()):e.catch((()=>{w.log(`Sending cancellation messages for id ${c} failed`)}))})));const u={jsonrpc:T,id:c,method:o,params:i};return function(e){if(W!==d.Off&&L)if(H===m.Text){let t;W!==d.Verbose&&W!==d.Compact||!e.params||(t=`Params: ${se(e.params)}\n\n`),L.log(`Sending request '${e.method} - (${e.id})'.`,t)}else le("send-request",e)}(u),"function"==typeof Q.sender.enableCancellation&&Q.sender.enableCancellation(u),new Promise((async(e,t)=>{const n={method:o,timerStart:Date.now(),resolve:t=>{e(t),Q.sender.cleanup(c),null==l||l.dispose()},reject:e=>{t(e),Q.sender.cleanup(c),null==l||l.dispose()}};try{await f.write(u),I.set(c,n)}catch(i){throw w.error("Sending request failed."),n.reject(new r.ResponseError(r.ErrorCodes.MessageWriteError,i.message?i.message:"Unknown reason")),i}}))},onRequest:(e,t)=>{ue();let r=null;return u.is(e)?(r=void 0,S=e):n.string(e)?(r=null,void 0!==t&&(r=e,M.set(e,{handler:t,type:void 0}))):void 0!==t&&(r=e.method,M.set(e.method,{type:e,handler:t})),{dispose:()=>{null!==r&&(void 0!==r?M.delete(r):S=void 0)}}},hasPendingResponse:()=>I.size>0,trace:async(e,t,r)=>{let o=!1,i=m.Text;void 0!==r&&(n.boolean(r)?o=r:(o=r.sendNotification||!1,i=r.traceFormat||m.Text)),W=e,H=i,L=W===d.Off?void 0:t,!o||ee()||te()||await ge.sendNotification(v.type,{value:d.toString(e)})},onError:U.event,onClose:V.event,onUnhandledNotification:$.event,onDispose:J.event,end:()=>{f.end()},dispose:()=>{if(te())return;K=O.Disposed,J.fire(void 0);const e=new r.ResponseError(r.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(const t of I.values())t.reject(e);I=new Map,F=new Map,B=new Set,A=new o.LinkedMap,n.func(f.dispose)&&f.dispose(),n.func(h.dispose)&&h.dispose()},listen:()=>{ue(),function(){if(Y())throw new j(b.AlreadyListening,"Connection is already listening")}(),K=O.Listening,h.listen(ie)},inspect:()=>{(0,t.default)().console.log("inspect")}};return ge.onNotification(y.type,(e=>{if(W===d.Off||!L)return;const t=W===d.Verbose||W===d.Compact;L.log(e.message,t?e.verbose:void 0)})),ge.onNotification(l.type,(e=>{const t=N.get(e.token);t?t(e.value):z.fire(e)})),ge}}($o),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ProgressType=e.ProgressToken=e.createMessageConnection=e.NullLogger=e.ConnectionOptions=e.ConnectionStrategy=e.AbstractMessageBuffer=e.WriteableStreamMessageWriter=e.AbstractMessageWriter=e.MessageWriter=e.ReadableStreamMessageReader=e.AbstractMessageReader=e.MessageReader=e.SharedArrayReceiverStrategy=e.SharedArraySenderStrategy=e.CancellationToken=e.CancellationTokenSource=e.Emitter=e.Event=e.Disposable=e.LRUCache=e.Touch=e.LinkedMap=e.ParameterStructures=e.NotificationType9=e.NotificationType8=e.NotificationType7=e.NotificationType6=e.NotificationType5=e.NotificationType4=e.NotificationType3=e.NotificationType2=e.NotificationType1=e.NotificationType0=e.NotificationType=e.ErrorCodes=e.ResponseError=e.RequestType9=e.RequestType8=e.RequestType7=e.RequestType6=e.RequestType5=e.RequestType4=e.RequestType3=e.RequestType2=e.RequestType1=e.RequestType0=e.RequestType=e.Message=e.RAL=void 0,e.MessageStrategy=e.CancellationStrategy=e.CancellationSenderStrategy=e.CancellationReceiverStrategy=e.ConnectionError=e.ConnectionErrors=e.LogTraceNotification=e.SetTraceNotification=e.TraceFormat=e.TraceValues=e.Trace=void 0;const t=Br;Object.defineProperty(e,"Message",{enumerable:!0,get:function(){return t.Message}}),Object.defineProperty(e,"RequestType",{enumerable:!0,get:function(){return t.RequestType}}),Object.defineProperty(e,"RequestType0",{enumerable:!0,get:function(){return t.RequestType0}}),Object.defineProperty(e,"RequestType1",{enumerable:!0,get:function(){return t.RequestType1}}),Object.defineProperty(e,"RequestType2",{enumerable:!0,get:function(){return t.RequestType2}}),Object.defineProperty(e,"RequestType3",{enumerable:!0,get:function(){return t.RequestType3}}),Object.defineProperty(e,"RequestType4",{enumerable:!0,get:function(){return t.RequestType4}}),Object.defineProperty(e,"RequestType5",{enumerable:!0,get:function(){return t.RequestType5}}),Object.defineProperty(e,"RequestType6",{enumerable:!0,get:function(){return t.RequestType6}}),Object.defineProperty(e,"RequestType7",{enumerable:!0,get:function(){return t.RequestType7}}),Object.defineProperty(e,"RequestType8",{enumerable:!0,get:function(){return t.RequestType8}}),Object.defineProperty(e,"RequestType9",{enumerable:!0,get:function(){return t.RequestType9}}),Object.defineProperty(e,"ResponseError",{enumerable:!0,get:function(){return t.ResponseError}}),Object.defineProperty(e,"ErrorCodes",{enumerable:!0,get:function(){return t.ErrorCodes}}),Object.defineProperty(e,"NotificationType",{enumerable:!0,get:function(){return t.NotificationType}}),Object.defineProperty(e,"NotificationType0",{enumerable:!0,get:function(){return t.NotificationType0}}),Object.defineProperty(e,"NotificationType1",{enumerable:!0,get:function(){return t.NotificationType1}}),Object.defineProperty(e,"NotificationType2",{enumerable:!0,get:function(){return t.NotificationType2}}),Object.defineProperty(e,"NotificationType3",{enumerable:!0,get:function(){return t.NotificationType3}}),Object.defineProperty(e,"NotificationType4",{enumerable:!0,get:function(){return t.NotificationType4}}),Object.defineProperty(e,"NotificationType5",{enumerable:!0,get:function(){return t.NotificationType5}}),Object.defineProperty(e,"NotificationType6",{enumerable:!0,get:function(){return t.NotificationType6}}),Object.defineProperty(e,"NotificationType7",{enumerable:!0,get:function(){return t.NotificationType7}}),Object.defineProperty(e,"NotificationType8",{enumerable:!0,get:function(){return t.NotificationType8}}),Object.defineProperty(e,"NotificationType9",{enumerable:!0,get:function(){return t.NotificationType9}}),Object.defineProperty(e,"ParameterStructures",{enumerable:!0,get:function(){return t.ParameterStructures}});const n=eo;Object.defineProperty(e,"LinkedMap",{enumerable:!0,get:function(){return n.LinkedMap}}),Object.defineProperty(e,"LRUCache",{enumerable:!0,get:function(){return n.LRUCache}}),Object.defineProperty(e,"Touch",{enumerable:!0,get:function(){return n.Touch}});const r=ro;Object.defineProperty(e,"Disposable",{enumerable:!0,get:function(){return r.Disposable}});const o=oo;Object.defineProperty(e,"Event",{enumerable:!0,get:function(){return o.Event}}),Object.defineProperty(e,"Emitter",{enumerable:!0,get:function(){return o.Emitter}});const i=fo;Object.defineProperty(e,"CancellationTokenSource",{enumerable:!0,get:function(){return i.CancellationTokenSource}}),Object.defineProperty(e,"CancellationToken",{enumerable:!0,get:function(){return i.CancellationToken}});const s=Co;Object.defineProperty(e,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return s.SharedArraySenderStrategy}}),Object.defineProperty(e,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return s.SharedArrayReceiverStrategy}});const a=Mo;Object.defineProperty(e,"MessageReader",{enumerable:!0,get:function(){return a.MessageReader}}),Object.defineProperty(e,"AbstractMessageReader",{enumerable:!0,get:function(){return a.AbstractMessageReader}}),Object.defineProperty(e,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return a.ReadableStreamMessageReader}});const c=Ao;Object.defineProperty(e,"MessageWriter",{enumerable:!0,get:function(){return c.MessageWriter}}),Object.defineProperty(e,"AbstractMessageWriter",{enumerable:!0,get:function(){return c.AbstractMessageWriter}}),Object.defineProperty(e,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return c.WriteableStreamMessageWriter}});const l=Vo;Object.defineProperty(e,"AbstractMessageBuffer",{enumerable:!0,get:function(){return l.AbstractMessageBuffer}});const u=$o;Object.defineProperty(e,"ConnectionStrategy",{enumerable:!0,get:function(){return u.ConnectionStrategy}}),Object.defineProperty(e,"ConnectionOptions",{enumerable:!0,get:function(){return u.ConnectionOptions}}),Object.defineProperty(e,"NullLogger",{enumerable:!0,get:function(){return u.NullLogger}}),Object.defineProperty(e,"createMessageConnection",{enumerable:!0,get:function(){return u.createMessageConnection}}),Object.defineProperty(e,"ProgressToken",{enumerable:!0,get:function(){return u.ProgressToken}}),Object.defineProperty(e,"ProgressType",{enumerable:!0,get:function(){return u.ProgressType}}),Object.defineProperty(e,"Trace",{enumerable:!0,get:function(){return u.Trace}}),Object.defineProperty(e,"TraceValues",{enumerable:!0,get:function(){return u.TraceValues}}),Object.defineProperty(e,"TraceFormat",{enumerable:!0,get:function(){return u.TraceFormat}}),Object.defineProperty(e,"SetTraceNotification",{enumerable:!0,get:function(){return u.SetTraceNotification}}),Object.defineProperty(e,"LogTraceNotification",{enumerable:!0,get:function(){return u.LogTraceNotification}}),Object.defineProperty(e,"ConnectionErrors",{enumerable:!0,get:function(){return u.ConnectionErrors}}),Object.defineProperty(e,"ConnectionError",{enumerable:!0,get:function(){return u.ConnectionError}}),Object.defineProperty(e,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return u.CancellationReceiverStrategy}}),Object.defineProperty(e,"CancellationSenderStrategy",{enumerable:!0,get:function(){return u.CancellationSenderStrategy}}),Object.defineProperty(e,"CancellationStrategy",{enumerable:!0,get:function(){return u.CancellationStrategy}}),Object.defineProperty(e,"MessageStrategy",{enumerable:!0,get:function(){return u.MessageStrategy}});const d=io;e.RAL=d.default}(Ir),Object.defineProperty(Ar,"__esModule",{value:!0});const zo=Ir;class Jo extends zo.AbstractMessageBuffer{constructor(e="utf-8"){super(e),this.asciiDecoder=new TextDecoder("ascii")}emptyBuffer(){return Jo.emptyBuffer}fromString(e,t){return(new TextEncoder).encode(e)}toString(e,t){return"ascii"===t?this.asciiDecoder.decode(e):new TextDecoder(t).decode(e)}asNative(e,t){return void 0===t?e:e.slice(0,t)}allocNative(e){return new Uint8Array(e)}}Jo.emptyBuffer=new Uint8Array(0);class Qo{constructor(e){this.socket=e,this._onData=new zo.Emitter,this._messageListener=e=>{e.data.arrayBuffer().then((e=>{this._onData.fire(new Uint8Array(e))}),(()=>{(0,zo.RAL)().console.error("Converting blob to array buffer failed.")}))},this.socket.addEventListener("message",this._messageListener)}onClose(e){return this.socket.addEventListener("close",e),zo.Disposable.create((()=>this.socket.removeEventListener("close",e)))}onError(e){return this.socket.addEventListener("error",e),zo.Disposable.create((()=>this.socket.removeEventListener("error",e)))}onEnd(e){return this.socket.addEventListener("end",e),zo.Disposable.create((()=>this.socket.removeEventListener("end",e)))}onData(e){return this._onData.event(e)}}class Go{constructor(e){this.socket=e}onClose(e){return this.socket.addEventListener("close",e),zo.Disposable.create((()=>this.socket.removeEventListener("close",e)))}onError(e){return this.socket.addEventListener("error",e),zo.Disposable.create((()=>this.socket.removeEventListener("error",e)))}onEnd(e){return this.socket.addEventListener("end",e),zo.Disposable.create((()=>this.socket.removeEventListener("end",e)))}write(e,t){if("string"==typeof e){if(void 0!==t&&"utf-8"!==t)throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${t}`);this.socket.send(e)}else this.socket.send(e);return Promise.resolve()}end(){this.socket.close()}}const Xo=new TextEncoder,Zo=Object.freeze({messageBuffer:Object.freeze({create:e=>new Jo(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>{if("utf-8"!==t.charset)throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${t.charset}`);return Promise.resolve(Xo.encode(JSON.stringify(e,void 0,0)))}}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>{if(!(e instanceof Uint8Array))throw new Error("In a Browser environments only Uint8Arrays are supported.");return Promise.resolve(JSON.parse(new TextDecoder(t.charset).decode(e)))}})}),stream:Object.freeze({asReadableStream:e=>new Qo(e),asWritableStream:e=>new Go(e)}),console:console,timer:Object.freeze({setTimeout(e,t,...n){const r=setTimeout(e,t,...n);return{dispose:()=>clearTimeout(r)}},setImmediate(e,...t){const n=setTimeout(e,0,...t);return{dispose:()=>clearTimeout(n)}},setInterval(e,t,...n){const r=setInterval(e,t,...n);return{dispose:()=>clearInterval(r)}}})});function Yo(){return Zo}(Yo||(Yo={})).install=function(){zo.RAL.install(Zo)},Ar.default=Yo,function(e){var t=Y&&Y.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=Y&&Y.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.createMessageConnection=e.BrowserMessageWriter=e.BrowserMessageReader=void 0;Ar.default.install();const r=Ir;n(Ir,e);class o extends r.AbstractMessageReader{constructor(e){super(),this._onData=new r.Emitter,this._messageListener=e=>{this._onData.fire(e.data)},e.addEventListener("error",(e=>this.fireError(e))),e.onmessage=this._messageListener}listen(e){return this._onData.event(e)}}e.BrowserMessageReader=o;class i extends r.AbstractMessageWriter{constructor(e){super(),this.port=e,this.errorCount=0,e.addEventListener("error",(e=>this.fireError(e)))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}}e.BrowserMessageWriter=i,e.createMessageConnection=function(e,t,n,o){return void 0===n&&(n=r.NullLogger),r.ConnectionStrategy.is(o)&&(o={connectionStrategy:o}),(0,r.createMessageConnection)(e,t,n,o)}}(Lr);var ei,ti,ni,ri,oi,ii,si,ai,ci,li,ui,di,hi,fi,pi,mi,gi,vi,yi,bi,wi,Ci,xi,ki,Ri,Ti,Si,Mi,Di,_i,Ei,Pi,Oi,Ni,ji,qi,Li,Ai,Ii,Bi,Fi,Wi,Hi,Ki,Ui,Vi,$i,zi,Ji,Qi,Gi,Xi,Zi,Yi,es,ts,ns,rs,os,is,ss,as,cs,ls,us,ds,hs,fs,ps,ms,gs,vs,ys,bs,ws,Cs,xs,ks,Rs,Ts,Ss,Ms,Ds,_s,Es,Ps,Os,Ns,js,qs,Ls,As,Is,Bs,Fs,Ws,Hs,Ks,Us,Vs,$s,zs,Js,Qs,Gs,Xs,Zs,Ys,ea,ta,na,ra,oa,ia,sa,aa,ca,la,ua,da,ha,fa,pa,ma,ga,va,ya,ba,wa,Ca,xa,ka,Ra=Lr,Ta={};(ei||(ei={})).is=function(e){return"string"==typeof e},(ti||(ti={})).is=function(e){return"string"==typeof e},(ri=ni||(ni={})).MIN_VALUE=-2147483648,ri.MAX_VALUE=2147483647,ri.is=function(e){return"number"==typeof e&&ri.MIN_VALUE<=e&&e<=ri.MAX_VALUE},(ii=oi||(oi={})).MIN_VALUE=0,ii.MAX_VALUE=2147483647,ii.is=function(e){return"number"==typeof e&&ii.MIN_VALUE<=e&&e<=ii.MAX_VALUE},(ai=si||(si={})).create=function(e,t){return e===Number.MAX_VALUE&&(e=oi.MAX_VALUE),t===Number.MAX_VALUE&&(t=oi.MAX_VALUE),{line:e,character:t}},ai.is=function(e){let t=e;return _a.objectLiteral(t)&&_a.uinteger(t.line)&&_a.uinteger(t.character)},(li=ci||(ci={})).create=function(e,t,n,r){if(_a.uinteger(e)&&_a.uinteger(t)&&_a.uinteger(n)&&_a.uinteger(r))return{start:si.create(e,t),end:si.create(n,r)};if(si.is(e)&&si.is(t))return{start:e,end:t};throw new Error(`Range#create called with invalid arguments[${e}, ${t}, ${n}, ${r}]`)},li.is=function(e){let t=e;return _a.objectLiteral(t)&&si.is(t.start)&&si.is(t.end)},(di=ui||(ui={})).create=function(e,t){return{uri:e,range:t}},di.is=function(e){let t=e;return _a.objectLiteral(t)&&ci.is(t.range)&&(_a.string(t.uri)||_a.undefined(t.uri))},(fi=hi||(hi={})).create=function(e,t,n,r){return{targetUri:e,targetRange:t,targetSelectionRange:n,originSelectionRange:r}},fi.is=function(e){let t=e;return _a.objectLiteral(t)&&ci.is(t.targetRange)&&_a.string(t.targetUri)&&ci.is(t.targetSelectionRange)&&(ci.is(t.originSelectionRange)||_a.undefined(t.originSelectionRange))},(mi=pi||(pi={})).create=function(e,t,n,r){return{red:e,green:t,blue:n,alpha:r}},mi.is=function(e){const t=e;return _a.objectLiteral(t)&&_a.numberRange(t.red,0,1)&&_a.numberRange(t.green,0,1)&&_a.numberRange(t.blue,0,1)&&_a.numberRange(t.alpha,0,1)},(vi=gi||(gi={})).create=function(e,t){return{range:e,color:t}},vi.is=function(e){const t=e;return _a.objectLiteral(t)&&ci.is(t.range)&&pi.is(t.color)},(bi=yi||(yi={})).create=function(e,t,n){return{label:e,textEdit:t,additionalTextEdits:n}},bi.is=function(e){const t=e;return _a.objectLiteral(t)&&_a.string(t.label)&&(_a.undefined(t.textEdit)||qi.is(t))&&(_a.undefined(t.additionalTextEdits)||_a.typedArray(t.additionalTextEdits,qi.is))},(Ci=wi||(wi={})).Comment="comment",Ci.Imports="imports",Ci.Region="region",(ki=xi||(xi={})).create=function(e,t,n,r,o,i){const s={startLine:e,endLine:t};return _a.defined(n)&&(s.startCharacter=n),_a.defined(r)&&(s.endCharacter=r),_a.defined(o)&&(s.kind=o),_a.defined(i)&&(s.collapsedText=i),s},ki.is=function(e){const t=e;return _a.objectLiteral(t)&&_a.uinteger(t.startLine)&&_a.uinteger(t.startLine)&&(_a.undefined(t.startCharacter)||_a.uinteger(t.startCharacter))&&(_a.undefined(t.endCharacter)||_a.uinteger(t.endCharacter))&&(_a.undefined(t.kind)||_a.string(t.kind))},(Ti=Ri||(Ri={})).create=function(e,t){return{location:e,message:t}},Ti.is=function(e){let t=e;return _a.defined(t)&&ui.is(t.location)&&_a.string(t.message)},(Mi=Si||(Si={})).Error=1,Mi.Warning=2,Mi.Information=3,Mi.Hint=4,(_i=Di||(Di={})).Unnecessary=1,_i.Deprecated=2,(Ei||(Ei={})).is=function(e){const t=e;return _a.objectLiteral(t)&&_a.string(t.href)},(Oi=Pi||(Pi={})).create=function(e,t,n,r,o,i){let s={range:e,message:t};return _a.defined(n)&&(s.severity=n),_a.defined(r)&&(s.code=r),_a.defined(o)&&(s.source=o),_a.defined(i)&&(s.relatedInformation=i),s},Oi.is=function(e){var t;let n=e;return _a.defined(n)&&ci.is(n.range)&&_a.string(n.message)&&(_a.number(n.severity)||_a.undefined(n.severity))&&(_a.integer(n.code)||_a.string(n.code)||_a.undefined(n.code))&&(_a.undefined(n.codeDescription)||_a.string(null===(t=n.codeDescription)||void 0===t?void 0:t.href))&&(_a.string(n.source)||_a.undefined(n.source))&&(_a.undefined(n.relatedInformation)||_a.typedArray(n.relatedInformation,Ri.is))},(ji=Ni||(Ni={})).create=function(e,t,...n){let r={title:e,command:t};return _a.defined(n)&&n.length>0&&(r.arguments=n),r},ji.is=function(e){let t=e;return _a.defined(t)&&_a.string(t.title)&&_a.string(t.command)},(Li=qi||(qi={})).replace=function(e,t){return{range:e,newText:t}},Li.insert=function(e,t){return{range:{start:e,end:e},newText:t}},Li.del=function(e){return{range:e,newText:""}},Li.is=function(e){const t=e;return _a.objectLiteral(t)&&_a.string(t.newText)&&ci.is(t.range)},(Ii=Ai||(Ai={})).create=function(e,t,n){const r={label:e};return void 0!==t&&(r.needsConfirmation=t),void 0!==n&&(r.description=n),r},Ii.is=function(e){const t=e;return _a.objectLiteral(t)&&_a.string(t.label)&&(_a.boolean(t.needsConfirmation)||void 0===t.needsConfirmation)&&(_a.string(t.description)||void 0===t.description)},(Bi||(Bi={})).is=function(e){const t=e;return _a.string(t)},(Wi=Fi||(Fi={})).replace=function(e,t,n){return{range:e,newText:t,annotationId:n}},Wi.insert=function(e,t,n){return{range:{start:e,end:e},newText:t,annotationId:n}},Wi.del=function(e,t){return{range:e,newText:"",annotationId:t}},Wi.is=function(e){const t=e;return qi.is(t)&&(Ai.is(t.annotationId)||Bi.is(t.annotationId))},(Ki=Hi||(Hi={})).create=function(e,t){return{textDocument:e,edits:t}},Ki.is=function(e){let t=e;return _a.defined(t)&&ts.is(t.textDocument)&&Array.isArray(t.edits)},(Vi=Ui||(Ui={})).create=function(e,t,n){let r={kind:"create",uri:e};return void 0===t||void 0===t.overwrite&&void 0===t.ignoreIfExists||(r.options=t),void 0!==n&&(r.annotationId=n),r},Vi.is=function(e){let t=e;return t&&"create"===t.kind&&_a.string(t.uri)&&(void 0===t.options||(void 0===t.options.overwrite||_a.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||_a.boolean(t.options.ignoreIfExists)))&&(void 0===t.annotationId||Bi.is(t.annotationId))},(zi=$i||($i={})).create=function(e,t,n,r){let o={kind:"rename",oldUri:e,newUri:t};return void 0===n||void 0===n.overwrite&&void 0===n.ignoreIfExists||(o.options=n),void 0!==r&&(o.annotationId=r),o},zi.is=function(e){let t=e;return t&&"rename"===t.kind&&_a.string(t.oldUri)&&_a.string(t.newUri)&&(void 0===t.options||(void 0===t.options.overwrite||_a.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||_a.boolean(t.options.ignoreIfExists)))&&(void 0===t.annotationId||Bi.is(t.annotationId))},(Qi=Ji||(Ji={})).create=function(e,t,n){let r={kind:"delete",uri:e};return void 0===t||void 0===t.recursive&&void 0===t.ignoreIfNotExists||(r.options=t),void 0!==n&&(r.annotationId=n),r},Qi.is=function(e){let t=e;return t&&"delete"===t.kind&&_a.string(t.uri)&&(void 0===t.options||(void 0===t.options.recursive||_a.boolean(t.options.recursive))&&(void 0===t.options.ignoreIfNotExists||_a.boolean(t.options.ignoreIfNotExists)))&&(void 0===t.annotationId||Bi.is(t.annotationId))},(Gi||(Gi={})).is=function(e){let t=e;return t&&(void 0!==t.changes||void 0!==t.documentChanges)&&(void 0===t.documentChanges||t.documentChanges.every((e=>_a.string(e.kind)?Ui.is(e)||$i.is(e)||Ji.is(e):Hi.is(e))))};class Sa{constructor(e,t){this.edits=e,this.changeAnnotations=t}insert(e,t,n){let r,o;if(void 0===n?r=qi.insert(e,t):Bi.is(n)?(o=n,r=Fi.insert(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(n),r=Fi.insert(e,t,o)),this.edits.push(r),void 0!==o)return o}replace(e,t,n){let r,o;if(void 0===n?r=qi.replace(e,t):Bi.is(n)?(o=n,r=Fi.replace(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(n),r=Fi.replace(e,t,o)),this.edits.push(r),void 0!==o)return o}delete(e,t){let n,r;if(void 0===t?n=qi.del(e):Bi.is(t)?(r=t,n=Fi.del(e,t)):(this.assertChangeAnnotations(this.changeAnnotations),r=this.changeAnnotations.manage(t),n=Fi.del(e,r)),this.edits.push(n),void 0!==r)return r}add(e){this.edits.push(e)}all(){return this.edits}clear(){this.edits.splice(0,this.edits.length)}assertChangeAnnotations(e){if(void 0===e)throw new Error("Text edit change is not configured to manage change annotations.")}}class Ma{constructor(e){this._annotations=void 0===e?Object.create(null):e,this._counter=0,this._size=0}all(){return this._annotations}get size(){return this._size}manage(e,t){let n;if(Bi.is(e)?n=e:(n=this.nextId(),t=e),void 0!==this._annotations[n])throw new Error(`Id ${n} is already in use.`);if(void 0===t)throw new Error(`No annotation provided for id ${n}`);return this._annotations[n]=t,this._size++,n}nextId(){return this._counter++,this._counter.toString()}}(Zi=Xi||(Xi={})).create=function(e){return{uri:e}},Zi.is=function(e){let t=e;return _a.defined(t)&&_a.string(t.uri)},(es=Yi||(Yi={})).create=function(e,t){return{uri:e,version:t}},es.is=function(e){let t=e;return _a.defined(t)&&_a.string(t.uri)&&_a.integer(t.version)},(ns=ts||(ts={})).create=function(e,t){return{uri:e,version:t}},ns.is=function(e){let t=e;return _a.defined(t)&&_a.string(t.uri)&&(null===t.version||_a.integer(t.version))},(os=rs||(rs={})).create=function(e,t,n,r){return{uri:e,languageId:t,version:n,text:r}},os.is=function(e){let t=e;return _a.defined(t)&&_a.string(t.uri)&&_a.string(t.languageId)&&_a.integer(t.version)&&_a.string(t.text)},(ss=is||(is={})).PlainText="plaintext",ss.Markdown="markdown",ss.is=function(e){const t=e;return t===ss.PlainText||t===ss.Markdown},(as||(as={})).is=function(e){const t=e;return _a.objectLiteral(e)&&is.is(t.kind)&&_a.string(t.value)},(ls=cs||(cs={})).Text=1,ls.Method=2,ls.Function=3,ls.Constructor=4,ls.Field=5,ls.Variable=6,ls.Class=7,ls.Interface=8,ls.Module=9,ls.Property=10,ls.Unit=11,ls.Value=12,ls.Enum=13,ls.Keyword=14,ls.Snippet=15,ls.Color=16,ls.File=17,ls.Reference=18,ls.Folder=19,ls.EnumMember=20,ls.Constant=21,ls.Struct=22,ls.Event=23,ls.Operator=24,ls.TypeParameter=25,(ds=us||(us={})).PlainText=1,ds.Snippet=2,(hs||(hs={})).Deprecated=1,(ps=fs||(fs={})).create=function(e,t,n){return{newText:e,insert:t,replace:n}},ps.is=function(e){const t=e;return t&&_a.string(t.newText)&&ci.is(t.insert)&&ci.is(t.replace)},(gs=ms||(ms={})).asIs=1,gs.adjustIndentation=2,(vs||(vs={})).is=function(e){const t=e;return t&&(_a.string(t.detail)||void 0===t.detail)&&(_a.string(t.description)||void 0===t.description)},(ys||(ys={})).create=function(e){return{label:e}},(bs||(bs={})).create=function(e,t){return{items:e||[],isIncomplete:!!t}},(Cs=ws||(ws={})).fromPlainText=function(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},Cs.is=function(e){const t=e;return _a.string(t)||_a.objectLiteral(t)&&_a.string(t.language)&&_a.string(t.value)},(xs||(xs={})).is=function(e){let t=e;return!!t&&_a.objectLiteral(t)&&(as.is(t.contents)||ws.is(t.contents)||_a.typedArray(t.contents,ws.is))&&(void 0===e.range||ci.is(e.range))},(ks||(ks={})).create=function(e,t){return t?{label:e,documentation:t}:{label:e}},(Rs||(Rs={})).create=function(e,t,...n){let r={label:e};return _a.defined(t)&&(r.documentation=t),_a.defined(n)?r.parameters=n:r.parameters=[],r},(Ss=Ts||(Ts={})).Text=1,Ss.Read=2,Ss.Write=3,(Ms||(Ms={})).create=function(e,t){let n={range:e};return _a.number(t)&&(n.kind=t),n},(_s=Ds||(Ds={})).File=1,_s.Module=2,_s.Namespace=3,_s.Package=4,_s.Class=5,_s.Method=6,_s.Property=7,_s.Field=8,_s.Constructor=9,_s.Enum=10,_s.Interface=11,_s.Function=12,_s.Variable=13,_s.Constant=14,_s.String=15,_s.Number=16,_s.Boolean=17,_s.Array=18,_s.Object=19,_s.Key=20,_s.Null=21,_s.EnumMember=22,_s.Struct=23,_s.Event=24,_s.Operator=25,_s.TypeParameter=26,(Es||(Es={})).Deprecated=1,(Ps||(Ps={})).create=function(e,t,n,r,o){let i={name:e,kind:t,location:{uri:r,range:n}};return o&&(i.containerName=o),i},(Os||(Os={})).create=function(e,t,n,r){return void 0!==r?{name:e,kind:t,location:{uri:n,range:r}}:{name:e,kind:t,location:{uri:n}}},(js=Ns||(Ns={})).create=function(e,t,n,r,o,i){let s={name:e,detail:t,kind:n,range:r,selectionRange:o};return void 0!==i&&(s.children=i),s},js.is=function(e){let t=e;return t&&_a.string(t.name)&&_a.number(t.kind)&&ci.is(t.range)&&ci.is(t.selectionRange)&&(void 0===t.detail||_a.string(t.detail))&&(void 0===t.deprecated||_a.boolean(t.deprecated))&&(void 0===t.children||Array.isArray(t.children))&&(void 0===t.tags||Array.isArray(t.tags))},(Ls=qs||(qs={})).Empty="",Ls.QuickFix="quickfix",Ls.Refactor="refactor",Ls.RefactorExtract="refactor.extract",Ls.RefactorInline="refactor.inline",Ls.RefactorRewrite="refactor.rewrite",Ls.Source="source",Ls.SourceOrganizeImports="source.organizeImports",Ls.SourceFixAll="source.fixAll",(Is=As||(As={})).Invoked=1,Is.Automatic=2,(Fs=Bs||(Bs={})).create=function(e,t,n){let r={diagnostics:e};return null!=t&&(r.only=t),null!=n&&(r.triggerKind=n),r},Fs.is=function(e){let t=e;return _a.defined(t)&&_a.typedArray(t.diagnostics,Pi.is)&&(void 0===t.only||_a.typedArray(t.only,_a.string))&&(void 0===t.triggerKind||t.triggerKind===As.Invoked||t.triggerKind===As.Automatic)},(Hs=Ws||(Ws={})).create=function(e,t,n){let r={title:e},o=!0;return"string"==typeof t?(o=!1,r.kind=t):Ni.is(t)?r.command=t:r.edit=t,o&&void 0!==n&&(r.kind=n),r},Hs.is=function(e){let t=e;return t&&_a.string(t.title)&&(void 0===t.diagnostics||_a.typedArray(t.diagnostics,Pi.is))&&(void 0===t.kind||_a.string(t.kind))&&(void 0!==t.edit||void 0!==t.command)&&(void 0===t.command||Ni.is(t.command))&&(void 0===t.isPreferred||_a.boolean(t.isPreferred))&&(void 0===t.edit||Gi.is(t.edit))},(Us=Ks||(Ks={})).create=function(e,t){let n={range:e};return _a.defined(t)&&(n.data=t),n},Us.is=function(e){let t=e;return _a.defined(t)&&ci.is(t.range)&&(_a.undefined(t.command)||Ni.is(t.command))},($s=Vs||(Vs={})).create=function(e,t){return{tabSize:e,insertSpaces:t}},$s.is=function(e){let t=e;return _a.defined(t)&&_a.uinteger(t.tabSize)&&_a.boolean(t.insertSpaces)},(Js=zs||(zs={})).create=function(e,t,n){return{range:e,target:t,data:n}},Js.is=function(e){let t=e;return _a.defined(t)&&ci.is(t.range)&&(_a.undefined(t.target)||_a.string(t.target))},(Gs=Qs||(Qs={})).create=function(e,t){return{range:e,parent:t}},Gs.is=function(e){let t=e;return _a.objectLiteral(t)&&ci.is(t.range)&&(void 0===t.parent||Gs.is(t.parent))},(Zs=Xs||(Xs={})).namespace="namespace",Zs.type="type",Zs.class="class",Zs.enum="enum",Zs.interface="interface",Zs.struct="struct",Zs.typeParameter="typeParameter",Zs.parameter="parameter",Zs.variable="variable",Zs.property="property",Zs.enumMember="enumMember",Zs.event="event",Zs.function="function",Zs.method="method",Zs.macro="macro",Zs.keyword="keyword",Zs.modifier="modifier",Zs.comment="comment",Zs.string="string",Zs.number="number",Zs.regexp="regexp",Zs.operator="operator",Zs.decorator="decorator",(ea=Ys||(Ys={})).declaration="declaration",ea.definition="definition",ea.readonly="readonly",ea.static="static",ea.deprecated="deprecated",ea.abstract="abstract",ea.async="async",ea.modification="modification",ea.documentation="documentation",ea.defaultLibrary="defaultLibrary",(ta||(ta={})).is=function(e){const t=e;return _a.objectLiteral(t)&&(void 0===t.resultId||"string"==typeof t.resultId)&&Array.isArray(t.data)&&(0===t.data.length||"number"==typeof t.data[0])},(ra=na||(na={})).create=function(e,t){return{range:e,text:t}},ra.is=function(e){const t=e;return null!=t&&ci.is(t.range)&&_a.string(t.text)},(ia=oa||(oa={})).create=function(e,t,n){return{range:e,variableName:t,caseSensitiveLookup:n}},ia.is=function(e){const t=e;return null!=t&&ci.is(t.range)&&_a.boolean(t.caseSensitiveLookup)&&(_a.string(t.variableName)||void 0===t.variableName)},(aa=sa||(sa={})).create=function(e,t){return{range:e,expression:t}},aa.is=function(e){const t=e;return null!=t&&ci.is(t.range)&&(_a.string(t.expression)||void 0===t.expression)},(la=ca||(ca={})).create=function(e,t){return{frameId:e,stoppedLocation:t}},la.is=function(e){const t=e;return _a.defined(t)&&ci.is(e.stoppedLocation)},(da=ua||(ua={})).Type=1,da.Parameter=2,da.is=function(e){return 1===e||2===e},(fa=ha||(ha={})).create=function(e){return{value:e}},fa.is=function(e){const t=e;return _a.objectLiteral(t)&&(void 0===t.tooltip||_a.string(t.tooltip)||as.is(t.tooltip))&&(void 0===t.location||ui.is(t.location))&&(void 0===t.command||Ni.is(t.command))},(ma=pa||(pa={})).create=function(e,t,n){const r={position:e,label:t};return void 0!==n&&(r.kind=n),r},ma.is=function(e){const t=e;return _a.objectLiteral(t)&&si.is(t.position)&&(_a.string(t.label)||_a.typedArray(t.label,ha.is))&&(void 0===t.kind||ua.is(t.kind))&&void 0===t.textEdits||_a.typedArray(t.textEdits,qi.is)&&(void 0===t.tooltip||_a.string(t.tooltip)||as.is(t.tooltip))&&(void 0===t.paddingLeft||_a.boolean(t.paddingLeft))&&(void 0===t.paddingRight||_a.boolean(t.paddingRight))},(ga||(ga={})).createSnippet=function(e){return{kind:"snippet",value:e}},(va||(va={})).create=function(e,t,n,r){return{insertText:e,filterText:t,range:n,command:r}},(ya||(ya={})).create=function(e){return{items:e}},(wa=ba||(ba={})).Invoked=0,wa.Automatic=1,(Ca||(Ca={})).create=function(e,t){return{range:e,text:t}},(xa||(xa={})).create=function(e,t){return{triggerKind:e,selectedCompletionInfo:t}},(ka||(ka={})).is=function(e){const t=e;return _a.objectLiteral(t)&&ti.is(t.uri)&&_a.string(t.name)};var Da,_a;!function(e){function t(e,n){if(e.length<=1)return e;const r=e.length/2|0,o=e.slice(0,r),i=e.slice(r);t(o,n),t(i,n);let s=0,a=0,c=0;for(;s<o.length&&a<i.length;){let t=n(o[s],i[a]);e[c++]=t<=0?o[s++]:i[a++]}for(;s<o.length;)e[c++]=o[s++];for(;a<i.length;)e[c++]=i[a++];return e}e.create=function(e,t,n,r){return new Ea(e,t,n,r)},e.is=function(e){let t=e;return!!(_a.defined(t)&&_a.string(t.uri)&&(_a.undefined(t.languageId)||_a.string(t.languageId))&&_a.uinteger(t.lineCount)&&_a.func(t.getText)&&_a.func(t.positionAt)&&_a.func(t.offsetAt))},e.applyEdits=function(e,n){let r=e.getText(),o=t(n,((e,t)=>{let n=e.range.start.line-t.range.start.line;return 0===n?e.range.start.character-t.range.start.character:n})),i=r.length;for(let t=o.length-1;t>=0;t--){let n=o[t],s=e.offsetAt(n.range.start),a=e.offsetAt(n.range.end);if(!(a<=i))throw new Error("Overlapping edit");r=r.substring(0,s)+n.newText+r.substring(a,r.length),i=s}return r}}(Da||(Da={}));class Ea{constructor(e,t,n,r){this._uri=e,this._languageId=t,this._version=n,this._content=r,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content}update(e,t){this._content=e.text,this._version=t,this._lineOffsets=void 0}getLineOffsets(){if(void 0===this._lineOffsets){let e=[],t=this._content,n=!0;for(let r=0;r<t.length;r++){n&&(e.push(r),n=!1);let o=t.charAt(r);n="\r"===o||"\n"===o,"\r"===o&&r+1<t.length&&"\n"===t.charAt(r+1)&&r++}n&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let t=this.getLineOffsets(),n=0,r=t.length;if(0===r)return si.create(0,e);for(;n<r;){let o=Math.floor((n+r)/2);t[o]>e?r=o:n=o+1}let o=n-1;return si.create(o,e-t[o])}offsetAt(e){let t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;let n=t[e.line],r=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,r),n)}get lineCount(){return this.getLineOffsets().length}}!function(e){const t=Object.prototype.toString;e.defined=function(e){return void 0!==e},e.undefined=function(e){return void 0===e},e.boolean=function(e){return!0===e||!1===e},e.string=function(e){return"[object String]"===t.call(e)},e.number=function(e){return"[object Number]"===t.call(e)},e.numberRange=function(e,n,r){return"[object Number]"===t.call(e)&&n<=e&&e<=r},e.integer=function(e){return"[object Number]"===t.call(e)&&-2147483648<=e&&e<=2147483647},e.uinteger=function(e){return"[object Number]"===t.call(e)&&0<=e&&e<=2147483647},e.func=function(e){return"[object Function]"===t.call(e)},e.objectLiteral=function(e){return null!==e&&"object"==typeof e},e.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)}}(_a||(_a={}));const Pa=ee(Object.freeze(Object.defineProperty({__proto__:null,get AnnotatedTextEdit(){return Fi},get ChangeAnnotation(){return Ai},get ChangeAnnotationIdentifier(){return Bi},get CodeAction(){return Ws},get CodeActionContext(){return Bs},get CodeActionKind(){return qs},get CodeActionTriggerKind(){return As},get CodeDescription(){return Ei},get CodeLens(){return Ks},get Color(){return pi},get ColorInformation(){return gi},get ColorPresentation(){return yi},get Command(){return Ni},get CompletionItem(){return ys},get CompletionItemKind(){return cs},get CompletionItemLabelDetails(){return vs},get CompletionItemTag(){return hs},get CompletionList(){return bs},get CreateFile(){return Ui},get DeleteFile(){return Ji},get Diagnostic(){return Pi},get DiagnosticRelatedInformation(){return Ri},get DiagnosticSeverity(){return Si},get DiagnosticTag(){return Di},get DocumentHighlight(){return Ms},get DocumentHighlightKind(){return Ts},get DocumentLink(){return zs},get DocumentSymbol(){return Ns},get DocumentUri(){return ei},EOL:["\n","\r\n","\r"],get FoldingRange(){return xi},get FoldingRangeKind(){return wi},get FormattingOptions(){return Vs},get Hover(){return xs},get InlayHint(){return pa},get InlayHintKind(){return ua},get InlayHintLabelPart(){return ha},get InlineCompletionContext(){return xa},get InlineCompletionItem(){return va},get InlineCompletionList(){return ya},get InlineCompletionTriggerKind(){return ba},get InlineValueContext(){return ca},get InlineValueEvaluatableExpression(){return sa},get InlineValueText(){return na},get InlineValueVariableLookup(){return oa},get InsertReplaceEdit(){return fs},get InsertTextFormat(){return us},get InsertTextMode(){return ms},get Location(){return ui},get LocationLink(){return hi},get MarkedString(){return ws},get MarkupContent(){return as},get MarkupKind(){return is},get OptionalVersionedTextDocumentIdentifier(){return ts},get ParameterInformation(){return ks},get Position(){return si},get Range(){return ci},get RenameFile(){return $i},get SelectedCompletionInfo(){return Ca},get SelectionRange(){return Qs},get SemanticTokenModifiers(){return Ys},get SemanticTokenTypes(){return Xs},get SemanticTokens(){return ta},get SignatureInformation(){return Rs},get StringValue(){return ga},get SymbolInformation(){return Ps},get SymbolKind(){return Ds},get SymbolTag(){return Es},get TextDocument(){return Da},get TextDocumentEdit(){return Hi},get TextDocumentIdentifier(){return Xi},get TextDocumentItem(){return rs},get TextEdit(){return qi},get URI(){return ti},get VersionedTextDocumentIdentifier(){return Yi},WorkspaceChange:class{constructor(e){this._textEditChanges=Object.create(null),void 0!==e?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new Ma(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach((e=>{if(Hi.is(e)){const t=new Sa(e.edits,this._changeAnnotations);this._textEditChanges[e.textDocument.uri]=t}}))):e.changes&&Object.keys(e.changes).forEach((t=>{const n=new Sa(e.changes[t]);this._textEditChanges[t]=n}))):this._workspaceEdit={}}get edit(){return this.initDocumentChanges(),void 0!==this._changeAnnotations&&(0===this._changeAnnotations.size?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit}getTextEditChange(e){if(ts.is(e)){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");const t={uri:e.uri,version:e.version};let n=this._textEditChanges[t.uri];if(!n){const e=[],r={textDocument:t,edits:e};this._workspaceEdit.documentChanges.push(r),n=new Sa(e,this._changeAnnotations),this._textEditChanges[t.uri]=n}return n}{if(this.initChanges(),void 0===this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");let t=this._textEditChanges[e];if(!t){let n=[];this._workspaceEdit.changes[e]=n,t=new Sa(n),this._textEditChanges[e]=t}return t}}initDocumentChanges(){void 0===this._workspaceEdit.documentChanges&&void 0===this._workspaceEdit.changes&&(this._changeAnnotations=new Ma,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())}initChanges(){void 0===this._workspaceEdit.documentChanges&&void 0===this._workspaceEdit.changes&&(this._workspaceEdit.changes=Object.create(null))}createFile(e,t,n){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");let r,o,i;if(Ai.is(t)||Bi.is(t)?r=t:n=t,void 0===r?o=Ui.create(e,n):(i=Bi.is(r)?r:this._changeAnnotations.manage(r),o=Ui.create(e,n,i)),this._workspaceEdit.documentChanges.push(o),void 0!==i)return i}renameFile(e,t,n,r){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");let o,i,s;if(Ai.is(n)||Bi.is(n)?o=n:r=n,void 0===o?i=$i.create(e,t,r):(s=Bi.is(o)?o:this._changeAnnotations.manage(o),i=$i.create(e,t,r,s)),this._workspaceEdit.documentChanges.push(i),void 0!==s)return s}deleteFile(e,t,n){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");let r,o,i;if(Ai.is(t)||Bi.is(t)?r=t:n=t,void 0===r?o=Ji.create(e,n):(i=Bi.is(r)?r:this._changeAnnotations.manage(r),o=Ji.create(e,n,i)),this._workspaceEdit.documentChanges.push(o),void 0!==i)return i}},get WorkspaceEdit(){return Gi},get WorkspaceFolder(){return ka},get WorkspaceSymbol(){return Os},get integer(){return ni},get uinteger(){return oi}},Symbol.toStringTag,{value:"Module"})));var Oa={};Object.defineProperty(Oa,"__esModule",{value:!0}),Oa.ProtocolNotificationType=Oa.ProtocolNotificationType0=Oa.ProtocolRequestType=Oa.ProtocolRequestType0=Oa.RegistrationType=Oa.MessageDirection=void 0;const Na=Lr;var ja,qa;(qa=ja||(Oa.MessageDirection=ja={})).clientToServer="clientToServer",qa.serverToClient="serverToClient",qa.both="both";Oa.RegistrationType=class{constructor(e){this.method=e}};Oa.ProtocolRequestType0=class extends Na.RequestType0{constructor(e){super(e)}};Oa.ProtocolRequestType=class extends Na.RequestType{constructor(e){super(e,Na.ParameterStructures.byName)}};Oa.ProtocolNotificationType0=class extends Na.NotificationType0{constructor(e){super(e)}};Oa.ProtocolNotificationType=class extends Na.NotificationType{constructor(e){super(e,Na.ParameterStructures.byName)}};var La={},Aa={};function Ia(e){return"string"==typeof e||e instanceof String}function Ba(e){return Array.isArray(e)}Object.defineProperty(Aa,"__esModule",{value:!0}),Aa.objectLiteral=Aa.typedArray=Aa.stringArray=Aa.array=Aa.func=Aa.error=Aa.number=Aa.string=Aa.boolean=void 0,Aa.boolean=function(e){return!0===e||!1===e},Aa.string=Ia,Aa.number=function(e){return"number"==typeof e||e instanceof Number},Aa.error=function(e){return e instanceof Error},Aa.func=function(e){return"function"==typeof e},Aa.array=Ba,Aa.stringArray=function(e){return Ba(e)&&e.every((e=>Ia(e)))},Aa.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},Aa.objectLiteral=function(e){return null!==e&&"object"==typeof e};var Fa={};Object.defineProperty(Fa,"__esModule",{value:!0}),Fa.ImplementationRequest=void 0;const Wa=Oa;var Ha,Ka;(Ka=Ha||(Fa.ImplementationRequest=Ha={})).method="textDocument/implementation",Ka.messageDirection=Wa.MessageDirection.clientToServer,Ka.type=new Wa.ProtocolRequestType(Ka.method);var Ua={};Object.defineProperty(Ua,"__esModule",{value:!0}),Ua.TypeDefinitionRequest=void 0;const Va=Oa;var $a,za;(za=$a||(Ua.TypeDefinitionRequest=$a={})).method="textDocument/typeDefinition",za.messageDirection=Va.MessageDirection.clientToServer,za.type=new Va.ProtocolRequestType(za.method);var Ja={};Object.defineProperty(Ja,"__esModule",{value:!0}),Ja.DidChangeWorkspaceFoldersNotification=Ja.WorkspaceFoldersRequest=void 0;const Qa=Oa;var Ga,Xa,Za,Ya;(Xa=Ga||(Ja.WorkspaceFoldersRequest=Ga={})).method="workspace/workspaceFolders",Xa.messageDirection=Qa.MessageDirection.serverToClient,Xa.type=new Qa.ProtocolRequestType0(Xa.method),(Ya=Za||(Ja.DidChangeWorkspaceFoldersNotification=Za={})).method="workspace/didChangeWorkspaceFolders",Ya.messageDirection=Qa.MessageDirection.clientToServer,Ya.type=new Qa.ProtocolNotificationType(Ya.method);var ec={};Object.defineProperty(ec,"__esModule",{value:!0}),ec.ConfigurationRequest=void 0;const tc=Oa;var nc,rc;(rc=nc||(ec.ConfigurationRequest=nc={})).method="workspace/configuration",rc.messageDirection=tc.MessageDirection.serverToClient,rc.type=new tc.ProtocolRequestType(rc.method);var oc={};Object.defineProperty(oc,"__esModule",{value:!0}),oc.ColorPresentationRequest=oc.DocumentColorRequest=void 0;const ic=Oa;var sc,ac,cc,lc;(ac=sc||(oc.DocumentColorRequest=sc={})).method="textDocument/documentColor",ac.messageDirection=ic.MessageDirection.clientToServer,ac.type=new ic.ProtocolRequestType(ac.method),(lc=cc||(oc.ColorPresentationRequest=cc={})).method="textDocument/colorPresentation",lc.messageDirection=ic.MessageDirection.clientToServer,lc.type=new ic.ProtocolRequestType(lc.method);var uc={};Object.defineProperty(uc,"__esModule",{value:!0}),uc.FoldingRangeRefreshRequest=uc.FoldingRangeRequest=void 0;const dc=Oa;var hc,fc,pc,mc;(fc=hc||(uc.FoldingRangeRequest=hc={})).method="textDocument/foldingRange",fc.messageDirection=dc.MessageDirection.clientToServer,fc.type=new dc.ProtocolRequestType(fc.method),(mc=pc||(uc.FoldingRangeRefreshRequest=pc={})).method="workspace/foldingRange/refresh",mc.messageDirection=dc.MessageDirection.serverToClient,mc.type=new dc.ProtocolRequestType0(mc.method);var gc={};Object.defineProperty(gc,"__esModule",{value:!0}),gc.DeclarationRequest=void 0;const vc=Oa;var yc,bc;(bc=yc||(gc.DeclarationRequest=yc={})).method="textDocument/declaration",bc.messageDirection=vc.MessageDirection.clientToServer,bc.type=new vc.ProtocolRequestType(bc.method);var wc={};Object.defineProperty(wc,"__esModule",{value:!0}),wc.SelectionRangeRequest=void 0;const Cc=Oa;var xc,kc;(kc=xc||(wc.SelectionRangeRequest=xc={})).method="textDocument/selectionRange",kc.messageDirection=Cc.MessageDirection.clientToServer,kc.type=new Cc.ProtocolRequestType(kc.method);var Rc={};Object.defineProperty(Rc,"__esModule",{value:!0}),Rc.WorkDoneProgressCancelNotification=Rc.WorkDoneProgressCreateRequest=Rc.WorkDoneProgress=void 0;const Tc=Lr,Sc=Oa;var Mc,Dc,_c,Ec,Pc,Oc;(Dc=Mc||(Rc.WorkDoneProgress=Mc={})).type=new Tc.ProgressType,Dc.is=function(e){return e===Dc.type},(Ec=_c||(Rc.WorkDoneProgressCreateRequest=_c={})).method="window/workDoneProgress/create",Ec.messageDirection=Sc.MessageDirection.serverToClient,Ec.type=new Sc.ProtocolRequestType(Ec.method),(Oc=Pc||(Rc.WorkDoneProgressCancelNotification=Pc={})).method="window/workDoneProgress/cancel",Oc.messageDirection=Sc.MessageDirection.clientToServer,Oc.type=new Sc.ProtocolNotificationType(Oc.method);var Nc={};Object.defineProperty(Nc,"__esModule",{value:!0}),Nc.CallHierarchyOutgoingCallsRequest=Nc.CallHierarchyIncomingCallsRequest=Nc.CallHierarchyPrepareRequest=void 0;const jc=Oa;var qc,Lc,Ac,Ic,Bc,Fc;(Lc=qc||(Nc.CallHierarchyPrepareRequest=qc={})).method="textDocument/prepareCallHierarchy",Lc.messageDirection=jc.MessageDirection.clientToServer,Lc.type=new jc.ProtocolRequestType(Lc.method),(Ic=Ac||(Nc.CallHierarchyIncomingCallsRequest=Ac={})).method="callHierarchy/incomingCalls",Ic.messageDirection=jc.MessageDirection.clientToServer,Ic.type=new jc.ProtocolRequestType(Ic.method),(Fc=Bc||(Nc.CallHierarchyOutgoingCallsRequest=Bc={})).method="callHierarchy/outgoingCalls",Fc.messageDirection=jc.MessageDirection.clientToServer,Fc.type=new jc.ProtocolRequestType(Fc.method);var Wc={};Object.defineProperty(Wc,"__esModule",{value:!0}),Wc.SemanticTokensRefreshRequest=Wc.SemanticTokensRangeRequest=Wc.SemanticTokensDeltaRequest=Wc.SemanticTokensRequest=Wc.SemanticTokensRegistrationType=Wc.TokenFormat=void 0;const Hc=Oa;var Kc,Uc,Vc,$c,zc,Jc,Qc,Gc,Xc,Zc,Yc;(Kc||(Wc.TokenFormat=Kc={})).Relative="relative",(Vc=Uc||(Wc.SemanticTokensRegistrationType=Uc={})).method="textDocument/semanticTokens",Vc.type=new Hc.RegistrationType(Vc.method),(zc=$c||(Wc.SemanticTokensRequest=$c={})).method="textDocument/semanticTokens/full",zc.messageDirection=Hc.MessageDirection.clientToServer,zc.type=new Hc.ProtocolRequestType(zc.method),zc.registrationMethod=Uc.method,(Qc=Jc||(Wc.SemanticTokensDeltaRequest=Jc={})).method="textDocument/semanticTokens/full/delta",Qc.messageDirection=Hc.MessageDirection.clientToServer,Qc.type=new Hc.ProtocolRequestType(Qc.method),Qc.registrationMethod=Uc.method,(Xc=Gc||(Wc.SemanticTokensRangeRequest=Gc={})).method="textDocument/semanticTokens/range",Xc.messageDirection=Hc.MessageDirection.clientToServer,Xc.type=new Hc.ProtocolRequestType(Xc.method),Xc.registrationMethod=Uc.method,(Yc=Zc||(Wc.SemanticTokensRefreshRequest=Zc={})).method="workspace/semanticTokens/refresh",Yc.messageDirection=Hc.MessageDirection.serverToClient,Yc.type=new Hc.ProtocolRequestType0(Yc.method);var el={};Object.defineProperty(el,"__esModule",{value:!0}),el.ShowDocumentRequest=void 0;const tl=Oa;var nl,rl;(rl=nl||(el.ShowDocumentRequest=nl={})).method="window/showDocument",rl.messageDirection=tl.MessageDirection.serverToClient,rl.type=new tl.ProtocolRequestType(rl.method);var ol={};Object.defineProperty(ol,"__esModule",{value:!0}),ol.LinkedEditingRangeRequest=void 0;const il=Oa;var sl,al;(al=sl||(ol.LinkedEditingRangeRequest=sl={})).method="textDocument/linkedEditingRange",al.messageDirection=il.MessageDirection.clientToServer,al.type=new il.ProtocolRequestType(al.method);var cl={};Object.defineProperty(cl,"__esModule",{value:!0}),cl.WillDeleteFilesRequest=cl.DidDeleteFilesNotification=cl.DidRenameFilesNotification=cl.WillRenameFilesRequest=cl.DidCreateFilesNotification=cl.WillCreateFilesRequest=cl.FileOperationPatternKind=void 0;const ll=Oa;var ul,dl,hl,fl,pl,ml,gl,vl,yl,bl,wl,Cl,xl,kl;(dl=ul||(cl.FileOperationPatternKind=ul={})).file="file",dl.folder="folder",(fl=hl||(cl.WillCreateFilesRequest=hl={})).method="workspace/willCreateFiles",fl.messageDirection=ll.MessageDirection.clientToServer,fl.type=new ll.ProtocolRequestType(fl.method),(ml=pl||(cl.DidCreateFilesNotification=pl={})).method="workspace/didCreateFiles",ml.messageDirection=ll.MessageDirection.clientToServer,ml.type=new ll.ProtocolNotificationType(ml.method),(vl=gl||(cl.WillRenameFilesRequest=gl={})).method="workspace/willRenameFiles",vl.messageDirection=ll.MessageDirection.clientToServer,vl.type=new ll.ProtocolRequestType(vl.method),(bl=yl||(cl.DidRenameFilesNotification=yl={})).method="workspace/didRenameFiles",bl.messageDirection=ll.MessageDirection.clientToServer,bl.type=new ll.ProtocolNotificationType(bl.method),(Cl=wl||(cl.DidDeleteFilesNotification=wl={})).method="workspace/didDeleteFiles",Cl.messageDirection=ll.MessageDirection.clientToServer,Cl.type=new ll.ProtocolNotificationType(Cl.method),(kl=xl||(cl.WillDeleteFilesRequest=xl={})).method="workspace/willDeleteFiles",kl.messageDirection=ll.MessageDirection.clientToServer,kl.type=new ll.ProtocolRequestType(kl.method);var Rl={};Object.defineProperty(Rl,"__esModule",{value:!0}),Rl.MonikerRequest=Rl.MonikerKind=Rl.UniquenessLevel=void 0;const Tl=Oa;var Sl,Ml,Dl,_l,El,Pl;(Ml=Sl||(Rl.UniquenessLevel=Sl={})).document="document",Ml.project="project",Ml.group="group",Ml.scheme="scheme",Ml.global="global",(_l=Dl||(Rl.MonikerKind=Dl={})).$import="import",_l.$export="export",_l.local="local",(Pl=El||(Rl.MonikerRequest=El={})).method="textDocument/moniker",Pl.messageDirection=Tl.MessageDirection.clientToServer,Pl.type=new Tl.ProtocolRequestType(Pl.method);var Ol={};Object.defineProperty(Ol,"__esModule",{value:!0}),Ol.TypeHierarchySubtypesRequest=Ol.TypeHierarchySupertypesRequest=Ol.TypeHierarchyPrepareRequest=void 0;const Nl=Oa;var jl,ql,Ll,Al,Il,Bl;(ql=jl||(Ol.TypeHierarchyPrepareRequest=jl={})).method="textDocument/prepareTypeHierarchy",ql.messageDirection=Nl.MessageDirection.clientToServer,ql.type=new Nl.ProtocolRequestType(ql.method),(Al=Ll||(Ol.TypeHierarchySupertypesRequest=Ll={})).method="typeHierarchy/supertypes",Al.messageDirection=Nl.MessageDirection.clientToServer,Al.type=new Nl.ProtocolRequestType(Al.method),(Bl=Il||(Ol.TypeHierarchySubtypesRequest=Il={})).method="typeHierarchy/subtypes",Bl.messageDirection=Nl.MessageDirection.clientToServer,Bl.type=new Nl.ProtocolRequestType(Bl.method);var Fl={};Object.defineProperty(Fl,"__esModule",{value:!0}),Fl.InlineValueRefreshRequest=Fl.InlineValueRequest=void 0;const Wl=Oa;var Hl,Kl,Ul,Vl;(Kl=Hl||(Fl.InlineValueRequest=Hl={})).method="textDocument/inlineValue",Kl.messageDirection=Wl.MessageDirection.clientToServer,Kl.type=new Wl.ProtocolRequestType(Kl.method),(Vl=Ul||(Fl.InlineValueRefreshRequest=Ul={})).method="workspace/inlineValue/refresh",Vl.messageDirection=Wl.MessageDirection.serverToClient,Vl.type=new Wl.ProtocolRequestType0(Vl.method);var $l={};Object.defineProperty($l,"__esModule",{value:!0}),$l.InlayHintRefreshRequest=$l.InlayHintResolveRequest=$l.InlayHintRequest=void 0;const zl=Oa;var Jl,Ql,Gl,Xl,Zl,Yl;(Ql=Jl||($l.InlayHintRequest=Jl={})).method="textDocument/inlayHint",Ql.messageDirection=zl.MessageDirection.clientToServer,Ql.type=new zl.ProtocolRequestType(Ql.method),(Xl=Gl||($l.InlayHintResolveRequest=Gl={})).method="inlayHint/resolve",Xl.messageDirection=zl.MessageDirection.clientToServer,Xl.type=new zl.ProtocolRequestType(Xl.method),(Yl=Zl||($l.InlayHintRefreshRequest=Zl={})).method="workspace/inlayHint/refresh",Yl.messageDirection=zl.MessageDirection.serverToClient,Yl.type=new zl.ProtocolRequestType0(Yl.method);var eu={};Object.defineProperty(eu,"__esModule",{value:!0}),eu.DiagnosticRefreshRequest=eu.WorkspaceDiagnosticRequest=eu.DocumentDiagnosticRequest=eu.DocumentDiagnosticReportKind=eu.DiagnosticServerCancellationData=void 0;const tu=Lr,nu=Aa,ru=Oa;var ou,iu,su,au,cu,lu,uu,du,hu;(ou||(eu.DiagnosticServerCancellationData=ou={})).is=function(e){const t=e;return t&&nu.boolean(t.retriggerRequest)},(su=iu||(eu.DocumentDiagnosticReportKind=iu={})).Full="full",su.Unchanged="unchanged",(cu=au||(eu.DocumentDiagnosticRequest=au={})).method="textDocument/diagnostic",cu.messageDirection=ru.MessageDirection.clientToServer,cu.type=new ru.ProtocolRequestType(cu.method),cu.partialResult=new tu.ProgressType,(uu=lu||(eu.WorkspaceDiagnosticRequest=lu={})).method="workspace/diagnostic",uu.messageDirection=ru.MessageDirection.clientToServer,uu.type=new ru.ProtocolRequestType(uu.method),uu.partialResult=new tu.ProgressType,(hu=du||(eu.DiagnosticRefreshRequest=du={})).method="workspace/diagnostic/refresh",hu.messageDirection=ru.MessageDirection.serverToClient,hu.type=new ru.ProtocolRequestType0(hu.method);var fu={};Object.defineProperty(fu,"__esModule",{value:!0}),fu.DidCloseNotebookDocumentNotification=fu.DidSaveNotebookDocumentNotification=fu.DidChangeNotebookDocumentNotification=fu.NotebookCellArrayChange=fu.DidOpenNotebookDocumentNotification=fu.NotebookDocumentSyncRegistrationType=fu.NotebookDocument=fu.NotebookCell=fu.ExecutionSummary=fu.NotebookCellKind=void 0;const pu=Pa,mu=Aa,gu=Oa;var vu,yu,bu,wu,Cu,xu,ku,Ru,Tu,Su,Mu,Du,_u,Eu,Pu,Ou,Nu,ju,qu;(yu=vu||(fu.NotebookCellKind=vu={})).Markup=1,yu.Code=2,yu.is=function(e){return 1===e||2===e},(wu=bu||(fu.ExecutionSummary=bu={})).create=function(e,t){const n={executionOrder:e};return!0!==t&&!1!==t||(n.success=t),n},wu.is=function(e){const t=e;return mu.objectLiteral(t)&&pu.uinteger.is(t.executionOrder)&&(void 0===t.success||mu.boolean(t.success))},wu.equals=function(e,t){return e===t||null!=e&&null!=t&&e.executionOrder===t.executionOrder&&e.success===t.success},function(e){function t(e,n){if(e===n)return!0;if(null==e||null==n)return!1;if(typeof e!=typeof n)return!1;if("object"!=typeof e)return!1;const r=Array.isArray(e),o=Array.isArray(n);if(r!==o)return!1;if(r&&o){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(!t(e[r],n[r]))return!1}if(mu.objectLiteral(e)&&mu.objectLiteral(n)){const r=Object.keys(e),o=Object.keys(n);if(r.length!==o.length)return!1;if(r.sort(),o.sort(),!t(r,o))return!1;for(let i=0;i<r.length;i++){const o=r[i];if(!t(e[o],n[o]))return!1}}return!0}e.create=function(e,t){return{kind:e,document:t}},e.is=function(e){const t=e;return mu.objectLiteral(t)&&vu.is(t.kind)&&pu.DocumentUri.is(t.document)&&(void 0===t.metadata||mu.objectLiteral(t.metadata))},e.diff=function(e,n){const r=new Set;return e.document!==n.document&&r.add("document"),e.kind!==n.kind&&r.add("kind"),e.executionSummary!==n.executionSummary&&r.add("executionSummary"),void 0===e.metadata&&void 0===n.metadata||t(e.metadata,n.metadata)||r.add("metadata"),void 0===e.executionSummary&&void 0===n.executionSummary||bu.equals(e.executionSummary,n.executionSummary)||r.add("executionSummary"),r}}(Cu||(fu.NotebookCell=Cu={})),(ku=xu||(fu.NotebookDocument=xu={})).create=function(e,t,n,r){return{uri:e,notebookType:t,version:n,cells:r}},ku.is=function(e){const t=e;return mu.objectLiteral(t)&&mu.string(t.uri)&&pu.integer.is(t.version)&&mu.typedArray(t.cells,Cu.is)},(Tu=Ru||(fu.NotebookDocumentSyncRegistrationType=Ru={})).method="notebookDocument/sync",Tu.messageDirection=gu.MessageDirection.clientToServer,Tu.type=new gu.RegistrationType(Tu.method),(Mu=Su||(fu.DidOpenNotebookDocumentNotification=Su={})).method="notebookDocument/didOpen",Mu.messageDirection=gu.MessageDirection.clientToServer,Mu.type=new gu.ProtocolNotificationType(Mu.method),Mu.registrationMethod=Ru.method,(_u=Du||(fu.NotebookCellArrayChange=Du={})).is=function(e){const t=e;return mu.objectLiteral(t)&&pu.uinteger.is(t.start)&&pu.uinteger.is(t.deleteCount)&&(void 0===t.cells||mu.typedArray(t.cells,Cu.is))},_u.create=function(e,t,n){const r={start:e,deleteCount:t};return void 0!==n&&(r.cells=n),r},(Pu=Eu||(fu.DidChangeNotebookDocumentNotification=Eu={})).method="notebookDocument/didChange",Pu.messageDirection=gu.MessageDirection.clientToServer,Pu.type=new gu.ProtocolNotificationType(Pu.method),Pu.registrationMethod=Ru.method,(Nu=Ou||(fu.DidSaveNotebookDocumentNotification=Ou={})).method="notebookDocument/didSave",Nu.messageDirection=gu.MessageDirection.clientToServer,Nu.type=new gu.ProtocolNotificationType(Nu.method),Nu.registrationMethod=Ru.method,(qu=ju||(fu.DidCloseNotebookDocumentNotification=ju={})).method="notebookDocument/didClose",qu.messageDirection=gu.MessageDirection.clientToServer,qu.type=new gu.ProtocolNotificationType(qu.method),qu.registrationMethod=Ru.method;var Lu={};Object.defineProperty(Lu,"__esModule",{value:!0}),Lu.InlineCompletionRequest=void 0;const Au=Oa;var Iu,Bu;(Bu=Iu||(Lu.InlineCompletionRequest=Iu={})).method="textDocument/inlineCompletion",Bu.messageDirection=Au.MessageDirection.clientToServer,Bu.type=new Au.ProtocolRequestType(Bu.method),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WorkspaceSymbolRequest=e.CodeActionResolveRequest=e.CodeActionRequest=e.DocumentSymbolRequest=e.DocumentHighlightRequest=e.ReferencesRequest=e.DefinitionRequest=e.SignatureHelpRequest=e.SignatureHelpTriggerKind=e.HoverRequest=e.CompletionResolveRequest=e.CompletionRequest=e.CompletionTriggerKind=e.PublishDiagnosticsNotification=e.WatchKind=e.RelativePattern=e.FileChangeType=e.DidChangeWatchedFilesNotification=e.WillSaveTextDocumentWaitUntilRequest=e.WillSaveTextDocumentNotification=e.TextDocumentSaveReason=e.DidSaveTextDocumentNotification=e.DidCloseTextDocumentNotification=e.DidChangeTextDocumentNotification=e.TextDocumentContentChangeEvent=e.DidOpenTextDocumentNotification=e.TextDocumentSyncKind=e.TelemetryEventNotification=e.LogMessageNotification=e.ShowMessageRequest=e.ShowMessageNotification=e.MessageType=e.DidChangeConfigurationNotification=e.ExitNotification=e.ShutdownRequest=e.InitializedNotification=e.InitializeErrorCodes=e.InitializeRequest=e.WorkDoneProgressOptions=e.TextDocumentRegistrationOptions=e.StaticRegistrationOptions=e.PositionEncodingKind=e.FailureHandlingKind=e.ResourceOperationKind=e.UnregistrationRequest=e.RegistrationRequest=e.DocumentSelector=e.NotebookCellTextDocumentFilter=e.NotebookDocumentFilter=e.TextDocumentFilter=void 0,e.MonikerRequest=e.MonikerKind=e.UniquenessLevel=e.WillDeleteFilesRequest=e.DidDeleteFilesNotification=e.WillRenameFilesRequest=e.DidRenameFilesNotification=e.WillCreateFilesRequest=e.DidCreateFilesNotification=e.FileOperationPatternKind=e.LinkedEditingRangeRequest=e.ShowDocumentRequest=e.SemanticTokensRegistrationType=e.SemanticTokensRefreshRequest=e.SemanticTokensRangeRequest=e.SemanticTokensDeltaRequest=e.SemanticTokensRequest=e.TokenFormat=e.CallHierarchyPrepareRequest=e.CallHierarchyOutgoingCallsRequest=e.CallHierarchyIncomingCallsRequest=e.WorkDoneProgressCancelNotification=e.WorkDoneProgressCreateRequest=e.WorkDoneProgress=e.SelectionRangeRequest=e.DeclarationRequest=e.FoldingRangeRefreshRequest=e.FoldingRangeRequest=e.ColorPresentationRequest=e.DocumentColorRequest=e.ConfigurationRequest=e.DidChangeWorkspaceFoldersNotification=e.WorkspaceFoldersRequest=e.TypeDefinitionRequest=e.ImplementationRequest=e.ApplyWorkspaceEditRequest=e.ExecuteCommandRequest=e.PrepareRenameRequest=e.RenameRequest=e.PrepareSupportDefaultBehavior=e.DocumentOnTypeFormattingRequest=e.DocumentRangesFormattingRequest=e.DocumentRangeFormattingRequest=e.DocumentFormattingRequest=e.DocumentLinkResolveRequest=e.DocumentLinkRequest=e.CodeLensRefreshRequest=e.CodeLensResolveRequest=e.CodeLensRequest=e.WorkspaceSymbolResolveRequest=void 0,e.InlineCompletionRequest=e.DidCloseNotebookDocumentNotification=e.DidSaveNotebookDocumentNotification=e.DidChangeNotebookDocumentNotification=e.NotebookCellArrayChange=e.DidOpenNotebookDocumentNotification=e.NotebookDocumentSyncRegistrationType=e.NotebookDocument=e.NotebookCell=e.ExecutionSummary=e.NotebookCellKind=e.DiagnosticRefreshRequest=e.WorkspaceDiagnosticRequest=e.DocumentDiagnosticRequest=e.DocumentDiagnosticReportKind=e.DiagnosticServerCancellationData=e.InlayHintRefreshRequest=e.InlayHintResolveRequest=e.InlayHintRequest=e.InlineValueRefreshRequest=e.InlineValueRequest=e.TypeHierarchySupertypesRequest=e.TypeHierarchySubtypesRequest=e.TypeHierarchyPrepareRequest=void 0;const t=Oa,n=Pa,r=Aa,o=Fa;Object.defineProperty(e,"ImplementationRequest",{enumerable:!0,get:function(){return o.ImplementationRequest}});const i=Ua;Object.defineProperty(e,"TypeDefinitionRequest",{enumerable:!0,get:function(){return i.TypeDefinitionRequest}});const s=Ja;Object.defineProperty(e,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return s.WorkspaceFoldersRequest}}),Object.defineProperty(e,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return s.DidChangeWorkspaceFoldersNotification}});const a=ec;Object.defineProperty(e,"ConfigurationRequest",{enumerable:!0,get:function(){return a.ConfigurationRequest}});const c=oc;Object.defineProperty(e,"DocumentColorRequest",{enumerable:!0,get:function(){return c.DocumentColorRequest}}),Object.defineProperty(e,"ColorPresentationRequest",{enumerable:!0,get:function(){return c.ColorPresentationRequest}});const l=uc;Object.defineProperty(e,"FoldingRangeRequest",{enumerable:!0,get:function(){return l.FoldingRangeRequest}}),Object.defineProperty(e,"FoldingRangeRefreshRequest",{enumerable:!0,get:function(){return l.FoldingRangeRefreshRequest}});const u=gc;Object.defineProperty(e,"DeclarationRequest",{enumerable:!0,get:function(){return u.DeclarationRequest}});const d=wc;Object.defineProperty(e,"SelectionRangeRequest",{enumerable:!0,get:function(){return d.SelectionRangeRequest}});const h=Rc;Object.defineProperty(e,"WorkDoneProgress",{enumerable:!0,get:function(){return h.WorkDoneProgress}}),Object.defineProperty(e,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return h.WorkDoneProgressCreateRequest}}),Object.defineProperty(e,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return h.WorkDoneProgressCancelNotification}});const f=Nc;Object.defineProperty(e,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return f.CallHierarchyIncomingCallsRequest}}),Object.defineProperty(e,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return f.CallHierarchyOutgoingCallsRequest}}),Object.defineProperty(e,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return f.CallHierarchyPrepareRequest}});const p=Wc;Object.defineProperty(e,"TokenFormat",{enumerable:!0,get:function(){return p.TokenFormat}}),Object.defineProperty(e,"SemanticTokensRequest",{enumerable:!0,get:function(){return p.SemanticTokensRequest}}),Object.defineProperty(e,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return p.SemanticTokensDeltaRequest}}),Object.defineProperty(e,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return p.SemanticTokensRangeRequest}}),Object.defineProperty(e,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return p.SemanticTokensRefreshRequest}}),Object.defineProperty(e,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return p.SemanticTokensRegistrationType}});const m=el;Object.defineProperty(e,"ShowDocumentRequest",{enumerable:!0,get:function(){return m.ShowDocumentRequest}});const g=ol;Object.defineProperty(e,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return g.LinkedEditingRangeRequest}});const v=cl;Object.defineProperty(e,"FileOperationPatternKind",{enumerable:!0,get:function(){return v.FileOperationPatternKind}}),Object.defineProperty(e,"DidCreateFilesNotification",{enumerable:!0,get:function(){return v.DidCreateFilesNotification}}),Object.defineProperty(e,"WillCreateFilesRequest",{enumerable:!0,get:function(){return v.WillCreateFilesRequest}}),Object.defineProperty(e,"DidRenameFilesNotification",{enumerable:!0,get:function(){return v.DidRenameFilesNotification}}),Object.defineProperty(e,"WillRenameFilesRequest",{enumerable:!0,get:function(){return v.WillRenameFilesRequest}}),Object.defineProperty(e,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return v.DidDeleteFilesNotification}}),Object.defineProperty(e,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return v.WillDeleteFilesRequest}});const y=Rl;Object.defineProperty(e,"UniquenessLevel",{enumerable:!0,get:function(){return y.UniquenessLevel}}),Object.defineProperty(e,"MonikerKind",{enumerable:!0,get:function(){return y.MonikerKind}}),Object.defineProperty(e,"MonikerRequest",{enumerable:!0,get:function(){return y.MonikerRequest}});const b=Ol;Object.defineProperty(e,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return b.TypeHierarchyPrepareRequest}}),Object.defineProperty(e,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return b.TypeHierarchySubtypesRequest}}),Object.defineProperty(e,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return b.TypeHierarchySupertypesRequest}});const w=Fl;Object.defineProperty(e,"InlineValueRequest",{enumerable:!0,get:function(){return w.InlineValueRequest}}),Object.defineProperty(e,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return w.InlineValueRefreshRequest}});const C=$l;Object.defineProperty(e,"InlayHintRequest",{enumerable:!0,get:function(){return C.InlayHintRequest}}),Object.defineProperty(e,"InlayHintResolveRequest",{enumerable:!0,get:function(){return C.InlayHintResolveRequest}}),Object.defineProperty(e,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return C.InlayHintRefreshRequest}});const x=eu;Object.defineProperty(e,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return x.DiagnosticServerCancellationData}}),Object.defineProperty(e,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return x.DocumentDiagnosticReportKind}}),Object.defineProperty(e,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return x.DocumentDiagnosticRequest}}),Object.defineProperty(e,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return x.WorkspaceDiagnosticRequest}}),Object.defineProperty(e,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return x.DiagnosticRefreshRequest}});const k=fu;Object.defineProperty(e,"NotebookCellKind",{enumerable:!0,get:function(){return k.NotebookCellKind}}),Object.defineProperty(e,"ExecutionSummary",{enumerable:!0,get:function(){return k.ExecutionSummary}}),Object.defineProperty(e,"NotebookCell",{enumerable:!0,get:function(){return k.NotebookCell}}),Object.defineProperty(e,"NotebookDocument",{enumerable:!0,get:function(){return k.NotebookDocument}}),Object.defineProperty(e,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return k.NotebookDocumentSyncRegistrationType}}),Object.defineProperty(e,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return k.DidOpenNotebookDocumentNotification}}),Object.defineProperty(e,"NotebookCellArrayChange",{enumerable:!0,get:function(){return k.NotebookCellArrayChange}}),Object.defineProperty(e,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return k.DidChangeNotebookDocumentNotification}}),Object.defineProperty(e,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return k.DidSaveNotebookDocumentNotification}}),Object.defineProperty(e,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return k.DidCloseNotebookDocumentNotification}});const R=Lu;var T,S,M,D,_,E,P,O,N,j,q,L,A,I,B,F,W,H,K,U,V,$,z,J,Q,G,X,Z,Y,ee,te,ne,re,oe,ie,se,ae,ce,le,ue,de,he,fe,pe,me,ge,ve,ye,be,we,Ce,xe,ke,Re,Te,Se,Me,De,_e,Ee,Pe,Oe,Ne,je,qe,Le,Ae,Ie,Be,Fe,We,He,Ke,Ue,Ve,$e,ze,Je,Qe,Ge,Xe,Ze,Ye,et,tt,nt,rt,ot,it,st,at,ct,lt,ut,dt,ht,ft,pt,mt,gt,vt,yt,bt,wt,Ct,xt,kt,Rt,Tt,St,Mt,Dt,_t,Et,Pt,Ot,Nt,jt,qt,Lt,At;Object.defineProperty(e,"InlineCompletionRequest",{enumerable:!0,get:function(){return R.InlineCompletionRequest}}),(T||(e.TextDocumentFilter=T={})).is=function(e){const t=e;return r.string(t)||r.string(t.language)||r.string(t.scheme)||r.string(t.pattern)},(S||(e.NotebookDocumentFilter=S={})).is=function(e){const t=e;return r.objectLiteral(t)&&(r.string(t.notebookType)||r.string(t.scheme)||r.string(t.pattern))},(M||(e.NotebookCellTextDocumentFilter=M={})).is=function(e){const t=e;return r.objectLiteral(t)&&(r.string(t.notebook)||S.is(t.notebook))&&(void 0===t.language||r.string(t.language))},(D||(e.DocumentSelector=D={})).is=function(e){if(!Array.isArray(e))return!1;for(let t of e)if(!r.string(t)&&!T.is(t)&&!M.is(t))return!1;return!0},(E=_||(e.RegistrationRequest=_={})).method="client/registerCapability",E.messageDirection=t.MessageDirection.serverToClient,E.type=new t.ProtocolRequestType(E.method),(O=P||(e.UnregistrationRequest=P={})).method="client/unregisterCapability",O.messageDirection=t.MessageDirection.serverToClient,O.type=new t.ProtocolRequestType(O.method),(j=N||(e.ResourceOperationKind=N={})).Create="create",j.Rename="rename",j.Delete="delete",(L=q||(e.FailureHandlingKind=q={})).Abort="abort",L.Transactional="transactional",L.TextOnlyTransactional="textOnlyTransactional",L.Undo="undo",(I=A||(e.PositionEncodingKind=A={})).UTF8="utf-8",I.UTF16="utf-16",I.UTF32="utf-32",(B||(e.StaticRegistrationOptions=B={})).hasId=function(e){const t=e;return t&&r.string(t.id)&&t.id.length>0},(F||(e.TextDocumentRegistrationOptions=F={})).is=function(e){const t=e;return t&&(null===t.documentSelector||D.is(t.documentSelector))},(H=W||(e.WorkDoneProgressOptions=W={})).is=function(e){const t=e;return r.objectLiteral(t)&&(void 0===t.workDoneProgress||r.boolean(t.workDoneProgress))},H.hasWorkDoneProgress=function(e){const t=e;return t&&r.boolean(t.workDoneProgress)},(U=K||(e.InitializeRequest=K={})).method="initialize",U.messageDirection=t.MessageDirection.clientToServer,U.type=new t.ProtocolRequestType(U.method),(V||(e.InitializeErrorCodes=V={})).unknownProtocolVersion=1,(z=$||(e.InitializedNotification=$={})).method="initialized",z.messageDirection=t.MessageDirection.clientToServer,z.type=new t.ProtocolNotificationType(z.method),(Q=J||(e.ShutdownRequest=J={})).method="shutdown",Q.messageDirection=t.MessageDirection.clientToServer,Q.type=new t.ProtocolRequestType0(Q.method),(X=G||(e.ExitNotification=G={})).method="exit",X.messageDirection=t.MessageDirection.clientToServer,X.type=new t.ProtocolNotificationType0(X.method),(Y=Z||(e.DidChangeConfigurationNotification=Z={})).method="workspace/didChangeConfiguration",Y.messageDirection=t.MessageDirection.clientToServer,Y.type=new t.ProtocolNotificationType(Y.method),(te=ee||(e.MessageType=ee={})).Error=1,te.Warning=2,te.Info=3,te.Log=4,te.Debug=5,(re=ne||(e.ShowMessageNotification=ne={})).method="window/showMessage",re.messageDirection=t.MessageDirection.serverToClient,re.type=new t.ProtocolNotificationType(re.method),(ie=oe||(e.ShowMessageRequest=oe={})).method="window/showMessageRequest",ie.messageDirection=t.MessageDirection.serverToClient,ie.type=new t.ProtocolRequestType(ie.method),(ae=se||(e.LogMessageNotification=se={})).method="window/logMessage",ae.messageDirection=t.MessageDirection.serverToClient,ae.type=new t.ProtocolNotificationType(ae.method),(le=ce||(e.TelemetryEventNotification=ce={})).method="telemetry/event",le.messageDirection=t.MessageDirection.serverToClient,le.type=new t.ProtocolNotificationType(le.method),(de=ue||(e.TextDocumentSyncKind=ue={})).None=0,de.Full=1,de.Incremental=2,(fe=he||(e.DidOpenTextDocumentNotification=he={})).method="textDocument/didOpen",fe.messageDirection=t.MessageDirection.clientToServer,fe.type=new t.ProtocolNotificationType(fe.method),(me=pe||(e.TextDocumentContentChangeEvent=pe={})).isIncremental=function(e){let t=e;return null!=t&&"string"==typeof t.text&&void 0!==t.range&&(void 0===t.rangeLength||"number"==typeof t.rangeLength)},me.isFull=function(e){let t=e;return null!=t&&"string"==typeof t.text&&void 0===t.range&&void 0===t.rangeLength},(ve=ge||(e.DidChangeTextDocumentNotification=ge={})).method="textDocument/didChange",ve.messageDirection=t.MessageDirection.clientToServer,ve.type=new t.ProtocolNotificationType(ve.method),(be=ye||(e.DidCloseTextDocumentNotification=ye={})).method="textDocument/didClose",be.messageDirection=t.MessageDirection.clientToServer,be.type=new t.ProtocolNotificationType(be.method),(Ce=we||(e.DidSaveTextDocumentNotification=we={})).method="textDocument/didSave",Ce.messageDirection=t.MessageDirection.clientToServer,Ce.type=new t.ProtocolNotificationType(Ce.method),(ke=xe||(e.TextDocumentSaveReason=xe={})).Manual=1,ke.AfterDelay=2,ke.FocusOut=3,(Te=Re||(e.WillSaveTextDocumentNotification=Re={})).method="textDocument/willSave",Te.messageDirection=t.MessageDirection.clientToServer,Te.type=new t.ProtocolNotificationType(Te.method),(Me=Se||(e.WillSaveTextDocumentWaitUntilRequest=Se={})).method="textDocument/willSaveWaitUntil",Me.messageDirection=t.MessageDirection.clientToServer,Me.type=new t.ProtocolRequestType(Me.method),(_e=De||(e.DidChangeWatchedFilesNotification=De={})).method="workspace/didChangeWatchedFiles",_e.messageDirection=t.MessageDirection.clientToServer,_e.type=new t.ProtocolNotificationType(_e.method),(Pe=Ee||(e.FileChangeType=Ee={})).Created=1,Pe.Changed=2,Pe.Deleted=3,(Oe||(e.RelativePattern=Oe={})).is=function(e){const t=e;return r.objectLiteral(t)&&(n.URI.is(t.baseUri)||n.WorkspaceFolder.is(t.baseUri))&&r.string(t.pattern)},(je=Ne||(e.WatchKind=Ne={})).Create=1,je.Change=2,je.Delete=4,(Le=qe||(e.PublishDiagnosticsNotification=qe={})).method="textDocument/publishDiagnostics",Le.messageDirection=t.MessageDirection.serverToClient,Le.type=new t.ProtocolNotificationType(Le.method),(Ie=Ae||(e.CompletionTriggerKind=Ae={})).Invoked=1,Ie.TriggerCharacter=2,Ie.TriggerForIncompleteCompletions=3,(Fe=Be||(e.CompletionRequest=Be={})).method="textDocument/completion",Fe.messageDirection=t.MessageDirection.clientToServer,Fe.type=new t.ProtocolRequestType(Fe.method),(He=We||(e.CompletionResolveRequest=We={})).method="completionItem/resolve",He.messageDirection=t.MessageDirection.clientToServer,He.type=new t.ProtocolRequestType(He.method),(Ue=Ke||(e.HoverRequest=Ke={})).method="textDocument/hover",Ue.messageDirection=t.MessageDirection.clientToServer,Ue.type=new t.ProtocolRequestType(Ue.method),($e=Ve||(e.SignatureHelpTriggerKind=Ve={})).Invoked=1,$e.TriggerCharacter=2,$e.ContentChange=3,(Je=ze||(e.SignatureHelpRequest=ze={})).method="textDocument/signatureHelp",Je.messageDirection=t.MessageDirection.clientToServer,Je.type=new t.ProtocolRequestType(Je.method),(Ge=Qe||(e.DefinitionRequest=Qe={})).method="textDocument/definition",Ge.messageDirection=t.MessageDirection.clientToServer,Ge.type=new t.ProtocolRequestType(Ge.method),(Ze=Xe||(e.ReferencesRequest=Xe={})).method="textDocument/references",Ze.messageDirection=t.MessageDirection.clientToServer,Ze.type=new t.ProtocolRequestType(Ze.method),(et=Ye||(e.DocumentHighlightRequest=Ye={})).method="textDocument/documentHighlight",et.messageDirection=t.MessageDirection.clientToServer,et.type=new t.ProtocolRequestType(et.method),(nt=tt||(e.DocumentSymbolRequest=tt={})).method="textDocument/documentSymbol",nt.messageDirection=t.MessageDirection.clientToServer,nt.type=new t.ProtocolRequestType(nt.method),(ot=rt||(e.CodeActionRequest=rt={})).method="textDocument/codeAction",ot.messageDirection=t.MessageDirection.clientToServer,ot.type=new t.ProtocolRequestType(ot.method),(st=it||(e.CodeActionResolveRequest=it={})).method="codeAction/resolve",st.messageDirection=t.MessageDirection.clientToServer,st.type=new t.ProtocolRequestType(st.method),(ct=at||(e.WorkspaceSymbolRequest=at={})).method="workspace/symbol",ct.messageDirection=t.MessageDirection.clientToServer,ct.type=new t.ProtocolRequestType(ct.method),(ut=lt||(e.WorkspaceSymbolResolveRequest=lt={})).method="workspaceSymbol/resolve",ut.messageDirection=t.MessageDirection.clientToServer,ut.type=new t.ProtocolRequestType(ut.method),(ht=dt||(e.CodeLensRequest=dt={})).method="textDocument/codeLens",ht.messageDirection=t.MessageDirection.clientToServer,ht.type=new t.ProtocolRequestType(ht.method),(pt=ft||(e.CodeLensResolveRequest=ft={})).method="codeLens/resolve",pt.messageDirection=t.MessageDirection.clientToServer,pt.type=new t.ProtocolRequestType(pt.method),(gt=mt||(e.CodeLensRefreshRequest=mt={})).method="workspace/codeLens/refresh",gt.messageDirection=t.MessageDirection.serverToClient,gt.type=new t.ProtocolRequestType0(gt.method),(yt=vt||(e.DocumentLinkRequest=vt={})).method="textDocument/documentLink",yt.messageDirection=t.MessageDirection.clientToServer,yt.type=new t.ProtocolRequestType(yt.method),(wt=bt||(e.DocumentLinkResolveRequest=bt={})).method="documentLink/resolve",wt.messageDirection=t.MessageDirection.clientToServer,wt.type=new t.ProtocolRequestType(wt.method),(xt=Ct||(e.DocumentFormattingRequest=Ct={})).method="textDocument/formatting",xt.messageDirection=t.MessageDirection.clientToServer,xt.type=new t.ProtocolRequestType(xt.method),(Rt=kt||(e.DocumentRangeFormattingRequest=kt={})).method="textDocument/rangeFormatting",Rt.messageDirection=t.MessageDirection.clientToServer,Rt.type=new t.ProtocolRequestType(Rt.method),(St=Tt||(e.DocumentRangesFormattingRequest=Tt={})).method="textDocument/rangesFormatting",St.messageDirection=t.MessageDirection.clientToServer,St.type=new t.ProtocolRequestType(St.method),(Dt=Mt||(e.DocumentOnTypeFormattingRequest=Mt={})).method="textDocument/onTypeFormatting",Dt.messageDirection=t.MessageDirection.clientToServer,Dt.type=new t.ProtocolRequestType(Dt.method),(_t||(e.PrepareSupportDefaultBehavior=_t={})).Identifier=1,(Pt=Et||(e.RenameRequest=Et={})).method="textDocument/rename",Pt.messageDirection=t.MessageDirection.clientToServer,Pt.type=new t.ProtocolRequestType(Pt.method),(Nt=Ot||(e.PrepareRenameRequest=Ot={})).method="textDocument/prepareRename",Nt.messageDirection=t.MessageDirection.clientToServer,Nt.type=new t.ProtocolRequestType(Nt.method),(qt=jt||(e.ExecuteCommandRequest=jt={})).method="workspace/executeCommand",qt.messageDirection=t.MessageDirection.clientToServer,qt.type=new t.ProtocolRequestType(qt.method),(At=Lt||(e.ApplyWorkspaceEditRequest=Lt={})).method="workspace/applyEdit",At.messageDirection=t.MessageDirection.serverToClient,At.type=new t.ProtocolRequestType("workspace/applyEdit")}(La);var Fu={};Object.defineProperty(Fu,"__esModule",{value:!0}),Fu.createProtocolConnection=void 0;const Wu=Lr;Fu.createProtocolConnection=function(e,t,n,r){return Wu.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,Wu.createMessageConnection)(e,t,n,r)},function(e){var t=Y&&Y.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=Y&&Y.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.LSPErrorCodes=e.createProtocolConnection=void 0,n(Lr,e),n(Pa,e),n(Oa,e),n(La,e);var r,o,i=Fu;Object.defineProperty(e,"createProtocolConnection",{enumerable:!0,get:function(){return i.createProtocolConnection}}),(o=r||(e.LSPErrorCodes=r={})).lspReservedErrorRangeStart=-32899,o.RequestFailed=-32803,o.ServerCancelled=-32802,o.ContentModified=-32801,o.RequestCancelled=-32800,o.lspReservedErrorRangeEnd=-32800}(Ta),function(e){var t=Y&&Y.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=Y&&Y.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.createProtocolConnection=void 0;const r=Ra;n(Ra,e),n(Ta,e),e.createProtocolConnection=function(e,t,n,o){return(0,r.createMessageConnection)(e,t,n,o)}}(qr);const Hu=1e4,Ku=Object.fromEntries(Object.entries(qr.CompletionItemKind).map((([e,t])=>[t,e]))),Uu=e=>e.reduce(((e,t)=>t),""),Vu=te.define({combine:Uu}),$u=te.define({combine:Uu}),zu=te.define({combine:Uu});class Ju{constructor(e){this.rootUri=e.rootUri,this.workspaceFolders=e.workspaceFolders,this.autoClose=e.autoClose,this.plugins=[],this.transport=e.transport,this.requestManager=new $t.RequestManager([this.transport]),this.client=new $t.Client(this.requestManager),this.client.onNotification((e=>{this.processNotification(e)}));const t=this.transport;t&&t.connection&&t.connection.addEventListener("message",(e=>{const n=JSON.parse(e.data);n.method&&n.id&&t.connection.send(JSON.stringify({jsonrpc:"2.0",id:n.id,result:null}))})),this.initializePromise=this.initialize()}async initialize(){const{capabilities:e}=await this.request("initialize",{capabilities:{textDocument:{hover:{dynamicRegistration:!0,contentFormat:["plaintext","markdown"]},moniker:{},synchronization:{dynamicRegistration:!0,willSave:!1,didSave:!1,willSaveWaitUntil:!1},completion:{dynamicRegistration:!0,completionItem:{snippetSupport:!1,commitCharactersSupport:!0,documentationFormat:["plaintext","markdown"],deprecatedSupport:!1,preselectSupport:!1},contextSupport:!1},signatureHelp:{dynamicRegistration:!0,signatureInformation:{documentationFormat:["plaintext","markdown"]}},declaration:{dynamicRegistration:!0,linkSupport:!0},definition:{dynamicRegistration:!0,linkSupport:!0},typeDefinition:{dynamicRegistration:!0,linkSupport:!0},implementation:{dynamicRegistration:!0,linkSupport:!0}},workspace:{didChangeConfiguration:{dynamicRegistration:!0}}},initializationOptions:null,processId:null,rootUri:this.rootUri,workspaceFolders:this.workspaceFolders},3e4);this.capabilities=e,this.notify("initialized",{}),this.ready=!0}close(){this.client.close()}textDocumentDidOpen(e){return this.notify("textDocument/didOpen",e)}textDocumentDidChange(e){return this.notify("textDocument/didChange",e)}async textDocumentHover(e){return await this.request("textDocument/hover",e,Hu)}async textDocumentCompletion(e){return await this.request("textDocument/completion",e,Hu)}attachPlugin(e){this.plugins.push(e)}detachPlugin(e){const t=this.plugins.indexOf(e);-1!==t&&(this.plugins.splice(t,1),this.autoClose&&this.close())}request(e,t,n){return this.client.request({method:e,params:t},n)}notify(e,t){return this.client.notify({method:e,params:t})}processNotification(e){for(const t of this.plugins)t.processNotification(e)}}class Qu{constructor(e,t){this.view=e,this.allowHTMLContent=t,this.client=this.view.state.facet(Vu),this.documentUri=this.view.state.facet($u),this.languageId=this.view.state.facet(zu),this.documentVersion=0,this.changesTimeout=0,this.client.attachPlugin(this),this.initialize({documentText:this.view.state.doc.toString()})}update({docChanged:e}){e&&(this.changesTimeout&&clearTimeout(this.changesTimeout),this.changesTimeout=self.setTimeout((()=>{this.sendChange({documentText:this.view.state.doc.toString()})}),500))}destroy(){this.client.detachPlugin(this)}async initialize({documentText:e}){this.client.initializePromise&&await this.client.initializePromise,this.client.textDocumentDidOpen({textDocument:{uri:this.documentUri,languageId:this.languageId,text:e,version:this.documentVersion}})}async sendChange({documentText:e}){if(this.client.ready)try{await this.client.textDocumentDidChange({textDocument:{uri:this.documentUri,version:this.documentVersion++},contentChanges:[{text:e}]})}catch(t){console.error(t)}}requestDiagnostics(e){this.sendChange({documentText:e.state.doc.toString()})}async requestHoverTooltip(e,{line:t,character:n}){if(!this.client.ready||!this.client.capabilities.hoverProvider)return null;this.sendChange({documentText:e.state.doc.toString()});const r=await this.client.textDocumentHover({textDocument:{uri:this.documentUri},position:{line:t,character:n}});if(!r)return null;const{contents:o,range:i}=r;let s,a=Gu(e.state.doc,{line:t,character:n});if(i&&(a=Gu(e.state.doc,i.start),s=Gu(e.state.doc,i.end)),null===a)return null;const c=document.createElement("div");return c.classList.add("documentation"),this.allowHTMLContent?c.innerHTML=Zu(o):c.textContent=Zu(o),{pos:a,end:s,create:e=>({dom:c}),above:!0}}async requestCompletion(e,{line:t,character:n},{triggerKind:r,triggerCharacter:o}){if(!this.client.ready||!this.client.capabilities.completionProvider)return null;this.sendChange({documentText:e.state.doc.toString()});const i=await this.client.textDocumentCompletion({textDocument:{uri:this.documentUri},position:{line:t,character:n},context:{triggerKind:r,triggerCharacter:o}});if(!i)return null;let s=("items"in i?i.items:i).map((({detail:e,label:t,kind:n,textEdit:r,documentation:o,sortText:i,filterText:s})=>{var a;const c={label:t,detail:e,apply:null!==(a=null==r?void 0:r.newText)&&void 0!==a?a:t,type:n&&Ku[n].toLowerCase(),sortText:null!=i?i:t,filterText:null!=s?s:t};return o&&(c.info=Zu(o)),c}));const[a,c]=function(e){const t=new Set,n=new Set;for(const{apply:o}of e){const[e,...r]=o;t.add(e);for(const t of r)n.add(t)}const r=Yu(t)+Yu(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}(s),l=e.matchBefore(c);let{pos:u}=e;if(l){u=l.from;const e=l.text.toLowerCase();/^\w+$/.test(e)&&(s=s.filter((({filterText:t})=>t.toLowerCase().startsWith(e))).sort((({apply:e},{apply:t})=>{switch(!0){case e.startsWith(l.text)&&!t.startsWith(l.text):return-1;case!e.startsWith(l.text)&&t.startsWith(l.text):return 1}return 0})))}return{from:u,options:s}}processNotification(e){try{if("textDocument/publishDiagnostics"===e.method)this.processDiagnostics(e.params)}catch(t){console.error(t)}}processDiagnostics(e){if(e.uri!==this.documentUri)return;const t=e.diagnostics.map((({range:e,message:t,severity:n})=>({from:Gu(this.view.state.doc,e.start),to:Gu(this.view.state.doc,e.end),severity:{[qr.DiagnosticSeverity.Error]:"error",[qr.DiagnosticSeverity.Warning]:"warning",[qr.DiagnosticSeverity.Information]:"info",[qr.DiagnosticSeverity.Hint]:"info"}[n],message:t}))).filter((({from:e,to:t})=>null!==e&&null!==t&&void 0!==e&&void 0!==t)).sort(((e,t)=>{switch(!0){case e.from<t.from:return-1;case e.from>t.from:return 1}return 0}));this.view.dispatch(oe(this.view.state,t))}}function Gu(e,t){if(t.line>=e.lines)return;const n=e.line(t.line+1).from+t.character;return n>e.length?void 0:n}function Xu(e,t){const n=e.lineAt(t);return{line:n.number-1,character:t-n.from}}function Zu(e){return Array.isArray(e)?e.map((e=>Zu(e)+"\n\n")).join(""):"string"==typeof e?e:e.value}function Yu(e){let t="",n=Array.from(e).join("");return/\w/.test(n)&&(t+="\\w",n=n.replace(/\w/g,"")),`[${t}${n.replace(/[^\w\s]/g,"\\$&")}]`}function ed(e){return[...ie().map((t=>{const n=se(t);return n===e?null:n})).filter(Boolean).sort(((e,t)=>e.startsWith("import")&&!t.startsWith("import")?-1:!e.startsWith("import")&&t.startsWith("import")?1:0)),e].join("\n")}class td extends Ju{constructor(){super(...arguments),t(this,"documentVersion",0)}_request(e,t){return this.request(e,t)}isDisabled(){return!Ut()}async textDocumentDidOpen(e){return this.isDisabled()?e:super.textDocumentDidOpen(e)}async textDocumentCompletion(e){return this.isDisabled()?[]:super.textDocumentCompletion(e)}async textDocumentDidChange(e){return this.isDisabled()?e:super.textDocumentDidChange({...e,contentChanges:[{text:ed(e.contentChanges[0].text)}],textDocument:qr.VersionedTextDocumentIdentifier.create(e.textDocument.uri,++this.documentVersion)})}textDocumentHover(e){return this.isDisabled()?Promise.resolve({contents:[]}):super.textDocumentHover(e)}signOut(){return this._request("signOut",{})}signInInitiate(){return this._request("signInInitiate",{})}signInConfirm(e){return this._request("signInConfirm",e)}async signedIn(){const{status:e,user:t}=await this._request("checkStatus",{});return ae.debug("Copilot#signedIn",e,t),"SignedIn"===e||"AlreadySignedIn"===e||"OK"===e}acceptCompletion(e){return this._request("notifyAccepted",e)}rejectCompletions(e){return this._request("notifyRejected",e)}async getCompletion(e){if(this.isDisabled())return{completions:[]};const t=this.documentVersion;return this._request("getCompletions",{doc:{...e.doc,version:t}})}}async function nd(e){return new Promise(((t,n)=>{const r=new WebSocket(e);r.onopen=()=>{r.close(),t(e)},r.onerror=t=>{r.close(),n(new Error(`Failed to connect to ${e}: ${t.type}`))}}))}const rd="/marimo.py",od="copilot",id=`file://${rd}`,sd=ce((()=>new ad));class ad extends yn{constructor(){super(),t(this,"delegate"),this.delegate=void 0}async connect(){return await X(Z,(e=>e.completion.copilot)),await async function(e,t=5){for(let n=0;n<t;n++)try{return await nd(e)}catch{await new Promise((e=>setTimeout(e,1e3*(n+1))))}throw new Error(`Failed to connect to ${e}`)}(ud(),3),this.delegate||(this.delegate=new $t.WebSocketTransport(ud())),this.delegate.connect()}close(){var e;null==(e=this.delegate)||e.close()}async sendData(e,t){var n;return null==(n=this.delegate)?void 0:n.sendData(e,t)}}const cd=ce((()=>new td({rootUri:id,documentUri:id,languageId:od,workspaceFolders:null,transport:sd()})));function ld(){return function(e){let t=null;return[Vu.of(e.client||new Ju({...e,autoClose:!0})),$u.of(e.documentUri),zu.of(e.languageId),R.define((n=>t=new Qu(n,e.allowHTMLContent))),ne(((e,n)=>{var r;return null!==(r=null==t?void 0:t.requestHoverTooltip(e,Xu(e.state.doc,n)))&&void 0!==r?r:null})),re({override:[async e=>{var n,r,o;if(null==t)return null;const{state:i,pos:s,explicit:a}=e,c=i.doc.lineAt(s);let l,u=qr.CompletionTriggerKind.Invoked;return!a&&(null===(o=null===(r=null===(n=t.client.capabilities)||void 0===n?void 0:n.completionProvider)||void 0===r?void 0:r.triggerCharacters)||void 0===o?void 0:o.includes(c.text[s-c.from-1]))&&(u=qr.CompletionTriggerKind.TriggerCharacter,l=c.text[s-c.from-1]),u!==qr.CompletionTriggerKind.Invoked||e.matchBefore(/\w+$/)?await t.requestCompletion(e,Xu(i.doc,s),{triggerKind:u,triggerCharacter:l}):null}]})]}({rootUri:id,documentUri:id,workspaceFolders:[],transport:sd(),client:cd(),languageId:od})}function ud(){const e=`${window.location.port}0`;return`${"https:"===window.location.protocol?"wss":"ws"}://${window.location.hostname}:${e}/copilot`}const dd=p.memo((()=>{const[e,t]=le(Kt),[n,r]=p.useState(),[s,a]=p.useState(),[c,l]=p.useState(!1);p.useEffect((()=>{const e=cd();e.initializePromise.catch((()=>{t(!1),r("notConnected")})),e.signedIn().then((e=>{t(e),r(e?"signedIn":"signedOut")})).catch((()=>{t(!1),r("notConnected")}))}),[]);const u=async e=>{e.preventDefault(),l(!0);try{const e=cd(),{verificationUri:n,status:o,userCode:i}=await e.signInInitiate();"OK"===o||"AlreadySignedIn"===o?t(!0):(r("signingIn"),a({url:n,code:i}))}finally{l(!1)}},d=async e=>{if(e.preventDefault(),!s)return;const n=cd();try{l(!0);const{status:e}=await n.signInConfirm({userCode:s.code});"OK"===e||"AlreadySignedIn"===e?(t(!0),r("signedIn")):r("signInFailed")}catch{for(let e=0;e<3;e++){await new Promise((e=>setTimeout(e,1e3)));if(await n.signedIn())return t(!0),void r("signedIn")}r("signInFailed")}finally{l(!1)}},f=async e=>{e.preventDefault();const n=cd();t(!1),r("signedOut"),await n.signOut()};return(()=>{switch(n??(e?"signedIn":"connecting")){case"connecting":return o.jsx(ue,{className:"font-normal flex",children:"Connecting..."});case"signedOut":return o.jsx(he,{onClick:u,size:"xs",variant:"link",children:"Sign in to GitHub Copilot"});case"signingIn":return o.jsxs("ol",{className:"ml-4 text-sm list-decimal [&>li]:mt-2",children:[o.jsx("li",{children:o.jsxs("div",{className:"flex items-center",children:["Copy this code:",o.jsx("strong",{className:"ml-2",children:null==s?void 0:s.code}),o.jsx(fe,{className:"ml-2 cursor-pointer opacity-60 hover:opacity-100 h-3 w-3",onClick:()=>{s&&(navigator.clipboard.writeText(s.code),pe({description:"Copied to clipboard"}))}})]})}),o.jsxs("li",{children:["Enter the code at this link:",o.jsx("a",{href:null==s?void 0:s.url,target:"_blank",rel:"noreferrer",className:me({variant:"link",size:"xs"}),children:null==s?void 0:s.url})]}),o.jsxs("li",{children:["Click here when done:",o.jsxs(he,{size:"xs",onClick:d,className:"ml-1",children:[c&&o.jsx(i,{className:"h-3 w-3 mr-1 animate-spin"}),"Done"]})]})]});case"signInFailed":return o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("div",{className:"text-destructive text-sm",children:"Sign in failed. Please try again."}),c?o.jsx(i,{className:"h-3 w-3 mr-1 animate-spin"}):o.jsx(he,{onClick:u,size:"xs",variant:"link",children:"Connect to GitHub Copilot"})]});case"signedIn":return o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(ue,{className:"font-normal flex",children:[o.jsx(de,{className:"h-4 w-4 mr-1"}),"Connected"]}),o.jsx(he,{onClick:f,size:"xs",variant:"text",children:"Disconnect"})]});case"notConnected":return o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsxs(ue,{className:"font-normal flex",children:[o.jsx(h,{className:"h-4 w-4 mr-1"}),"Unable to connect"]}),o.jsxs("div",{className:"text-sm",children:["For troubleshooting, see the"," ",o.jsx("a",{className:"hyperlink",href:"https://docs.marimo.io/getting_started/index.html#github-copilot",target:"_blank",rel:"noreferrer",children:"docs"}),"."]})]})}})()}));dd.displayName="CopilotConfig";const hd=({children:e})=>o.jsx("div",{className:"text-md font-semibold text-muted-foreground uppercase tracking-wide  mb-1",children:e}),fd=({children:e})=>o.jsx("div",{className:"text-sm font-semibold underline-offset-2 text-accent-foreground uppercase tracking-wide",children:e}),pd=({children:e})=>o.jsx("p",{className:"text-sm text-muted-foreground",children:e}),md=e=>o.jsx("kbd",{className:c(e.className,"rounded-md bg-muted/40 px-2 text-[0.75rem] font-prose center border border-foreground/20 text-muted-foreground block"),children:e.children}),gd=()=>{const[e,t]=ge(),n=p.useRef(null),r=ve({resolver:ye(je),defaultValues:e}),i=async e=>{await qe({config:e}).then((()=>{t(e)}))},s=be();return o.jsx(we,{...r,children:o.jsxs("form",{ref:n,onChange:r.handleSubmit(i),className:"flex flex-col gap-5",children:[o.jsxs("div",{children:[o.jsx(hd,{children:"User Config"}),o.jsx(pd,{children:"Settings applied to all marimo notebooks"})]}),o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsx(fd,{children:"Editor"}),o.jsx("div",{children:o.jsx(Ce,{control:r.control,name:"save.autosave",render:({field:e})=>o.jsxs(xe,{className:"flex flex-row items-start space-x-2 space-y-0",children:[o.jsx(ke,{children:o.jsx(Re,{"data-testid":"autosave-checkbox",checked:"after_delay"===e.value,disabled:e.disabled,onCheckedChange:t=>{e.onChange(t?"after_delay":"off")}})}),o.jsx(Te,{className:"font-normal",children:"Autosave"})]})})}),o.jsx(Ce,{control:r.control,name:"save.autosave_delay",render:({field:e})=>o.jsxs(xe,{className:"mb-2",children:[o.jsx(Te,{children:"Autosave delay (seconds)"}),o.jsx(ke,{children:o.jsx("span",{className:"inline-flex mr-2",children:o.jsx(Se,{"data-testid":"autosave-delay-input",className:"m-0 w-24",isDisabled:"after_delay"!==r.getValues("save.autosave"),...e,value:e.value/1e3,minValue:1,onChange:t=>{e.onChange(1e3*t),i(r.getValues())}})})}),o.jsx(Me,{})]})}),o.jsx("div",{children:o.jsx(Ce,{control:r.control,name:"save.format_on_save",render:({field:e})=>o.jsxs(xe,{className:"flex flex-row items-start space-x-2 space-y-0",children:[o.jsx(ke,{children:o.jsx(Re,{"data-testid":"format-on-save-checkbox",checked:e.value,disabled:e.disabled,onCheckedChange:t=>{e.onChange(t)}})}),o.jsx(Te,{className:"font-normal",children:"Format on save"})]})})}),o.jsx(Ce,{control:r.control,name:"formatting.line_length",render:({field:e})=>o.jsxs(xe,{className:"mb-2",children:[o.jsx(Te,{children:"Line length"}),o.jsx(De,{children:"Maximum line length when formatting code."}),o.jsx(ke,{children:o.jsx("span",{className:"inline-flex mr-2",children:o.jsx(Se,{"data-testid":"line-length-input",className:"m-0 w-24",...e,value:e.value,minValue:1,maxValue:1e3,onChange:t=>{e.onChange(t),i(r.getValues())}})})}),o.jsx(Me,{})]})}),o.jsx(Ce,{control:r.control,name:"completion.activate_on_typing",render:({field:e})=>o.jsxs("div",{className:"flex flex-col space-y-1",children:[o.jsxs(xe,{className:"flex flex-row items-start space-x-2 space-y-0",children:[o.jsx(ke,{children:o.jsx(Re,{"data-testid":"autocomplete-checkbox",checked:e.value,disabled:e.disabled,onCheckedChange:t=>{e.onChange(Boolean(t))}})}),o.jsx(Te,{className:"font-normal",children:"Autocomplete"})]}),o.jsx(De,{children:"When unchecked, code completion is still available through a hotkey."})]})}),o.jsx(Ce,{control:r.control,name:"keymap.preset",render:({field:e})=>o.jsxs(xe,{children:[o.jsx(Te,{children:"Keymap"}),o.jsx(ke,{children:o.jsx(_e,{"data-testid":"keymap-select",onChange:t=>e.onChange(t.target.value),value:e.value,disabled:e.disabled,className:"inline-flex mr-2",children:Bt.map((e=>o.jsx("option",{value:e,children:e},e)))})}),o.jsx(Me,{})]})})]}),o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsx(fd,{children:"Display"}),o.jsx(Ce,{control:r.control,name:"display.theme",render:({field:e})=>o.jsxs(xe,{children:[o.jsx(Te,{children:"Theme"}),o.jsx(ke,{children:o.jsx(_e,{"data-testid":"theme-select",onChange:t=>e.onChange(t.target.value),value:e.value,disabled:e.disabled,className:"inline-flex mr-2",children:Ee.map((e=>o.jsx("option",{value:e,children:e},e)))})}),o.jsx(Me,{})]})}),o.jsx(Ce,{control:r.control,name:"display.code_editor_font_size",render:({field:e})=>o.jsxs(xe,{className:"mb-2",children:[o.jsx(Te,{children:"Code editor font size"}),o.jsx(ke,{children:o.jsx("span",{className:"inline-flex mr-2",children:o.jsx(Se,{"data-testid":"code-editor-font-size-input",className:"m-0 w-24",...e,value:e.value,minValue:8,maxValue:20,onChange:t=>{e.onChange(t),i(r.getValues())}})})}),o.jsx(Me,{})]})}),o.jsx(Ce,{control:r.control,name:"display.cell_output",render:({field:e})=>o.jsxs(xe,{className:"mb-2",children:[o.jsx(Te,{children:"Cell output area"}),o.jsx(ke,{children:o.jsx(_e,{"data-testid":"cell-output-select",onChange:t=>e.onChange(t.target.value),value:e.value,disabled:e.disabled,className:"inline-flex mr-2",children:["above","below"].map((e=>o.jsx("option",{value:e,children:e},e)))})}),o.jsx(Me,{}),o.jsx(De,{children:"Where to display cell's output."})]})})]}),o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsx(fd,{children:"Package Management"}),o.jsx(Ce,{control:r.control,disabled:s,name:"package_management.manager",render:({field:e})=>o.jsxs(xe,{children:[o.jsx(Te,{children:"Manager"}),o.jsx(ke,{children:o.jsx(_e,{"data-testid":"package-manager-select",onChange:t=>e.onChange(t.target.value),value:e.value,disabled:e.disabled,className:"inline-flex mr-2",children:Pe.map((e=>o.jsx("option",{value:e,children:e},e)))})}),o.jsx(Me,{})]})})]}),o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsx(fd,{children:"Runtime"}),o.jsx(Ce,{control:r.control,name:"runtime.auto_instantiate",render:({field:e})=>o.jsxs(xe,{className:"flex flex-row items-start space-x-2 space-y-0",children:[o.jsx(ke,{children:o.jsx(Re,{"data-testid":"auto-instantiate-checkbox",disabled:e.disabled,checked:e.value,onCheckedChange:e.onChange})}),o.jsx(Te,{className:"font-normal",children:"Autorun on startup"})]})}),o.jsx(Ce,{control:r.control,name:"runtime.on_cell_change",render:({field:e})=>o.jsxs("div",{className:"flex flex-col gap-y-1",children:[o.jsxs(xe,{className:"flex flex-row items-start space-x-2 space-y-0",children:[o.jsx(ke,{children:o.jsx(_e,{"data-testid":"on-cell-change-select",onChange:t=>e.onChange(t.target.value),value:e.value,className:"inline-flex mr-2",children:["lazy","autorun"].map((e=>o.jsx("option",{value:e,children:e},e)))})}),o.jsx(Te,{className:"font-normal",children:"On cell change"})]}),o.jsx(De,{children:'Whether marimo should automatically run cells or just mark them as stale. If "autorun", marimo will automatically run affected cells when a cell is run or a UI element is interacted with; if "lazy", marimo will mark affected cells as stale but won\'t re-run them.'})]})}),o.jsx(Ce,{control:r.control,name:"runtime.auto_reload",render:({field:e})=>o.jsxs("div",{className:"flex flex-col gap-y-1",children:[o.jsxs(xe,{className:"flex flex-row items-start space-x-2 space-y-0",children:[o.jsx(ke,{children:o.jsx(_e,{"data-testid":"auto-reload-select",onChange:t=>e.onChange(t.target.value),value:e.value,disabled:s,className:"inline-flex mr-2",children:["off","lazy","autorun"].map((e=>o.jsx("option",{value:e,children:e},e)))})}),o.jsx(Te,{className:"font-normal",children:"On module change"})]}),o.jsx(De,{children:'Whether marimo should automatically reload modules before executing cells. If "lazy", marimo will mark cells affected by module modifications as stale; if "autorun", affected cells will be automatically re-run.'})]})})]}),o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsx(fd,{children:"AI Assist"}),o.jsxs("p",{className:"text-sm text-muted-secondary",children:["You will need to store an API key in your"," ",o.jsx(md,{className:"inline",children:"~/.marimo.toml"})," file. See the"," ",o.jsx("a",{className:"text-link hover:underline",href:"https://docs.marimo.io/guides/ai_completion.html",target:"_blank",rel:"noreferrer",children:"documentation"})," ","for more information."]}),o.jsx(Ce,{control:r.control,disabled:s,name:"ai.open_ai.base_url",render:({field:e})=>o.jsxs(xe,{className:"mb-2",children:[o.jsx(Te,{children:"Base URL"}),o.jsx(ke,{children:o.jsx(Oe,{"data-testid":"code-editor-font-size-input",className:"m-0 inline-flex",...e,value:e.value,placeholder:"https://api.openai.com",onChange:t=>e.onChange(t.target.value)})}),o.jsx(Me,{})]})}),o.jsx(Ce,{control:r.control,disabled:s,name:"ai.open_ai.model",render:({field:{value:e,onChange:t,...n}})=>o.jsxs(xe,{className:"mb-2",children:[o.jsx(Te,{children:"Model"}),o.jsx(ke,{children:o.jsx(Oe,{"data-testid":"code-editor-font-size-input",className:"m-0 inline-flex",...n,defaultValue:e,placeholder:"gpt-3.5-turbo",onBlur:e=>t(e.target.value)})}),o.jsx(Me,{})]})})]}),o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsx(fd,{children:"GitHub Copilot"}),o.jsx(Ce,{control:r.control,disabled:s,name:"completion.copilot",render:({field:e})=>o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsxs(xe,{className:"flex flex-row items-center space-x-2 space-y-0",children:[o.jsx(ke,{children:o.jsx(Ne,{"data-testid":"copilot-switch",size:"sm",checked:e.value,disabled:e.disabled,onCheckedChange:t=>{e.onChange(Boolean(t))}})}),o.jsx(Te,{className:"font-normal flex",children:"Enable"})]}),e.value&&o.jsx(dd,{})]})})]})]})})},vd=()=>{const[e,t]=Le(),n=ve({resolver:ye(Be),defaultValues:e});return p.useEffect((()=>{window.dispatchEvent(new Event("resize"))}),[e.width]),o.jsx(we,{...n,children:o.jsxs("form",{onChange:n.handleSubmit((async e=>{await Fe({config:e}).then((()=>{t(e)})).catch((()=>{t(e)}))})),className:"flex flex-col gap-4",children:[o.jsxs("div",{children:[o.jsx(hd,{children:"Application Config"}),o.jsx(pd,{children:"Settings applied to this notebook"})]}),o.jsx(Ce,{control:n.control,name:"width",render:({field:e})=>o.jsxs(xe,{children:[o.jsx(Te,{children:"Width"}),o.jsx(ke,{children:o.jsx(_e,{"data-testid":"app-width-select",onChange:t=>e.onChange(t.target.value),value:e.value,disabled:e.disabled,className:"inline-flex mr-2",children:Ae.map((e=>o.jsx("option",{value:e,children:e},e)))})}),o.jsx(Me,{})]})}),o.jsx(Ce,{control:n.control,name:"app_title",render:({field:e})=>o.jsxs("div",{className:"flex flex-col gap-y-1",children:[o.jsxs(xe,{className:"mb-2",children:[o.jsx(Te,{children:"Application title"}),o.jsx(ke,{children:o.jsx(Oe,{...e,value:e.value??"",onChange:t=>{e.onChange(t.target.value),Ie.safeParse(t.target.value).success&&(document.title=t.target.value)}})}),o.jsx(Me,{})]}),o.jsx(De,{children:"The application title is put in the title tag in the HTML code and typically displayed in the title bar of the browser window."})]})})]})})},yd=({showAppConfig:e=!0})=>o.jsxs(We,{children:[o.jsx(He,{asChild:!0,children:o.jsx(Ge,{"aria-label":"Config","data-testid":"app-config-button",shape:"circle",size:"small",className:"h-[27px] w-[27px]",color:"hint-green",children:o.jsx(u,{content:"Settings",children:o.jsx(Ve,{strokeWidth:1.8})})})}),o.jsxs(Ke,{className:"w-80 h-[90vh] overflow-auto",align:"end",side:"bottom",onFocusOutside:e=>e.preventDefault(),children:[e&&o.jsxs(o.Fragment,{children:[o.jsx(vd,{}),o.jsx("div",{className:"h-px bg-border my-4"})]}),o.jsx(gd,{})]})]}),bd=e=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 448 512",...e,children:o.jsx("path",{d:"M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"})}),wd=e=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 640 512",fill:"currentColor",...e,children:o.jsx("path",{d:"M593.8 59.1H46.2C20.7 59.1 0 79.8 0 105.2v301.5c0 25.5 20.7 46.2 46.2 46.2h547.7c25.5 0 46.2-20.7 46.1-46.1V105.2c0-25.4-20.7-46.1-46.2-46.1zM338.5 360.6H277v-120l-61.5 76.9-61.5-76.9v120H92.3V151.4h61.5l61.5 76.9 61.5-76.9h61.5v209.2zm135.3 3.1L381.5 256H443V151.4h61.5V256H566z"})});export{Ge as B,yd as C,md as K,od as L,wd as M,Ue as P,ze as S,Xe as a,bd as b,Lt as c,ld as d,Ut as e,cd as f,ed as g,rd as h,qt as i,Ve as j,Ft as k,Ze as u};
